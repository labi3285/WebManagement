import{d as J,m as V,p as Y,r as a,q as k,f as z,x as U,j as n,o as N,c as H,a as _,A as g,i as y,R as W,y as l,z as r,_ as X,l as ke,k as G,B as K,T as fe}from"./index.31c03dbb.js";const ye={class:"view"},_e={class:"head-info"},Le=J({__name:"items",setup(Z,{expose:A}){V();const f=Y(),v=a({});k(()=>f.getUserInfo.team),k(()=>f.getUserInfo.role),k(()=>f.getUserInfo.lob),k(()=>f.getUserInfo.id),A({setup:async(o,s)=>{v.value=o,s===1?p.checkListId=o.checkListId1:s===2?p.checkListId=o.checkListId2:s===3?p.checkListId=o.checkListId3:s===10?p.checkListId=o.checkListId10:s===11&&(p.checkListId=o.checkListId11),p.type=s,s==1?u.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"IF CTQ",key:"ifCtq",width:100,valueFormator:d=>d?"Y":"N"},{title:"Measurement Equipment",key:"measurementEquipment",width:200},{title:"Characteristic (Check item)",key:"checkItem",width:400},{title:"LSL",key:"LSL",width:200},{title:"USL",key:"USL",width:200},{title:"LCL (optional)",key:"LCL",width:200},{title:"UCL (optional)",key:"UCL",width:200},{title:"Sample Unit",key:"sampleUnit",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Audit Sample Size",key:"auditSampleSize",width:200},{title:"Frenquency/Basis",key:"frenquencyBasis",width:400},{title:"Control Type",key:"controlType",width:400},{title:"Control Method",key:"controlMethod",width:400},{title:"Control Criteria",key:"controlCriteria",width:400},{title:"Response plan",key:"responsePlan",width:400},{title:"SOP-NO.",key:"sopNo",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:d=>d?"TRUE":"FALSE"}]:s==2?u.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"Check Items",key:"checkItems",width:400},{title:"Sampling Size",key:"samplingSize",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:d=>d?"TRUE":"FALSE"}]:s==3?u.value=[{title:"SN",key:"sn",width:60},{title:"Project",key:"project",width:200},{title:"Test Item",key:"testItem",width:400},{title:"Test Condition/Parameter",key:"testConditionParameter",width:400},{title:"Equipment",key:"equipment",width:400},{title:"Fixture (Y/N)",key:"fixtureYN",width:200},{title:"Sample Orientation",key:"sampleOrientation",width:200},{title:"Recovery Time",key:"recoveryTime",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Sampling Freq.",key:"samplingFreq",width:200},{title:"Duration",key:"duration",width:200},{title:"Read Point",key:"readPoint",width:200},{title:"Pass/Fail Criteria",key:"passFailCriteria",width:400},{title:"OCAP",key:"OCAP",width:400},{title:"Result",key:"result",width:200}]:s==10?u.value=[{title:"SN",key:"sn",width:60},{title:"Class",key:"theClass",width:80},{title:"Line&Shift",key:"lineShift",width:200},{title:"Site",key:"site",width:200},{title:"Projects",key:"projects",width:200},{title:"Item",key:"item",width:200},{title:"Unit",key:"unit",width:100},{title:"USL",key:"USL",width:100},{title:"LSL",key:"LSL",width:100}]:s==11&&(u.value=[{title:"SN",key:"sn",width:60},{title:"Class",key:"theClass",width:80},{title:"Line&Shift",key:"lineShift",width:200},{title:"Site",key:"site",width:200},{title:"Projects",key:"projects",width:200},{title:"Item",key:"item",width:200},{title:"Unit",key:"unit",width:100},{title:"LSL",key:"LSL",width:100}]),D()}});const $=[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"},{value:10,label:"Glue"},{value:11,label:"Destructive"}],u=a([]),h={actions:[]};a({});const b=a(1),C=a(15),p=z({}),R=a({total:0,list:[]}),L=a(!0),D=async()=>{L.value=!0;try{const o=await U("/get_check_list_items_page",{pageNum:b.value,pageSize:C.value,...p});R.value=o}finally{L.value=!1}},c=(o,s)=>{},F=async(o,s)=>{};return(o,s)=>{const d=n("AAPageList"),E=n("n-card");return N(),H("div",ye,[_("div",_e,[_("p",null,g(v.value.lob)+" / "+g(v.value.site)+" / "+g(v.value.productLine)+" / "+g(v.value.project)+" / "+g(v.value.part)+" / "+g(y(W)(p.type,$)),1)]),l(E,null,{default:r(()=>[l(d,{isLoading:L.value,pageNum:b.value,"onUpdate:pageNum":s[0]||(s[0]=w=>b.value=w),pageSize:C.value,"onUpdate:pageSize":s[1]||(s[1]=w=>C.value=w),columns:u.value,actions:h,dataSource:R.value,onAction:c,onChange:F,onReload:D},null,8,["isLoading","pageNum","pageSize","columns","dataSource"])]),_:1})])}}});const we=X(Le,[["__scopeId","data-v-8f31b988"]]),Se={class:"page"},ge=J({__name:"index",setup(Z){const A=V();ke();const f=Y(),v=[{value:"MQA",label:"MQA"},{value:"Accessory",label:"Accessory"},{value:"Display",label:"Display"},{value:"SIP",label:"SIP"}],$=[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"},{value:10,label:"Glue"},{value:11,label:"Destructive"}],u=k(()=>f.getUserInfo.team),h=k(()=>f.getUserInfo.role);k(()=>f.getUserInfo.lob);const b=[{title:"Site Project Tree",key:"name",align:"left",width:500},{title:"Check List",key:"checkListTotal",width:200,valueFormator:(t,i)=>{if(i.part){const m=[];return i.checkListId1&&m.push("Module"),i.checkListId2&&m.push("Enclosure"),i.checkListId3&&m.push("ORT"),i.checkListId10&&m.push("Glue"),i.checkListId11&&m.push("Destructive"),m.join(" / ")}else return`${i.checkListUploaded} / ${i.checkListTotal}`}}],C=t=>t.id,p={width:"260px",actions:[{title:"Preview Module",type:"default",key:"preview1",isShow:t=>t.part!=null&&t.checkListId1!=null},{title:"Preview Enclosure",type:"default",key:"preview2",isShow:t=>t.part!=null&&t.checkListId2!=null},{title:"Preview ORT",type:"default",key:"preview3",isShow:t=>t.part!=null&&t.checkListId3!=null},{title:"Preview Glue",type:"default",key:"preview10",isShow:t=>t.part!=null&&t.checkListId10!=null},{title:"Preview Destructive",type:"default",key:"preview11",isShow:t=>t.part!=null&&t.checkListId11!=null},{title:"Upload",type:"info",key:"update",isShow:t=>h.value==="super_admin"||h.value==="admin"||h.value==="lob_dri"}],more:[]},R=a({}),L=a(1),D=a(15),c=z({});h.value==="super_admin"?c.team="MQA":c.team=u.value;const F=a([]),o=a(!0),s=()=>{h.value==="super_admin"?c.team="MQA":c.team=u.value,L.value=1},d=async()=>{o.value=!0;try{const t=await U("/get_lines_tree",{pageNum:L.value,pageSize:D.value,...c});F.value=t}finally{o.value=!1}},E=(t,i)=>{t==="preview1"?T(i,1):t==="preview2"?T(i,2):t==="preview3"?T(i,3):t==="preview10"?T(i,10):t==="preview11"?T(i,11):t==="update"?le(i):t==="delete"&&ae(i)},w=a(null),ee=()=>{w.value.show()},P=t=>{const i=document.createElement("a");i.download=t,i.style.display="none",i.href="http://localhost:8000/download_file?fileName="+t,document.body.appendChild(i),i.click(),document.body.removeChild(i)},I=a(null),x=a(!1),e=z({}),M=k(()=>e.lob&&e.site&&e.productLine&&e.project&&e.part&&e.type!=null?e.team==="Accessory"?`${e.lob}_${e.site}_${e.productLine}_${e.project}_${e.part}.json`:`${e.lob}_${e.site}_${e.productLine}_${e.project}_${e.part}_${W(e.type,$)}.json`:null),te=k(()=>e.team==="Accessory"?e.project==="Glue"?[{value:10,label:"Glue"}]:[{value:11,label:"Destructive"}]:e.auditType===1?[{value:1,label:"Module"},{value:3,label:"ORT"}]:e.auditType===2?[{value:2,label:"Enclosure"}]:e.auditType===3?[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"}]:[]),ie=async()=>{e.team=c.team||u.value,e.lob=c.lob,e.site=c.site,e.productLine=c.productLine,e.project=c.project,e.part=c.part,I.value.show()},le=t=>{e.auditType=t.auditType,e.team=t.team,e.lob=t.lob,e.site=t.site,e.productLine=t.productLine,e.project=t.project,e.part=t.part,e.type=void 0,I.value.show()},se=async()=>{x.value=!0;try{await U("/upload_check_list",e),A.success("Uploaded"),I.value.close(),d()}finally{x.value=!1}},ae=async t=>{A.loading("Deleting"),await U("/delete_check_list",{id:t.id}),A.success("Deleted"),I.value.close(),d()},O=a(),q=a(),T=async(t,i)=>{O.value.show(),await fe(),q.value.setup(t,i)};return(t,i)=>{const m=n("AAFormSelect"),S=n("n-grid-item"),oe=n("AAFormQueryButtons"),B=n("n-grid"),ne=n("AAForm"),ce=n("AAListButtonAdd"),re=n("AAListButtonDownload"),de=n("AAListHandlers"),ue=n("AAPageList"),pe=n("n-card"),Q=n("AADialog"),me=n("AAFormSiteProject"),ve=n("AAFormSelectJson"),he=n("AAFormDialog");return N(),H("div",Se,[l(pe,null,{default:r(()=>[y(h)==="super_admin"?(N(),G(ne,{key:0,labelPlacement:"left",isLoading:o.value,form:c,rules:R.value},{default:r(()=>[l(B,{cols:"1 400:2 800:3 1000:4"},{default:r(()=>[l(S,null,{default:r(()=>[l(m,{label:"Team",clearable:!1,form:c,formKey:"team",options:v},null,8,["form"])]),_:1}),l(S,null,{default:r(()=>[l(oe,{onQuery:d,onReset:s})]),_:1})]),_:1})]),_:1},8,["isLoading","form","rules"])):K("",!0),l(de,null,{default:r(()=>[l(ce,{title:"Upload",onClick:ie}),l(re,{title:"Check List Templates",onClick:ee})]),_:1}),l(ue,{isPaged:!1,isLoading:o.value,columns:b,actions:p,dataSource:F.value,childrenKey:"sub",rowKey:C,onReady:d,onAction:E,onReload:d},null,8,["isLoading","dataSource"])]),_:1}),l(Q,{ref_key:"templatesDialogRef",ref:w,title:"Check List Templates",width:"320px"},{default:r(()=>[_("div",{class:"download-link",onClick:i[0]||(i[0]=j=>P("module_check_list_template.json"))},"Module Check List Template"),_("div",{class:"download-link",onClick:i[1]||(i[1]=j=>P("enclosure_check_list_template.json"))},"Enclosure Check List Template"),_("div",{class:"download-link",onClick:i[2]||(i[2]=j=>P("ort_check_list_template.json"))},"ORT Check List Template"),_("div",{class:"download-link",onClick:i[3]||(i[3]=j=>P("glue_check_list_template.json"))},"Glue Check List Template"),_("div",{class:"download-link",onClick:i[4]||(i[4]=j=>P("destructive_check_list_template.json"))},"Destructive Check List Template")]),_:1},512),l(he,{ref_key:"editDialogRef",ref:I,title:"Upload Check List",width:"400px",isLoading:x.value,form:e,onConfirm:se},{default:r(()=>[l(B,{cols:"1"},{default:r(()=>[y(h)==="super_admin"?(N(),G(S,{key:0},{default:r(()=>[l(m,{label:"Team",clearable:!1,form:e,formKey:"team",options:v},null,8,["form"])]),_:1})):K("",!0),l(S,null,{default:r(()=>[l(me,{isRequired:!0,selectParent:!1,label:"Site Project",form:e,team:e.team},null,8,["form","team"])]),_:1}),l(S,null,{default:r(()=>[l(m,{isRequired:!0,label:"Audit Type",form:e,formKey:"type",options:y(te)},null,8,["form","options"])]),_:1}),l(S,null,{default:r(()=>[l(ve,{disabled:!e.part,isRequired:!0,label:"JSON Spec File",form:e,formKey:"rawJson",validateName:y(M),tips:"The JSON file must match the line selected"+(y(M)?", and with name '"+y(M)+"'":"")},null,8,["disabled","form","validateName","tips"])]),_:1})]),_:1})]),_:1},8,["isLoading","form"]),l(Q,{ref_key:"previewDialogRef",ref:O,title:"Preview"},{default:r(()=>[l(we,{ref_key:"previewRef",ref:q},null,512)]),_:1},512)])}}});const be=X(ge,[["__scopeId","data-v-fa06004b"]]);export{be as default};
