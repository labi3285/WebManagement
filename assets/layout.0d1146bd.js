import{d as N,o as E,c as H,a as O,_ as ie,n as Je,w as Qe,v as Xe,u as ve,b as ke,e as Ze,s as fe,r as W,f as et,g as tt,h as Le,t as St,i as Ce,j as P,k as V,l as nt,m as Pe,p as ot,q as Z,x as Ct,y as L,z as $,A as ne,B as ye,C as Se,F as Ee,S as kt,D as st,E as rt,G as xt,H as Lt,I as $e,J as Pt,K as be,L as Ne,M as Be,N as Et,O as $t,P as Ot,Q as Ue}from"./index.18bbd02b.js";import{_ as Tt}from"./logo.e3101228.js";const zt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Mt=O("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8L295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512L196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1l216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z",fill:"currentColor"},null,-1),At=[Mt],je=N({name:"CloseOutlined",render:function(t,s){return E(),H("svg",zt,At)}}),Rt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},It=O("path",{d:"M180 176h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zm724 0h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zM785.3 504.3L657.7 403.6a7.23 7.23 0 0 0-11.7 5.7V476H378v-62.8c0-6-7-9.4-11.7-5.7L238.7 508.3a7.14 7.14 0 0 0 0 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h268v62.8c0 6 7 9.4 11.7 5.7l127.5-100.8c3.8-2.9 3.8-8.5.2-11.4z",fill:"currentColor"},null,-1),Dt=[It],Ht=N({name:"ColumnWidthOutlined",render:function(t,s){return E(),H("svg",Rt,Dt)}}),Ft={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Nt=O("path",{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 0 0 0 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 0 0 391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6L877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 0 0-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z",fill:"currentColor"},null,-1),Bt=[Nt],Ut=N({name:"FullscreenExitOutlined",render:function(t,s){return E(),H("svg",Ft,Bt)}}),jt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Wt=O("path",{d:"M290 236.4l43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6l43.7 43.7a8.01 8.01 0 0 0 13.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 0 0 0 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 0 0-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6L423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z",fill:"currentColor"},null,-1),qt=[Wt],Vt=N({name:"FullscreenOutlined",render:function(t,s){return E(),H("svg",jt,qt)}}),Kt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Gt=O("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281l360-281.1c3.8-3 6.1-7.7 6.1-12.6z",fill:"currentColor"},null,-1),Yt=[Gt],Jt=N({name:"LeftOutlined",render:function(t,s){return E(),H("svg",Kt,Yt)}}),Qt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Xt=O("path",{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 1 0-56 0z",fill:"currentColor"},null,-1),Zt=[Xt],en=N({name:"LockOutlined",render:function(t,s){return E(),H("svg",Qt,Zt)}}),tn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},nn=O("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z",fill:"currentColor"},null,-1),on=[nn],sn=N({name:"MenuFoldOutlined",render:function(t,s){return E(),H("svg",tn,on)}}),rn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},an=O("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z",fill:"currentColor"},null,-1),ln=[an],cn=N({name:"MenuUnfoldOutlined",render:function(t,s){return E(),H("svg",rn,ln)}}),dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},un=O("path",{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1),fn=[un],hn=N({name:"MinusOutlined",render:function(t,s){return E(),H("svg",dn,fn)}}),pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},vn=O("path",{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92C290 92 102.3 279.5 102 511.5C101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1c1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 0 0-10.1 4.8c-1.8 5-3.8 10-5.9 14.9c-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 0 1 655.9 829c-42.3 17.9-87.4 27-133.8 27c-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 0 1 279 755.2a342.16 342.16 0 0 1-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4c31.6-31.6 68.4-56.4 109.3-73.8c42.3-17.9 87.4-27 133.8-27c46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 0 1 109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 0 0 3 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z",fill:"currentColor"},null,-1),gn=[vn],it=N({name:"ReloadOutlined",render:function(t,s){return E(),H("svg",pn,gn)}}),_n={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},mn=O("path",{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1l-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z",fill:"currentColor"},null,-1),wn=[mn],bn=N({name:"RightOutlined",render:function(t,s){return E(),H("svg",_n,wn)}}),yn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Sn=O("path",{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5a375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1c-.4.2-.8.3-1.2.5c-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8c2-77.2 33-149.5 87.8-204.3c56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z",fill:"currentColor"},null,-1),Cn=[Sn],at=N({name:"UserOutlined",render:function(t,s){return E(),H("svg",yn,Cn)}}),kn=N({name:"system-logo",props:{isCollapsed:{type:Boolean,required:!0}}});const xn={class:"system-logo"},Ln={class:"system-logo__name"};function Pn(e,t,s,n,c,l){return E(),H("div",xn,[O("img",{class:Je(["system-logo__icon",{"mr-2":!e.isCollapsed}]),src:Tt,alt:""},null,2),Qe(O("div",Ln,"Smart Audit",512),[[Xe,!e.isCollapsed]])])}const En=ie(kn,[["render",Pn],["__scopeId","data-v-7e173843"]]);function $n(e){var t,s;return((t=e.meta)==null?void 0:t.alwaysShow)!=!0&&((s=e.children)==null?void 0:s.length)===1}function On(e){return e.filter(t=>{var s;return(((s=t.meta)==null?void 0:s.hidden)||!1)!=!0&&!["/:path(.*)*","/","/redirect","/login"].includes(t.path)})}function lt(e){return On(e).map(t=>{var l,i,r;const s=$n(t),n=s?t.children[0]:t,c={...n,...n.meta,label:(l=n.meta)==null?void 0:l.title,key:n.name,icon:s?(i=t.meta)==null?void 0:i.icon:(r=n.meta)==null?void 0:r.icon};return n.children&&n.children.length>0&&(c.children=lt(n.children)),c})}const Tn=N({name:"system-menu",components:{},props:{isCollapsed:{type:Boolean},location:{type:String,default:"left"}},emits:["update:isCollapsed"],setup(e,{emit:t}){const s=ve(),n=ke(),c=Ze(fe),l=W([]),i=W(s.name),r=W(""),v=s.matched,a=v&&v.length?v.map(_=>_.name):[],b=et({expandedKeys:a});tt(()=>s.fullPath,()=>{var S;C();const _=s.matched;b.expandedKeys=_.map(x=>x.name);const k=((S=s.meta)==null?void 0:S.activeMenu)||"";i.value=k||s.name});function C(){l.value=lt(c.getMenus)}function w(_){console.log("Click Menu:"+_),/http(s)?:/.test(_)?window.open(_):n.push({name:_})}function y(_){if(!_)return;const k=_.find(x=>b.expandedKeys.indexOf(x)===-1),S=m(k);b.expandedKeys=S?k?[k]:[]:_}function m(_){if(!_)return!1;const k=[];for(const{children:S,key:x}of Ce(l))S&&S.length&&k.push(x);return k.includes(_)}return Le(()=>{C()}),{...St(b),menus:l,selectedMenuKey:i,headerMenuSelectKey:r,onMenuItemClick:w,onMenuExpanded:y}}});function zn(e,t,s,n,c,l){const i=P("n-menu");return E(),V(i,{options:e.menus,inverted:!0,mode:"vertical",isCollapsed:e.isCollapsed,"collapsed-width":60,"collapsed-icon-size":20,"root-indent":10,indent:10,"expanded-keys":e.expandedKeys,value:e.selectedMenuKey,"onUpdate:value":e.onMenuItemClick,"onUpdate:expandedKeys":e.onMenuExpanded},null,8,["options","isCollapsed","expanded-keys","value","onUpdate:value","onUpdate:expandedKeys"])}const Mn=ie(Tn,[["render",zn]]),An=N({name:"UserSetting",components:{UserOutlined:at},setup(){const e=nt(),t=Pe(),s=ke(),n=ve(),c=ot(),l=Z(()=>c.getUserInfo),i=Z(()=>{let o=[];return l.value.team&&l.value.team.length>0&&l.value.team!="MQA"&&o.push(l.value.team),l.value.role==="admin"?o.push("Admin"):l.value.role==="lob_dri"?o.push("DRI"):l.value.role==="lob_auditor"&&o.push("Auditor"),o.join(" / ")}),r=Z(()=>{let o=[];if(l.value.lob)for(const A of l.value.lob)o.push(A);return o.join(",")}),v=W(!1);function a(){v.value=!0}function b(){v.value=!1}const C=W(),w=W(!1),y=W(!1),m=et({currentPassword:null,newPassword:null,confirmNewPassword:null}),_=W({currentPassword:{required:!0,message:"Current Password Empty",trigger:"blur"},newPassword:{required:!0,message:"New Password Empty",trigger:"blur"},confirmNewPassword:{required:!0,message:"Confirm Password Empty",trigger:"blur"}}),k=()=>{m.currentPassword=null,m.newPassword=null,m.confirmNewPassword=null,w.value=!0},S=()=>{C.value.validate(o=>{if(!o){if(m.newPassword!==m.confirmNewPassword){t.warning("Confirm Password Not Match");return}M()}})},x=()=>{w.value=!1};async function M(){y.value=!0;try{await Ct("/user_change_password",{oldPassword:m.currentPassword,newPassword:m.newPassword}),t.success("Password Changed"),w.value=!1}finally{y.value=!1}}return{userInfo:l,userSubInfo:i,userLobs:r,isShow:v,open:a,close:b,onLogout:()=>{e.info({title:"Notice",content:"Are you sure you want to logout?",positiveText:"Logout",negativeText:"Cancel",onPositiveClick:()=>{c.cleanLoginInfo().then(()=>{t.success("Logout Success"),localStorage.removeItem("SYSTEM_TABS"),s.replace({name:"Login",query:{redirect:n.fullPath}}).finally(()=>location.reload())})}})},changePasswordFormRef:C,isChangePassowrdDialogShow:w,isChangePasswordLoading:y,onChangePassword:k,changePasswordForm:m,changePasswordFormRules:_,onChangePasswordConfirm:S,onChangePasswordCancel:x}}});const Rn={class:"page"},In={class:"page__info"},Dn={class:"page__info__account"},Hn={class:"page__info__info"},Fn={class:"page__info__lobs"},Nn={class:"page__bottom-box"},Bn={class:"dialog-bottom-bar"};function Un(e,t,s,n,c,l){const i=P("UserOutlined"),r=P("n-icon"),v=P("n-avatar"),a=P("n-button"),b=P("n-drawer"),C=P("n-input"),w=P("n-form-item"),y=P("n-space"),m=P("n-form"),_=P("n-spin"),k=P("n-modal");return E(),H(Ee,null,[L(b,{show:e.isShow,"onUpdate:show":t[1]||(t[1]=S=>e.isShow=S),width:260,height:200,placement:"right"},{default:$(()=>[O("div",Rn,[O("div",In,[L(v,{class:"page__info__icon",round:""},{default:$(()=>[L(r,null,{default:$(()=>[L(i)]),_:1})]),_:1}),O("div",Dn,ne(e.userInfo.account),1),O("div",Hn,ne(e.userSubInfo),1),O("div",Fn,ne(e.userLobs),1),e.userInfo.id>=0?(E(),H("div",{key:0,class:"page__info__password",onClick:t[0]||(t[0]=(...S)=>e.onChangePassword&&e.onChangePassword(...S))},"Change Password")):ye("",!0)]),O("div",Nn,[L(a,{onClick:e.onLogout},{default:$(()=>[Se("Logout")]),_:1},8,["onClick"])])])]),_:1},8,["show"]),L(k,{show:e.isChangePassowrdDialogShow,"onUpdate:show":t[5]||(t[5]=S=>e.isChangePassowrdDialogShow=S),title:"Change Password","show-icon":!1,preset:"dialog",style:{width:"400px"}},{default:$(()=>[L(_,{show:e.isChangePasswordLoading},{default:$(()=>[L(m,{size:"medium",ref:"changePasswordFormRef","label-placement":"top",model:e.changePasswordForm,rules:e.changePasswordFormRules},{default:$(()=>[L(w,{label:"Last Password",path:"currentPassword"},{default:$(()=>[L(C,{value:e.changePasswordForm.currentPassword,"onUpdate:value":t[2]||(t[2]=S=>e.changePasswordForm.currentPassword=S),placeholder:"Input Current Password"},null,8,["value"])]),_:1}),L(w,{label:"New Password",path:"newPassword"},{default:$(()=>[L(C,{value:e.changePasswordForm.newPassword,"onUpdate:value":t[3]||(t[3]=S=>e.changePasswordForm.newPassword=S),placeholder:"Input New Password"},null,8,["value"])]),_:1}),L(w,{label:"Confirm New Password",path:"confirmNewPassword"},{default:$(()=>[L(C,{value:e.changePasswordForm.confirmNewPassword,"onUpdate:value":t[4]||(t[4]=S=>e.changePasswordForm.confirmNewPassword=S),placeholder:"Confirm New Password"},null,8,["value"])]),_:1}),O("div",Bn,[L(y,null,{default:$(()=>[L(a,{onClick:e.onChangePasswordCancel},{default:$(()=>[Se("Cancel")]),_:1},8,["onClick"]),L(a,{type:"info",onClick:e.onChangePasswordConfirm},{default:$(()=>[Se("Confirm")]),_:1},8,["onClick"])]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])],64)}const jn=ie(An,[["render",Un],["__scopeId","data-v-5ac52d9d"]]),Wn=N({name:"system-head",components:{UserSetting:jn,MenuUnfoldOutlined:cn,MenuFoldOutlined:sn,ReloadOutlined:it,LockOutlined:en,FullscreenOutlined:Vt,FullscreenExitOutlined:Ut,UserOutlined:at,SettingOutlined:kt},props:{isCollapsed:{type:Boolean,required:!0}},setup(){const e=ot(fe),t=ke(),s=ve();nt(),Pe();const n=Z(()=>{var _;let w=((_=e==null?void 0:e.getUserInfo)==null?void 0:_.account)||"A";const y=w.split(" ");function m(k){return k.length>4?k.slice(0,4):k}return y.length>1?y[0].slice(0,1)+y[1].slice(0,1):m(w)}),c=w=>{const y=st.get("SYSTEM_PERMISSIONS",[]),m=[];for(const _ of w){let k=!1;if(_.meta&&_.meta.permissions)for(const x of _.meta.permissions){let M=!1;for(const f of y)f===x&&(M=!0);M&&(k=!0)}else k=!0;if(!k)continue;const S={..._,label:_.meta.title,key:_.name,disabled:_.path==="/"};_.children&&_.children.length>0&&(S.children=c(_.children)),m.push(S)}return m},l=Z(()=>c(s.matched)),i=w=>{t.push({name:w})},r=()=>{t.push({path:"/redirect="+Ce(s).fullPath})},v=W(!1),a=()=>{if(v.value)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),v.value=!1;else{const w=document.documentElement;w.requestFullScreen?w.requestFullScreen():w.webkitRequestFullScreen?w.webkitRequestFullScreen():w.mozRequestFullScreen&&w.mozRequestFullScreen(),v.value=!0}},b=W();function C(){b.value.open()}return{shortAccount:n,onRefreshClick:r,breadcrumbList:l,dropdownSelect:i,isFullScreen:v,onFullScreenClick:a,userSettingRef:b,onUserSetting:C}}});const ct=e=>(xt("data-v-bec3403d"),e=e(),Lt(),e),qn={class:"system-head"},Vn={class:"system-head__left"},Kn=ct(()=>O("div",{style:{width:"5px"}},null,-1)),Gn=ct(()=>O("div",{style:{width:"5px"}},null,-1)),Yn={class:"link-text"},Jn={key:1,class:"link-text"},Qn={class:"system-head__right"};function Xn(e,t,s,n,c,l){const i=P("MenuUnfoldOutlined"),r=P("MenuFoldOutlined"),v=P("n-icon"),a=P("n-dropdown"),b=P("n-breadcrumb-item"),C=P("n-breadcrumb"),w=P("FullscreenOutlined"),y=P("FullscreenExitOutlined"),m=P("n-tooltip"),_=P("UserOutlined"),k=P("n-avatar"),S=P("UserSetting");return Qe((E(),H("div",qn,[O("div",Vn,[Kn,L(v,{size:"20",class:"system-head__left__button",onClick:t[0]||(t[0]=()=>e.$emit("update:isCollapsed",!e.isCollapsed))},{default:$(()=>[e.isCollapsed?(E(),V(i,{key:0})):(E(),V(r,{key:1}))]),_:1}),Gn,L(C,null,{default:$(()=>[(E(!0),H(Ee,null,rt(e.breadcrumbList,x=>(E(),V(b,{key:x.name},{default:$(()=>[x.children.length?(E(),V(a,{key:0,options:x.children,onSelect:e.dropdownSelect},{default:$(()=>[O("span",Yn,ne(x.meta.title),1)]),_:2},1032,["options","onSelect"])):(E(),H("span",Jn,ne(x.meta.title),1))]),_:2},1024))),128))]),_:1})]),O("div",Qn,[L(m,{placement:"bottom"},{trigger:$(()=>[L(v,{class:"system-head__right__button",size:"20",onClick:e.onFullScreenClick},{default:$(()=>[e.isFullScreen?(E(),V(w,{key:0})):(E(),V(y,{key:1}))]),_:1},8,["onClick"])]),default:$(()=>[O("span",null,ne(e.isFullScreen?"Exsit Full Screen":"Full Screen"),1)]),_:1}),L(k,{onClick:e.onUserSetting,class:"system-head__right__avatar",round:""},{icon:$(()=>[L(_)]),default:$(()=>[Se(ne(e.shortAccount)+" ",1)]),_:1},8,["onClick"])]),L(S,{ref:"userSettingRef"},null,512)],512)),[[Xe,!e.isFullScreen]])}const Zn=ie(Wn,[["render",Xn],["__scopeId","data-v-bec3403d"]]),eo=["Redirect","Login"],to=$e({id:"system-tabs",state:()=>({tabs:[]}),getters:{},actions:{initTabs(e){this.tabs=e},addTabs(e){return eo.includes(e.name)?!1:(this.tabs.some(s=>s.fullPath==e.fullPath)||this.tabs.push(e),!0)},closeLeftTabs(e){const t=this.tabs.findIndex(s=>s.fullPath==e.fullPath);this.tabs.splice(0,t)},closeRightTabs(e){const t=this.tabs.findIndex(s=>s.fullPath==e.fullPath);this.tabs.splice(t+1)},closeOtherTabs(e){this.tabs=this.tabs.filter(t=>t.fullPath==e.fullPath)},closeCurrentTab(e){const t=this.tabs.findIndex(s=>s.fullPath==e.fullPath);this.tabs.splice(t,1)},closeAllTabs(){this.tabs=[],localStorage.removeItem("SYSTEM_TABS")}}});var Oe={exports:{}},no=Oe.exports={};no.forEach=function(e,t){for(var s=0;s<e.length;s++){var n=t(e[s]);if(n)return n}};var oo=function(e){var t=e.stateHandler.getState;function s(i){var r=t(i);return r&&!!r.isDetectable}function n(i){t(i).isDetectable=!0}function c(i){return!!t(i).busy}function l(i,r){t(i).busy=!!r}return{isDetectable:s,markAsDetectable:n,isBusy:c,markBusy:l}},so=function(e){var t={};function s(i){var r=e.get(i);return r===void 0?[]:t[r]||[]}function n(i,r){var v=e.get(i);t[v]||(t[v]=[]),t[v].push(r)}function c(i,r){for(var v=s(i),a=0,b=v.length;a<b;++a)if(v[a]===r){v.splice(a,1);break}}function l(i){var r=s(i);!r||(r.length=0)}return{get:s,add:n,removeListener:c,removeAllListeners:l}},ro=function(){var e=1;function t(){return e++}return{generate:t}},io=function(e){var t=e.idGenerator,s=e.stateHandler.getState;function n(l){var i=s(l);return i&&i.id!==void 0?i.id:null}function c(l){var i=s(l);if(!i)throw new Error("setId required the element to have a resize detection state.");var r=t.generate();return i.id=r,r}return{get:n,set:c}},ao=function(e){function t(){}var s={log:t,warn:t,error:t};if(!e&&window.console){var n=function(c,l){c[l]=function(){var r=console[l];if(r.apply)r.apply(console,arguments);else for(var v=0;v<arguments.length;v++)r(arguments[v])}};n(s,"log"),n(s,"warn"),n(s,"error")}return s},Te={exports:{}},dt=Te.exports={};dt.isIE=function(e){function t(){var n=navigator.userAgent.toLowerCase();return n.indexOf("msie")!==-1||n.indexOf("trident")!==-1||n.indexOf(" edge/")!==-1}if(!t())return!1;if(!e)return!0;var s=function(){var n,c=3,l=document.createElement("div"),i=l.getElementsByTagName("i");do l.innerHTML="<!--[if gt IE "+ ++c+"]><i></i><![endif]-->";while(i[0]);return c>4?c:n}();return e===s};dt.isLegacyOpera=function(){return!!window.opera};var ut={exports:{}},lo=ut.exports={};lo.getOption=co;function co(e,t,s){var n=e[t];return n==null&&s!==void 0?s:n}var We=ut.exports,uo=function(t){t=t||{};var s=t.reporter,n=We.getOption(t,"async",!0),c=We.getOption(t,"auto",!0);c&&!n&&(s&&s.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var l=qe(),i,r=!1;function v(m,_){!r&&c&&n&&l.size()===0&&C(),l.add(m,_)}function a(){for(r=!0;l.size();){var m=l;l=qe(),m.process()}r=!1}function b(m){r||(m===void 0&&(m=n),i&&(w(i),i=null),m?C():a())}function C(){i=y(a)}function w(m){var _=clearTimeout;return _(m)}function y(m){var _=function(k){return setTimeout(k,0)};return _(m)}return{add:v,force:b}};function qe(){var e={},t=0,s=0,n=0;function c(r,v){v||(v=r,r=0),r>s?s=r:r<n&&(n=r),e[r]||(e[r]=[]),e[r].push(v),t++}function l(){for(var r=n;r<=s;r++)for(var v=e[r],a=0;a<v.length;a++){var b=v[a];b()}}function i(){return t}return{add:c,process:l,size:i}}var ze="_erd";function fo(e){return e[ze]={},ft(e)}function ft(e){return e[ze]}function ho(e){delete e[ze]}var po={initState:fo,getState:ft,cleanState:ho},he=Te.exports,vo=function(e){e=e||{};var t=e.reporter,s=e.batchProcessor,n=e.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function c(a,b){function C(){b(a)}if(he.isIE(8))n(a).object={proxy:C},a.attachEvent("onresize",C);else{var w=r(a);if(!w)throw new Error("Element is not detectable by this strategy.");w.contentDocument.defaultView.addEventListener("resize",C)}}function l(a){var b=e.important?" !important; ":"; ";return(a.join(b)+b).trim()}function i(a,b,C){C||(C=b,b=a,a=null),a=a||{},a.debug;function w(y,m){var _=l(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),k=!1,S=window.getComputedStyle(y),x=y.offsetWidth,M=y.offsetHeight;n(y).startSize={width:x,height:M};function f(){function o(){if(S.position==="static"){y.style.setProperty("position","relative",a.important?"important":"");var F=function(j,R,u,d){function g(U){return U.replace(/[^-\d\.]/g,"")}var z=u[d];z!=="auto"&&g(z)!=="0"&&(j.warn("An element that is positioned static has style."+d+"="+z+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+d+" will be set to 0. Element: ",R),R.style.setProperty(d,"0",a.important?"important":""))};F(t,y,S,"top"),F(t,y,S,"right"),F(t,y,S,"bottom"),F(t,y,S,"left")}}function A(){k||o();function F(R,u){if(!R.contentDocument){var d=n(R);d.checkForObjectDocumentTimeoutId&&window.clearTimeout(d.checkForObjectDocumentTimeoutId),d.checkForObjectDocumentTimeoutId=setTimeout(function(){d.checkForObjectDocumentTimeoutId=0,F(R,u)},100);return}u(R.contentDocument)}var j=this;F(j,function(u){m(y)})}S.position!==""&&(o(),k=!0);var h=document.createElement("object");h.style.cssText=_,h.tabIndex=-1,h.type="text/html",h.setAttribute("aria-hidden","true"),h.onload=A,he.isIE()||(h.data="about:blank"),n(y)&&(y.appendChild(h),n(y).object=h,he.isIE()&&(h.data="about:blank"))}s?s.add(f):f()}he.isIE(8)?C(b):w(b,C)}function r(a){return n(a).object}function v(a){if(!!n(a)){var b=r(a);!b||(he.isIE(8)?a.detachEvent("onresize",b.proxy):a.removeChild(b),n(a).checkForObjectDocumentTimeoutId&&window.clearTimeout(n(a).checkForObjectDocumentTimeoutId),delete n(a).object)}}return{makeDetectable:i,addListener:c,uninstall:v}},go=Oe.exports.forEach,_o=function(e){e=e||{};var t=e.reporter,s=e.batchProcessor,n=e.stateHandler.getState;e.stateHandler.hasState;var c=e.idHandler;if(!s)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var l=b(),i="erd_scroll_detection_scrollbar_style",r="erd_scroll_detection_container";function v(f){C(f,i,r)}v(window.document);function a(f){var o=e.important?" !important; ":"; ";return(f.join(o)+o).trim()}function b(){var f=500,o=500,A=document.createElement("div");A.style.cssText=a(["position: absolute","width: "+f*2+"px","height: "+o*2+"px","visibility: hidden","margin: 0","padding: 0"]);var h=document.createElement("div");h.style.cssText=a(["position: absolute","width: "+f+"px","height: "+o+"px","overflow: scroll","visibility: none","top: "+-f*3+"px","left: "+-o*3+"px","visibility: hidden","margin: 0","padding: 0"]),h.appendChild(A),document.body.insertBefore(h,document.body.firstChild);var F=f-h.clientWidth,j=o-h.clientHeight;return document.body.removeChild(h),{width:F,height:j}}function C(f,o,A){function h(u,d){d=d||function(z){f.head.appendChild(z)};var g=f.createElement("style");return g.innerHTML=u,g.id=o,d(g),g}if(!f.getElementById(o)){var F=A+"_animation",j=A+"_animation_active",R=`/* Created by the element-resize-detector library. */
`;R+="."+A+" > div::-webkit-scrollbar { "+a(["display: none"])+` }

`,R+="."+j+" { "+a(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+F,"animation-name: "+F])+` }
`,R+="@-webkit-keyframes "+F+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,R+="@keyframes "+F+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",h(R)}}function w(f){f.className+=" "+r+"_animation_active"}function y(f,o,A){if(f.addEventListener)f.addEventListener(o,A);else if(f.attachEvent)f.attachEvent("on"+o,A);else return t.error("[scroll] Don't know how to add event listeners.")}function m(f,o,A){if(f.removeEventListener)f.removeEventListener(o,A);else if(f.detachEvent)f.detachEvent("on"+o,A);else return t.error("[scroll] Don't know how to remove event listeners.")}function _(f){return n(f).container.childNodes[0].childNodes[0].childNodes[0]}function k(f){return n(f).container.childNodes[0].childNodes[0].childNodes[1]}function S(f,o){var A=n(f).listeners;if(!A.push)throw new Error("Cannot add listener to an element that is not detectable.");n(f).listeners.push(o)}function x(f,o,A){A||(A=o,o=f,f=null),f=f||{};function h(){if(f.debug){var p=Array.prototype.slice.call(arguments);if(p.unshift(c.get(o),"Scroll: "),t.log.apply)t.log.apply(null,p);else for(var T=0;T<p.length;T++)t.log(p[T])}}function F(p){function T(D){var G=D.getRootNode&&D.getRootNode().contains(D);return D===D.ownerDocument.body||D.ownerDocument.body.contains(D)||G}return!T(p)||window.getComputedStyle(p)===null}function j(p){var T=n(p).container.childNodes[0],D=window.getComputedStyle(T);return!D.width||D.width.indexOf("px")===-1}function R(){var p=window.getComputedStyle(o),T={};return T.position=p.position,T.width=o.offsetWidth,T.height=o.offsetHeight,T.top=p.top,T.right=p.right,T.bottom=p.bottom,T.left=p.left,T.widthCSS=p.width,T.heightCSS=p.height,T}function u(){var p=R();n(o).startSize={width:p.width,height:p.height},h("Element start size",n(o).startSize)}function d(){n(o).listeners=[]}function g(){if(h("storeStyle invoked."),!n(o)){h("Aborting because element has been uninstalled");return}var p=R();n(o).style=p}function z(p,T,D){n(p).lastWidth=T,n(p).lastHeight=D}function U(p){return _(p).childNodes[0]}function Y(){return 2*l.width+1}function ae(){return 2*l.height+1}function ge(p){return p+10+Y()}function _e(p){return p+10+ae()}function ht(p){return p*2+Y()}function pt(p){return p*2+ae()}function Me(p,T,D){var G=_(p),oe=k(p),le=ge(T),ce=_e(D),q=ht(T),I=pt(D);G.scrollLeft=le,G.scrollTop=ce,oe.scrollLeft=q,oe.scrollTop=I}function Ae(){var p=n(o).container;if(!p){p=document.createElement("div"),p.className=r,p.style.cssText=a(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),n(o).container=p,w(p),o.appendChild(p);var T=function(){n(o).onRendered&&n(o).onRendered()};y(p,"animationstart",T),n(o).onAnimationStart=T}return p}function vt(){function p(){var B=n(o).style;if(B.position==="static"){o.style.setProperty("position","relative",f.important?"important":"");var X=function(ue,re,wt,we){function bt(yt){return yt.replace(/[^-\d\.]/g,"")}var xe=wt[we];xe!=="auto"&&bt(xe)!=="0"&&(ue.warn("An element that is positioned static has style."+we+"="+xe+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+we+" will be set to 0. Element: ",re),re.style[we]=0)};X(t,o,B,"top"),X(t,o,B,"right"),X(t,o,B,"bottom"),X(t,o,B,"left")}}function T(B,X,ue,re){return B=B?B+"px":"0",X=X?X+"px":"0",ue=ue?ue+"px":"0",re=re?re+"px":"0",["left: "+B,"top: "+X,"right: "+re,"bottom: "+ue]}if(h("Injecting elements"),!n(o)){h("Aborting because element has been uninstalled");return}p();var D=n(o).container;D||(D=Ae());var G=l.width,oe=l.height,le=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),ce=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(T(-(1+G),-(1+oe),-oe,-G))),q=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),I=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),K=a(["position: absolute","left: 0","top: 0"]),se=a(["position: absolute","width: 200%","height: 200%"]),J=document.createElement("div"),Q=document.createElement("div"),de=document.createElement("div"),Ie=document.createElement("div"),me=document.createElement("div"),De=document.createElement("div");J.dir="ltr",J.style.cssText=le,J.className=r,Q.className=r,Q.style.cssText=ce,de.style.cssText=q,Ie.style.cssText=K,me.style.cssText=I,De.style.cssText=se,de.appendChild(Ie),me.appendChild(De),Q.appendChild(de),Q.appendChild(me),J.appendChild(Q),D.appendChild(J);function He(){var B=n(o);B&&B.onExpand?B.onExpand():h("Aborting expand scroll handler: element has been uninstalled")}function Fe(){var B=n(o);B&&B.onShrink?B.onShrink():h("Aborting shrink scroll handler: element has been uninstalled")}y(de,"scroll",He),y(me,"scroll",Fe),n(o).onExpandScroll=He,n(o).onShrinkScroll=Fe}function gt(){function p(q,I,K){var se=U(q),J=ge(I),Q=_e(K);se.style.setProperty("width",J+"px",f.important?"important":""),se.style.setProperty("height",Q+"px",f.important?"important":"")}function T(q){var I=o.offsetWidth,K=o.offsetHeight,se=I!==n(o).lastWidth||K!==n(o).lastHeight;h("Storing current size",I,K),z(o,I,K),s.add(0,function(){if(!!se){if(!n(o)){h("Aborting because element has been uninstalled");return}if(!D()){h("Aborting because element container has not been initialized");return}if(f.debug){var Q=o.offsetWidth,de=o.offsetHeight;(Q!==I||de!==K)&&t.warn(c.get(o),"Scroll: Size changed before updating detector elements.")}p(o,I,K)}}),s.add(1,function(){if(!n(o)){h("Aborting because element has been uninstalled");return}if(!D()){h("Aborting because element container has not been initialized");return}Me(o,I,K)}),se&&q&&s.add(2,function(){if(!n(o)){h("Aborting because element has been uninstalled");return}if(!D()){h("Aborting because element container has not been initialized");return}q()})}function D(){return!!n(o).container}function G(){function q(){return n(o).lastNotifiedWidth===void 0}h("notifyListenersIfNeeded invoked");var I=n(o);if(q()&&I.lastWidth===I.startSize.width&&I.lastHeight===I.startSize.height)return h("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(I.lastWidth===I.lastNotifiedWidth&&I.lastHeight===I.lastNotifiedHeight)return h("Not notifying: Size already notified");h("Current size not notified, notifying..."),I.lastNotifiedWidth=I.lastWidth,I.lastNotifiedHeight=I.lastHeight,go(n(o).listeners,function(K){K(o)})}function oe(){if(h("startanimation triggered."),j(o)){h("Ignoring since element is still unrendered...");return}h("Element rendered.");var q=_(o),I=k(o);(q.scrollLeft===0||q.scrollTop===0||I.scrollLeft===0||I.scrollTop===0)&&(h("Scrollbars out of sync. Updating detector elements..."),T(G))}function le(){if(h("Scroll detected."),j(o)){h("Scroll event fired while unrendered. Ignoring...");return}T(G)}if(h("registerListenersAndPositionElements invoked."),!n(o)){h("Aborting because element has been uninstalled");return}n(o).onRendered=oe,n(o).onExpand=le,n(o).onShrink=le;var ce=n(o).style;p(o,ce.width,ce.height)}function _t(){if(h("finalizeDomMutation invoked."),!n(o)){h("Aborting because element has been uninstalled");return}var p=n(o).style;z(o,p.width,p.height),Me(o,p.width,p.height)}function mt(){A(o)}function Re(){h("Installing..."),d(),u(),s.add(0,g),s.add(1,vt),s.add(2,gt),s.add(3,_t),s.add(4,mt)}h("Making detectable..."),F(o)?(h("Element is detached"),Ae(),h("Waiting until element is attached..."),n(o).onRendered=function(){h("Element is now attached"),Re()}):Re()}function M(f){var o=n(f);!o||(o.onExpandScroll&&m(_(f),"scroll",o.onExpandScroll),o.onShrinkScroll&&m(k(f),"scroll",o.onShrinkScroll),o.onAnimationStart&&m(o.container,"animationstart",o.onAnimationStart),o.container&&f.removeChild(o.container))}return{makeDetectable:x,addListener:S,uninstall:M,initDocument:v}},pe=Oe.exports.forEach,mo=oo,wo=so,bo=ro,yo=io,So=ao,Ve=Te.exports,Co=uo,ee=po,ko=vo,xo=_o;function Ke(e){return Array.isArray(e)||e.length!==void 0}function Ge(e){if(Array.isArray(e))return e;var t=[];return pe(e,function(s){t.push(s)}),t}function Ye(e){return e&&e.nodeType===1}var Lo=function(e){e=e||{};var t;if(e.idHandler)t={get:function(x){return e.idHandler.get(x,!0)},set:e.idHandler.set};else{var s=bo(),n=yo({idGenerator:s,stateHandler:ee});t=n}var c=e.reporter;if(!c){var l=c===!1;c=So(l)}var i=te(e,"batchProcessor",Co({reporter:c})),r={};r.callOnAdd=!!te(e,"callOnAdd",!0),r.debug=!!te(e,"debug",!1);var v=wo(t),a=mo({stateHandler:ee}),b,C=te(e,"strategy","object"),w=te(e,"important",!1),y={reporter:c,batchProcessor:i,stateHandler:ee,idHandler:t,important:w};if(C==="scroll"&&(Ve.isLegacyOpera()?(c.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),C="object"):Ve.isIE(9)&&(c.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),C="object")),C==="scroll")b=xo(y);else if(C==="object")b=ko(y);else throw new Error("Invalid strategy name: "+C);var m={};function _(x,M,f){function o(u){var d=v.get(u);pe(d,function(z){z(u)})}function A(u,d,g){v.add(d,g),u&&g(d)}if(f||(f=M,M=x,x={}),!M)throw new Error("At least one element required.");if(!f)throw new Error("Listener required.");if(Ye(M))M=[M];else if(Ke(M))M=Ge(M);else return c.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var h=0,F=te(x,"callOnAdd",r.callOnAdd),j=te(x,"onReady",function(){}),R=te(x,"debug",r.debug);pe(M,function(d){ee.getState(d)||(ee.initState(d),t.set(d));var g=t.get(d);if(R&&c.log("Attaching listener to element",g,d),!a.isDetectable(d)){if(R&&c.log(g,"Not detectable."),a.isBusy(d)){R&&c.log(g,"System busy making it detectable"),A(F,d,f),m[g]=m[g]||[],m[g].push(function(){h++,h===M.length&&j()});return}return R&&c.log(g,"Making detectable..."),a.markBusy(d,!0),b.makeDetectable({debug:R,important:w},d,function(U){if(R&&c.log(g,"onElementDetectable"),ee.getState(U)){a.markAsDetectable(U),a.markBusy(U,!1),b.addListener(U,o),A(F,U,f);var Y=ee.getState(U);if(Y&&Y.startSize){var ae=U.offsetWidth,ge=U.offsetHeight;(Y.startSize.width!==ae||Y.startSize.height!==ge)&&o(U)}m[g]&&pe(m[g],function(_e){_e()})}else R&&c.log(g,"Element uninstalled before being detectable.");delete m[g],h++,h===M.length&&j()})}R&&c.log(g,"Already detecable, adding listener."),A(F,d,f),h++}),h===M.length&&j()}function k(x){if(!x)return c.error("At least one element is required.");if(Ye(x))x=[x];else if(Ke(x))x=Ge(x);else return c.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");pe(x,function(M){v.removeAllListeners(M),b.uninstall(M),ee.cleanState(M)})}function S(x){b.initDocument&&b.initDocument(x)}return{listenTo:_,removeListener:v.removeListener,removeAllListeners:v.removeAllListeners,uninstall:k,initDocument:S}};function te(e,t,s){var n=e[t];return n==null&&s!==void 0?s:n}const Po=Lo,Eo=$e({id:"system-project-setting",state:()=>({isCollapsed:!1})}),$o=N({name:"TabsView",components:{DownOutlined:Pt,CloseOutlined:je,LeftOutlined:Jt,RightOutlined:bn},props:{isCollapsed:{type:Boolean}},setup(e){Pe();const t=ve(),s=ke();Eo(fe);const n=to(fe),c=Ze(fe),l=W(),i=Z(()=>n.tabs),r=()=>{const{fullPath:u,hash:d,meta:g,name:z,params:U,path:Y,query:ae}=t;return{fullPath:u,hash:d,meta:g,name:z,params:U,path:Y,query:ae}};(()=>{let u=[];try{const g=st.get("SYSTEM_TABS");g?u=JSON.parse(g):u=[r()]}catch{u=[r()]}const d=s.getRoutes();for(const g of u){const z=d.find(U=>U.path===g.path);z&&(g.meta=z.meta||g.meta,g.name=z.name||g.name)}n.initTabs(u)})();const a=W(t.fullPath),b=Z(()=>{let u=0;for(const d of i.value){if(d.fullPath===a.value)return u;u++}return-1}),C=["Login","Redirect","Error404"],w=u=>{const{fullPath:d}=u;d!==t.fullPath&&(a.value=d,s.push({path:d}),console.log("go tab"))},y=u=>{const{fullPath:d}=u,g=i.value.find(z=>z.fullPath==d);h(g),console.log("close")},m=Z(()=>{const u=Ce(i).length<=1;return[{label:"Refresh Current",key:"REFRESH_CURRENT",disabled:!1,icon:be(it)},{label:"Close Current",key:"CLOSE_CURRENT",disabled:u,icon:be(je)},{label:"Close Others",key:"CLOSE_OTHERS",disabled:u,icon:be(Ht)},{label:"Close All",key:"CLOSE_ALL",disabled:u,icon:be(hn)}]}),_=W(!1),k=()=>{!l.value||(_.value=l.value.offsetWidth<l.value.scrollWidth)},S=()=>{if(!l.value)return;let u=l.value.querySelectorAll(".system-tabs__tabs__scroll__item-select")||[];u.length>0&&u[0].scrollIntoView&&u[0].scrollIntoView()},x=()=>{const u=l.value.offsetWidth,d=l.value.scrollLeft;if(!d)return;const g=d>u?d-u:0;f(g,(g-d)/20)},M=()=>{const u=l.value.offsetWidth,d=l.value.scrollWidth,g=l.value.scrollLeft;if(d-g<=u)return;const z=d-g>u*2?g+u:d-u;f(z,(z-g)/20)},f=(u,d)=>{const g=l.value.scrollLeft,z=d>0&&g+d>=u||d<0&&g+d<=u?u:g+d;if(l.value.scrollTo(z,0),z!==u)return window.requestAnimationFrame(()=>f(u,d))},o=()=>{var u,d;if(t.meta.keepAlive){const g=(d=(u=s.currentRoute.value.matched.find(z=>z.name==t.name))==null?void 0:u.components)==null?void 0:d.default.name;g&&(c.keepAliveComponents=c.keepAliveComponents.filter(z=>z!=g))}},A=()=>{o(),s.push({path:"/redirect"+Ce(t).fullPath})},h=u=>{if(!(i.value.length<=1)){if(o(),n.closeCurrentTab(u),a.value===u.fullPath){const d=i.value[i.value.length-1];a.value=d.fullPath,s.push(d)}k(),S()}},F=()=>{n.closeOtherTabs(t),a.value=t.fullPath,s.replace(t.fullPath),k(),S()},j=()=>{localStorage.removeItem("routes"),n.closeAllTabs(),s.replace("/"),k(),S()},R=u=>{switch(u){case"REFRESH_CURRENT":A();break;case"CLOSE_CURRENT":h(t);break;case"CLOSE_OTHERS":F();break;case"CLOSE_ALL":j();break}};return Le(()=>{Po().listenTo(l.value,()=>{k(),S()})}),tt(()=>t.fullPath,u=>{C.includes(t.name)||(a.value=u,n.addTabs(r()),k(),S())},{immediate:!0}),{tabsScrollRef:l,tabs:i,selectPath:a,selectIndex:b,tabsMenus:m,isTabsScrollable:_,onGoTab:w,onCloseTab:y,onPrevTabsPage:x,onNextTabsPage:M,onTabMenuClick:R}}});const Oo={class:"system-tabs"},To={class:"system-tabs__tabs"},zo={ref:"tabsScrollRef",class:"system-tabs__tabs__scroll"},Mo=["id"],Ao=["onClick"],Ro={class:"system-tabs__menu"},Io={class:"system-tabs__menu__button"};function Do(e,t,s,n,c,l){const i=P("LeftOutlined"),r=P("n-icon"),v=P("CloseOutlined"),a=P("RightOutlined"),b=P("DownOutlined"),C=P("n-dropdown");return E(),H("div",Oo,[O("div",To,[e.isTabsScrollable?(E(),H("span",{key:0,class:"system-tabs__tabs__pager",onClick:t[0]||(t[0]=(...w)=>e.onPrevTabsPage&&e.onPrevTabsPage(...w))},[L(r,{size:"16",color:"#515a6e"},{default:$(()=>[L(i)]),_:1})])):ye("",!0),O("div",zo,[(E(!0),H(Ee,null,rt(e.tabs,(w,y)=>{var m;return E(),H("div",{key:y,id:w.fullPath,class:Je(["system-tabs__tabs__scroll__item",e.selectIndex===y?"system-tabs__tabs__scroll__item-select":"system-tabs__tabs__scroll__item-normal"])},[O("span",{onClick:Ne(_=>e.onGoTab(w),["stop"])},ne(((m=w.meta)==null?void 0:m.title)||"??"),9,Ao),L(r,{size:"14",onClick:Ne(_=>e.onCloseTab(w),["stop"])},{default:$(()=>[e.tabs.length>1?(E(),V(v,{key:0})):ye("",!0)]),_:2},1032,["onClick"])],10,Mo)}),128))],512),e.isTabsScrollable?(E(),H("span",{key:1,class:"system-tabs__tabs__pager",onClick:t[1]||(t[1]=(...w)=>e.onNextTabsPage&&e.onNextTabsPage(...w))},[L(r,{size:"16",color:"#515a6e"},{default:$(()=>[L(a)]),_:1})])):ye("",!0)]),O("div",Ro,[L(C,{trigger:"hover",onSelect:e.onTabMenuClick,placement:"bottom-end",options:e.tabsMenus},{default:$(()=>[O("div",Io,[L(r,{size:"16",color:"#515a6e"},{default:$(()=>[L(b)]),_:1})])]),_:1},8,["onSelect","options"])])])}const Ho=ie($o,[["render",Do],["__scopeId","data-v-46169e06"]]),Fo={id:"id",children:"children",pid:"pid"},No=e=>Object.assign({},Fo,e);function Bo(e,t,s={}){s=No(s);const n=s.children;function c(l){return l.map(i=>({...i})).filter(i=>(i[n]=i[n]&&c(i[n]),t(i)||i[n]&&i[n].length))}return c(e)}const Uo=$e({id:"system-async-route",state:()=>({menus:[],routers:Be,addRouters:[],keepAliveComponents:[],isDynamicAddedRoute:!1}),getters:{getMenus(){return this.menus},getIsDynamicAddedRoute(){return this.isDynamicAddedRoute}},actions:{getRouters(){return Et(this.addRouters)},setDynamicAddedRoute(e){this.isDynamicAddedRoute=e},setRouters(e){this.addRouters=e,this.routers=Be.concat(e)},setMenus(e){this.menus=e},setKeepAliveComponents(e){this.keepAliveComponents=e},async generateRoutes(e){let t=[];const s=e.permissions||[],n=c=>{const{meta:l}=c,{permissions:i}=l||{};return i?s.some(r=>i.includes(r.value)):!0};try{t=Bo($t,n)}catch(c){console.log(c)}return[]}}}),jo=N({name:"system-workspace",props:{notNeedKey:{type:Boolean,default:!1},animate:{type:Boolean,default:!0}},setup(){ve();const e=Uo(fe);return{keepAliveComponents:Z(()=>e.keepAliveComponents)}}});function Wo(e,t,s,n,c,l){const i=P("RouterView");return E(),V(i,null,{default:$(({Component:r,route:v})=>[e.keepAliveComponents?(E(),V(Ot,{key:0,include:e.keepAliveComponents},[(E(),V(Ue(r),{key:v.fullPath}))],1032,["include"])):(E(),V(Ue(r),{key:v.fullPath}))]),_:1})}const qo=ie(jo,[["render",Wo]]),Vo=N({name:"system-layout",components:{SystemLogo:En,SystemMenu:Mn,SystemHead:Zn,SystemTabs:Ho,SystemWorkspace:qo},props:{},setup(){const e=W(!1),t=()=>{const s=document.body.clientWidth;e.value=s<=950};return Le(()=>{window.addEventListener("resize",t)}),{isCollapsed:e}}});function Ko(e,t,s,n,c,l){const i=P("system-logo"),r=P("system-menu"),v=P("n-layout-sider"),a=P("system-head"),b=P("n-layout-header"),C=P("system-workspace"),w=P("n-layout-content"),y=P("n-layout");return E(),V(y,{class:"system-layout",position:"absolute","has-sider":""},{default:$(()=>[L(v,{class:"system-layout__left",onCollapse:t[0]||(t[0]=m=>e.isCollapsed=!0),onExpand:t[1]||(t[1]=m=>e.isCollapsed=!1),"collapse-mode":"width",position:"absolute",collapsed:e.isCollapsed,"collapsed-width":64,width:180,"native-scrollbar":!1,inverted:!0},{default:$(()=>[L(i,{isCollapsed:e.isCollapsed},null,8,["isCollapsed"]),L(r)]),_:1},8,["collapsed"]),L(y,{class:"system-layout__right",inverted:!1},{default:$(()=>[L(b,{style:{"z-index":"999"},inverted:!1,position:"absolute"},{default:$(()=>[L(a,{isCollapsed:e.isCollapsed,"onUpdate:isCollapsed":t[2]||(t[2]=m=>e.isCollapsed=m)},null,8,["isCollapsed"])]),_:1}),L(w,{class:"system-layout__right__content","native-scrollbar":!0,position:"absolute"},{default:$(()=>[L(C)]),_:1})]),_:1})]),_:1})}const Jo=ie(Vo,[["render",Ko],["__scopeId","data-v-ff62d3ef"]]);export{Jo as default};
