import{d as ve,m as fe,p as me,r as l,q as g,f as W,x as E,j as d,o as X,c as ye,a as pe,A,i as L,R as he,y as a,z as r,_ as Le,l as Qe,k as Je,B as Ve,T as Ye}from"./index.87770df0.js";const He={class:"view"},We={class:"head-info"},Xe=ve({__name:"items",setup(_e,{expose:C}){fe();const b=me(),m=l({});g(()=>b.getUserInfo.role),g(()=>b.getUserInfo.lob),g(()=>b.getUserInfo.id),C({setup:async(u,s)=>{m.value=u,s===1?p.checkListId=u.checkListId1:s===2?p.checkListId=u.checkListId2:s===3?p.checkListId=u.checkListId3:s===10?p.checkListId=u.checkListId10:s===11&&(p.checkListId=u.checkListId11),p.type=s,s==1?n.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"IF CTQ",key:"ifCtq",width:100,valueFormator:v=>v?"Y":"N"},{title:"Measurement Equipment",key:"measurementEquipment",width:200},{title:"Characteristic (Check item)",key:"checkItem",width:400},{title:"LSL",key:"LSL",width:200},{title:"USL",key:"USL",width:200},{title:"LCL (optional)",key:"LCL",width:200},{title:"UCL (optional)",key:"UCL",width:200},{title:"Result (Record check result)",key:"checkResult",width:400},{title:"Sample Unit",key:"sampleUnit",width:200},{title:"Sample Size",key:"sampleSize",width:400},{title:"Frenquency/Basis",key:"frenquencyBasis",width:400},{title:"Control Type",key:"controlType",width:400},{title:"Control Method",key:"controlMethod",width:400},{title:"Control Criteria",key:"controlCriteria",width:400},{title:"Response plan",key:"responsePlan",width:400},{title:"SOP-NO.",key:"sopNo",width:400},{title:"Result (Verify Vendors execution)OK/NG",key:"result",width:200}]:s==2?n.value=[{title:"SN",key:"sn",width:60},{title:"Area",key:"area",width:200},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"Check Items",key:"checkItems",width:400},{title:"Sampling Size",key:"samplingSize",width:400},{title:"Looking For",key:"lookingFor",width:600},{title:"Records Findings",key:"recordsFindings",width:400},{title:"Result",key:"result",width:400}]:s==3?n.value=[{title:"SN",key:"sn",width:60},{title:"Project",key:"project",width:200},{title:"Test Item",key:"testItem",width:400},{title:"Test Condition/Parameter",key:"testConditionParameter",width:400},{title:"Equipment",key:"equipment",width:400},{title:"Fixture (Y/N)",key:"fixtureYN",width:200},{title:"Sample Orientation",key:"sampleOrientation",width:200},{title:"Recovery Time",key:"recoveryTime",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Duration",key:"duration",width:200},{title:"Read Point",key:"readPoint",width:200},{title:"Pass/Fail Criteria",key:"passFailCriteria",width:400},{title:"OCAP",key:"OCAP",width:400},{title:"Result",key:"result",width:200}]:s==10?n.value=[{title:"SN",key:"sn",width:60},{title:"Class",key:"theClass",width:60},{title:"Line&Shift",key:"lineShift",width:200},{title:"Site",key:"site",width:200},{title:"Projects",key:"projects",width:200},{title:"Item",key:"item",width:200},{title:"Glue",key:"glue",width:400},{title:"Unit",key:"unit",width:100},{title:"USL",key:"USL",width:100},{title:"LSL",key:"LSL",width:100}]:s==11&&(n.value=[{title:"SN",key:"sn",width:60},{title:"Class",key:"theClass",width:60},{title:"Line&Shift",key:"lineShift",width:200},{title:"Site",key:"site",width:200},{title:"Projects",key:"projects",width:200},{title:"Item",key:"item",width:200},{title:"Unit",key:"unit",width:100},{title:"LSL",key:"LSL",width:100}]),q()}});const M=[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"},{value:10,label:"Glue"},{value:11,label:"Destructive"}],n=l([]),B={actions:[]};l({});const j=l(1),R=l(15),p=W({}),O=l({total:0,list:[]}),w=l(!0),q=async()=>{w.value=!0;try{const u=await E("/get_check_list_items_page",{pageNum:j.value,pageSize:R.value,...p});O.value=u}finally{w.value=!1}},i=(u,s)=>{},_=async(u,s)=>{};return(u,s)=>{const v=d("AAPageList"),K=d("n-card");return X(),ye("div",He,[pe("div",We,[pe("p",null,A(m.value.lob)+" / "+A(m.value.site)+" / "+A(m.value.productLine)+" / "+A(m.value.project)+" / "+A(m.value.part)+" / "+A(L(he)(p.type,M)),1)]),a(K,null,{default:r(()=>[a(v,{isLoading:w.value,pageNum:j.value,"onUpdate:pageNum":s[0]||(s[0]=y=>j.value=y),pageSize:R.value,"onUpdate:pageSize":s[1]||(s[1]=y=>R.value=y),columns:n.value,actions:B,dataSource:O.value,onAction:i,onChange:_,onReload:q},null,8,["isLoading","pageNum","pageSize","columns","dataSource"])]),_:1})])}}});const Ze=Le(Xe,[["__scopeId","data-v-247812ab"]]),et={class:"page"},tt=ve({__name:"index",setup(_e){const C=fe();Qe();const b=me(),m=[{value:"mqa",label:"MQA"},{value:"accessory",label:"Accessory"},{value:"display",label:"Display"}],M=[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"},{value:10,label:"Glue"},{value:11,label:"Destructive"}],n=g(()=>b.getUserInfo.role),B=g(()=>b.getUserInfo.lob),j=[{title:"Site Project Tree",key:"name",align:"left",width:500},{title:"Check List",key:"checkListTotal",width:200,valueFormator:(t,o)=>{if(o.part){const c=[];return o.checkListId1&&c.push("Module"),o.checkListId2&&c.push("Enclosure"),o.checkListId3&&c.push("ORT"),o.checkListId10&&c.push("Glue"),o.checkListId11&&c.push("Destructive"),c.join(" / ")}else return`${o.checkListUploaded} / ${o.checkListTotal}`}}],R=t=>t.id,p={minWidth:"260px",actions:[{title:"Preview Module",type:"default",key:"preview1",isShow:t=>t.part!=null&&t.checkListId1!=null},{title:"Preview Enclosure",type:"default",key:"preview2",isShow:t=>t.part!=null&&t.checkListId2!=null},{title:"Preview ORT",type:"default",key:"preview3",isShow:t=>t.part!=null&&t.checkListId3!=null},{title:"Preview Glue",type:"default",key:"preview10",isShow:t=>t.part!=null&&t.checkListId10!=null},{title:"Preview Destructive",type:"default",key:"preview11",isShow:t=>t.part!=null&&t.checkListId11!=null},{title:"Upload",type:"info",key:"update",isShow:t=>n.value==="super_admin"||n.value==="admin"||n.value==="lob_dri"}],more:[]},O=l({}),w=l(1),q=l(15),i=W({team:"mqa"}),_=async t=>(t.team=e.team||i.team,await E("/get_level_lines",t)),u=l([]),s=l(!1),v=l(!1),K=async()=>{if(!v.value){s.value=!0;try{u.value=(await _({})).map(t=>({processType:t.processType,value:t.lob,label:t.lob})),v.value=!0}finally{s.value=!1}}},y=()=>{(n.value==="super_admin"||n.value==="admin")&&(u.value=[],v.value=!1,i.lob=null),Z.value=[],ee.value=!1,i.site=null,te.value=[],le.value=!1,i.productLine=null,ae.value=[],ie.value=!1,i.project=null,se.value=[],oe.value=!1,i.part=null},ke=()=>{Z.value=[],ee.value=!1,i.site=null,te.value=[],le.value=!1,i.productLine=null,ae.value=[],ie.value=!1,i.project=null,se.value=[],oe.value=!1,i.part=null},Z=l([]);l(!1);const ee=l(!1),te=l([]);l(!1);const le=l(!1),ae=l([]);l(!1);const ie=l(!1),se=l([]);l(!1);const oe=l(!1),ne=l([]),x=l(!0),ge=()=>{y(),i.team="mqa",w.value=1},I=async()=>{x.value=!0;try{const t=await E("/get_lines_tree",{pageNum:w.value,pageSize:q.value,...i});ne.value=t}finally{x.value=!1}},be=(t,o)=>{t==="preview1"?D(o,1):t==="preview2"?D(o,2):t==="preview3"?D(o,3):t==="preview10"?D(o,10):t==="preview11"?D(o,11):t==="update"?Ue(o):t==="delete"&&Ee(o)},T=l(null),G=l(!1),e=W({}),Q=g(()=>e.lob&&e.site&&e.productLine&&e.project&&e.part&&e.type!=null?e.team==="accessory"?`${e.lob}_${e.site}_${e.productLine}_${e.project}_${e.part}.json`:`${e.lob}_${e.site}_${e.productLine}_${e.project}_${e.part}_${he(e.type,M)}.json`:null),N=l(0),we=g(()=>e.team==="accessory"?e.project==="Glue"?[{value:10,label:"Glue"}]:[{value:11,label:"Destructive"}]:N.value===1?[{value:1,label:"Module"},{value:3,label:"ORT"}]:N.value===2?[{value:2,label:"Enclosure"}]:N.value===3?[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"}]:[]),ue=()=>{u.value=[],v.value=!1,e.lob=null,$.value=[],z.value=!1,e.site=null,F.value=[],U.value=!1,e.productLine=null,S.value=[],P.value=!1,e.project=null,h.value=[],k.value=!1,e.part=null},Se=()=>{$.value=[],z.value=!1,e.site=null,F.value=[],U.value=!1,e.productLine=null,S.value=[],P.value=!1,e.project=null,h.value=[],k.value=!1,e.part=null,e.type=null},$=l([]),J=l(!1),z=l(!1),Pe=async()=>{if(!z.value){J.value=!0;try{$.value=(await _({lob:e.lob})).map(t=>({processType:t.processType,value:t.site,label:t.site})),z.value=!0}finally{J.value=!1}}},Ae=()=>{F.value=[],U.value=!1,e.productLine=null,S.value=[],P.value=!1,e.project=null,h.value=[],k.value=!1,e.part=null},F=l([]),V=l(!1),U=l(!1),Ce=async()=>{if(!U.value){V.value=!0;try{F.value=(await _({lob:e.lob,site:e.site})).map(t=>({processType:t.processType,value:t.productLine,label:t.productLine})),U.value=!0}finally{V.value=!1}}},je=()=>{S.value=[],P.value=!1,e.project=null,h.value=[],k.value=!1,e.part=null},S=l([]),Y=l(!1),P=l(!1),Re=async()=>{if(!P.value){Y.value=!0;try{S.value=(await _({lob:e.lob,site:e.site,productLine:e.productLine})).map(t=>({processType:t.processType,value:t.project,label:t.project})),P.value=!0}finally{Y.value=!1}}},Ie=()=>{h.value=[],k.value=!1,e.part=null},h=l([]),H=l(!1),k=l(!1),Te=async()=>{if(!k.value){H.value=!0;try{h.value=(await _({lob:e.lob,site:e.site,productLine:e.productLine,project:e.project})).map(t=>({processType:t.processType,value:t.part,label:t.part})),k.value=!0}finally{H.value=!1}}},Ne=()=>{if(e.part)for(const t of h.value)t.value===e.part&&(N.value=t.processType)},Fe=async()=>{e.team=i.team,e.lob=i.lob,e.site=i.site,e.productLine=i.productLine,e.project=i.project,e.part=i.part,T.value.show()},Ue=t=>{N.value=t.auditType,e.team=t.team,e.lob=t.lob,e.site=t.site,e.productLine=t.productLine,e.project=t.project,e.part=t.part,e.type=void 0,T.value.show()},De=async()=>{G.value=!0;try{await E("/upload_check_list",e),C.success("Uploaded"),T.value.close(),I(),y(),ue()}finally{G.value=!1}},Ee=async t=>{C.loading("Deleting"),await E("/delete_check_list",{id:t.id}),C.success("Deleted"),T.value.close(),I(),y(),ue()};if(n.value!=="super_admin"&&n.value!=="admin"){const t=B.value||"";u.value=[{value:t,label:t}],v.value=!0,i.lob=t,ke()}const re=l(),ce=l(),D=async(t,o)=>{re.value.show(),await Ye(),ce.value.setup(t,o)};return(t,o)=>{const c=d("AAFormSelect"),f=d("n-grid-item"),Oe=d("AAFormQueryButtons"),de=d("n-grid"),qe=d("AAForm"),xe=d("AAListButtonAdd"),$e=d("AAListHandlers"),ze=d("AAPageList"),Me=d("n-card"),Be=d("AAFormSelectJson"),Ke=d("AAFormDialog"),Ge=d("AADialog");return X(),ye("div",et,[a(Me,null,{default:r(()=>[L(n)==="super_admin"?(X(),Je(qe,{key:0,labelPlacement:"left",isLoading:x.value,form:i,rules:O.value},{default:r(()=>[a(de,{cols:"1 400:2 800:3 1000:4"},{default:r(()=>[a(f,null,{default:r(()=>[a(c,{label:"Team",clearable:!1,form:i,formKey:"team",options:m,onChange:y},null,8,["form"])]),_:1}),a(f,null,{default:r(()=>[a(Oe,{onQuery:I,onReset:ge})]),_:1})]),_:1})]),_:1},8,["isLoading","form","rules"])):Ve("",!0),a($e,null,{default:r(()=>[a(xe,{title:"Upload",onClick:Fe})]),_:1}),a(ze,{isPaged:!1,isLoading:x.value,columns:j,actions:p,dataSource:ne.value,childrenKey:"sub",rowKey:R,onReady:I,onAction:be,onReload:I},null,8,["isLoading","dataSource"])]),_:1}),a(Ke,{ref_key:"editDialogRef",ref:T,title:"Update Check List",width:"320px",isLoading:G.value,form:e,onConfirm:De},{default:r(()=>[a(de,{cols:"1"},{default:r(()=>[a(f,null,{default:r(()=>[a(c,{disabled:L(n)!=="admin"&&L(n)!=="super_admin",isRequired:!0,label:"LOB",form:e,formKey:"lob",options:u.value,loading:s.value,onChange:Se,onShow:K},null,8,["disabled","form","options","loading"])]),_:1}),a(f,null,{default:r(()=>[a(c,{disabled:!e.lob,isRequired:!0,label:"Site",form:e,formKey:"site",options:$.value,loading:J.value,onChange:Ae,onShow:Pe},null,8,["disabled","form","options","loading"])]),_:1}),a(f,null,{default:r(()=>[a(c,{disabled:!e.site,isRequired:!0,label:"Product Line",form:e,formKey:"productLine",options:F.value,loading:V.value,onChange:je,onShow:Ce},null,8,["disabled","form","options","loading"])]),_:1}),a(f,null,{default:r(()=>[a(c,{disabled:!e.productLine,isRequired:!0,label:"Project",form:e,formKey:"project",options:S.value,loading:Y.value,onChange:Ie,onShow:Re},null,8,["disabled","form","options","loading"])]),_:1}),a(f,null,{default:r(()=>[a(c,{disabled:!e.project,isRequired:!0,label:"Part",form:e,formKey:"part",options:h.value,loading:H.value,onShow:Te,onChange:Ne},null,8,["disabled","form","options","loading"])]),_:1}),a(f,null,{default:r(()=>[a(c,{isRequired:!0,label:"Type",form:e,formKey:"type",options:L(we)},null,8,["form","options"])]),_:1}),a(f,null,{default:r(()=>[a(Be,{disabled:!e.part,isRequired:!0,label:"JSON Spec File",form:e,formKey:"rawJson",validateName:L(Q),tips:"The JSON file must match the line selected"+(L(Q)?", and with name '"+L(Q)+"'":"")},null,8,["disabled","form","validateName","tips"])]),_:1})]),_:1})]),_:1},8,["isLoading","form"]),a(Ge,{ref_key:"previewDialogRef",ref:re,title:"Preview"},{default:r(()=>[a(Ze,{ref_key:"previewRef",ref:ce},null,512)]),_:1},512)])}}});const at=Le(tt,[["__scopeId","data-v-070f4710"]]);export{at as default};
