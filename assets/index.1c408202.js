import{d as B,m as J,p as K,r as s,q as p,f as x,x as I,j as a,o as Q,c as G,a as f,A as w,i as C,R as Y,y as o,z as u,_ as H,l as ne,T as ce}from"./index.10da59d7.js";const re={class:"view"},de={class:"head-info"},ue=B({__name:"items",setup(V,{expose:g}){J();const m=K(),_=s({});p(()=>m.getUserInfo.team),p(()=>m.getUserInfo.role),p(()=>m.getUserInfo.lob),p(()=>m.getUserInfo.id),g({setup:async(d,l)=>{_.value=d,l==="Module"?n.checkListId=d.checkListId_Module:l==="Enclosure"?n.checkListId=d.checkListId_Enclosure:l==="ORT"&&(n.checkListId=d.checkListId_ORT),n.type=l,l=="Module"?y.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"IF CTQ",key:"ifCtq",width:100,valueFormator:c=>c?"Y":"N"},{title:"Measurement Equipment",key:"measurementEquipment",width:200},{title:"Characteristic (Check item)",key:"checkItem",width:400},{title:"LSL",key:"LSL",width:200},{title:"USL",key:"USL",width:200},{title:"LCL (optional)",key:"LCL",width:200},{title:"UCL (optional)",key:"UCL",width:200},{title:"Sample Unit",key:"sampleUnit",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Audit Sample Size",key:"auditSampleSize",width:200},{title:"Frenquency/Basis",key:"frenquencyBasis",width:400},{title:"Control Type",key:"controlType",width:400},{title:"Control Method",key:"controlMethod",width:400},{title:"Control Criteria",key:"controlCriteria",width:400},{title:"Response plan",key:"responsePlan",width:400},{title:"SOP-NO.",key:"sopNo",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:c=>c?"TRUE":"FALSE"}]:l=="Enclosure"?y.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"Check Items",key:"checkItems",width:400},{title:"Sampling Size",key:"samplingSize",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:c=>c?"TRUE":"FALSE"}]:l=="ORT"&&(y.value=[{title:"SN",key:"sn",width:60},{title:"Project",key:"project",width:200},{title:"Test Item",key:"testItem",width:400},{title:"Test Condition/Parameter",key:"testConditionParameter",width:400},{title:"Equipment",key:"equipment",width:400},{title:"Fixture (Y/N)",key:"fixtureYN",width:200},{title:"Sample Orientation",key:"sampleOrientation",width:200},{title:"Recovery Time",key:"recoveryTime",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Sampling Freq.",key:"samplingFreq",width:200},{title:"Duration",key:"duration",width:200},{title:"Read Point",key:"readPoint",width:200},{title:"Pass/Fail Criteria",key:"passFailCriteria",width:400},{title:"OCAP",key:"OCAP",width:400},{title:"Result",key:"result",width:200}]),k()}});const E=[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"},{value:10,label:"Glue"},{value:11,label:"Destructive"}],y=s([]),O={actions:[]};s({});const S=s(1),A=s(15),n=x({}),h=s({total:0,list:[]}),v=s(!0),k=async()=>{v.value=!0;try{const d=await I("/get_check_list_items_page",{pageNum:S.value,pageSize:A.value,...n});h.value=d}finally{v.value=!1}},D=(d,l)=>{},R=async(d,l)=>{};return(d,l)=>{const c=a("AAPageList"),T=a("n-card");return Q(),G("div",re,[f("div",de,[f("p",null,w(_.value.lob)+" / "+w(_.value.site)+" / "+w(_.value.productLine)+" / "+w(_.value.project)+" / "+w(_.value.part)+" / "+w(C(Y)(n.type,E)),1)]),o(T,null,{default:u(()=>[o(c,{isLoading:v.value,pageNum:S.value,"onUpdate:pageNum":l[0]||(l[0]=e=>S.value=e),pageSize:A.value,"onUpdate:pageSize":l[1]||(l[1]=e=>A.value=e),columns:y.value,actions:O,dataSource:h.value,onAction:D,onChange:R,onReload:k},null,8,["isLoading","pageNum","pageSize","columns","dataSource"])]),_:1})])}}});const pe=H(ue,[["__scopeId","data-v-4425b04f"]]),me={class:"page"},_e=B({__name:"index",setup(V){const g=J();ne();const m=K(),_=[{value:"Module",label:"Module"},{value:"Enclosure",label:"Enclosure"},{value:"ORT",label:"ORT"}];p(()=>m.getUserInfo.team),p(()=>m.getUserInfo.role),p(()=>m.getUserInfo.lob);const E=[{title:"Site Project Tree",key:"name",align:"left",width:500},{title:"Check List",key:"checkListTotal",width:200,valueFormator:(t,i)=>{if(i.part){const r=[];return i.checkListId_Module&&r.push("Module"),i.checkListId_Enclosure&&r.push("Enclosure"),i.checkListId_ORT&&r.push("ORT"),r.join(" | ")}else return`${i.checkListUploaded} / ${i.checkListTotal}`}}],y=t=>t.id,O={width:"260px",actions:[{title:"Preview Module",type:"default",key:"previewModule",isShow:t=>t.part!=null&&t.checkListId_Module!=null},{title:"Preview Enclosure",type:"default",key:"previewEnclosure",isShow:t=>t.part!=null&&t.checkListId_Enclosure!=null},{title:"Preview ORT",type:"default",key:"previewORT",isShow:t=>t.part!=null&&t.checkListId_ORT!=null},{title:"Upload",type:"info",key:"update"}],more:[]};s({});const S=s(1),A=s(15),n=x({}),h=s([]),v=s(!0),k=async()=>{v.value=!0;try{const t=await I("/get_lines_tree",{pageNum:S.value,pageSize:A.value,...n});h.value=t}finally{v.value=!1}},D=(t,i)=>{t==="previewModule"?M(i,"Module"):t==="previewEnclosure"?M(i,"Enclosure"):t==="previewORT"?M(i,"ORT"):t==="update"?Z(i):t==="delete"&&te(i)},R=s(null),d=()=>{R.value.show()},l=t=>{function i(L){var U=L.lastIndexOf("/"),j=L.lastIndexOf("\\"),b=Math.max(U,j);return b<0?L:L.substring(b+1)}const r=document.createElement("a");r.download=i(t),r.style.display="none",r.href="https://usw2-mqasmartaudit-prod.apple.com/download_file?filePath="+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)},c=s(null),T=s(!1),e=x({}),F=p(()=>e.lob&&e.site&&e.productLine&&e.project&&e.part&&e.type!=null?`${e.lob}_${e.site}_${e.productLine}_${e.project}_${e.part}_${Y(e.type,_)}.json`:null),W=p(()=>e.auditType==="1"?[{value:"Module",label:"Module"},{value:"ORT",label:"ORT"}]:e.auditType==="2"?[{value:"Enclosure",label:"Enclosure"}]:e.auditType==="3"?[{value:"Enclosure",label:"Enclosure"},{value:"ORT",label:"ORT"}]:[]),X=async()=>{e.lob=n.lob,e.site=n.site,e.productLine=n.productLine,e.project=n.project,e.part=n.part,c.value.show()},Z=t=>{e.auditType=t.auditType,e.lob=t.lob,e.site=t.site,e.productLine=t.productLine,e.project=t.project,e.part=t.part,e.type=void 0,c.value.show()},ee=async()=>{T.value=!0;try{await I("/upload_check_list",e),g.success("Uploaded"),c.value.close(),k()}finally{T.value=!1}},te=async t=>{g.loading("Deleting"),await I("/delete_check_list",{id:t.id}),g.success("Deleted"),c.value.close(),k()},z=s(),$=s(),M=async(t,i)=>{z.value.show(),await ce(),$.value.setup(t,i)};return(t,i)=>{const r=a("AAListButtonAdd"),L=a("AAListButtonDownload"),U=a("AAListHandlers"),j=a("AAPageList"),b=a("n-card"),q=a("AADialog"),ie=a("AAFormSiteProject"),N=a("n-grid-item"),le=a("AAFormSelect"),oe=a("AAFormSelectJson"),se=a("n-grid"),ae=a("AAFormDialog");return Q(),G("div",me,[o(b,null,{default:u(()=>[o(U,null,{default:u(()=>[o(r,{title:"Upload",onClick:X}),o(L,{title:"Check List Templates",onClick:d})]),_:1}),o(j,{isPaged:!1,isLoading:v.value,columns:E,actions:O,dataSource:h.value,childrenKey:"sub",rowKey:y,onReady:k,onAction:D,onReload:k},null,8,["isLoading","dataSource"])]),_:1}),o(q,{ref_key:"templatesDialogRef",ref:R,title:"Check List Templates",width:"320px"},{default:u(()=>[f("div",{class:"download-link",onClick:i[0]||(i[0]=P=>l("files/Check_List_Template_Module.json"))},"Module Check List Template"),f("div",{class:"download-link",onClick:i[1]||(i[1]=P=>l("files/Check_List_Template_Enclosure.json"))},"Enclosure Check List Template"),f("div",{class:"download-link",onClick:i[2]||(i[2]=P=>l("files/Check_List_Template_ORT.json"))},"ORT Check List Template"),f("div",{class:"download-link",onClick:i[3]||(i[3]=P=>l("files/Check_List_Template_Glue.json"))},"Glue Check List Template"),f("div",{class:"download-link",onClick:i[4]||(i[4]=P=>l("files/Check_List_Template_Destructive.json"))},"Destructive Check List Template")]),_:1},512),o(ae,{ref_key:"editDialogRef",ref:c,title:"Upload Check List",width:"400px",isLoading:T.value,form:e,onConfirm:ee},{default:u(()=>[o(se,{cols:"1"},{default:u(()=>[o(N,null,{default:u(()=>[o(ie,{isRequired:!0,selectParent:!1,label:"Site Project",form:e,team:"MQA",siteProjects:h.value},null,8,["form","siteProjects"])]),_:1}),o(N,null,{default:u(()=>[o(le,{isRequired:!0,label:"Audit Type",form:e,formKey:"type",options:C(W)},null,8,["form","options"])]),_:1}),o(N,null,{default:u(()=>[o(oe,{disabled:!e.part||!e.type,isRequired:!0,label:"JSON Spec File",form:e,formKey:"rawJson",validateName:C(F),tips:"The JSON file must match the line selected"+(C(F)?", and with name '"+C(F)+"'":"")},null,8,["disabled","form","validateName","tips"])]),_:1})]),_:1})]),_:1},8,["isLoading","form"]),o(q,{ref_key:"previewDialogRef",ref:z,title:"Check List"},{default:u(()=>[o(pe,{ref_key:"previewRef",ref:$},null,512)]),_:1},512)])}}});const ke=H(_e,[["__scopeId","data-v-4ac2f00b"]]);export{ke as default};
