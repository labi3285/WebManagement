import{d as J,m as V,p as Y,r as o,q as h,f as q,x as U,j as n,o as N,c as H,a as _,A as g,i as f,R as W,y as l,z as d,_ as X,l as he,k as K,B as Q,T as ye}from"./index.87ee0968.js";const fe={class:"view"},_e={class:"head-info"},Le=J({__name:"items",setup(Z,{expose:A}){V();const y=Y(),v=o({});h(()=>y.getUserInfo.team),h(()=>y.getUserInfo.role),h(()=>y.getUserInfo.lob),h(()=>y.getUserInfo.id),A({setup:async(a,s)=>{v.value=a,s===1?p.checkListId=a.checkListId1:s===2?p.checkListId=a.checkListId2:s===3?p.checkListId=a.checkListId3:s===10?p.checkListId=a.checkListId10:s===11&&(p.checkListId=a.checkListId11),p.type=s,s==1?u.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"IF CTQ",key:"ifCtq",width:100,valueFormator:r=>r?"Y":"N"},{title:"Measurement Equipment",key:"measurementEquipment",width:200},{title:"Characteristic (Check item)",key:"checkItem",width:400},{title:"LSL",key:"LSL",width:200},{title:"USL",key:"USL",width:200},{title:"LCL (optional)",key:"LCL",width:200},{title:"UCL (optional)",key:"UCL",width:200},{title:"Result (Record check result)",key:"checkResult",width:400},{title:"Sample Unit",key:"sampleUnit",width:200},{title:"Sample Size",key:"sampleSize",width:400},{title:"Frenquency/Basis",key:"frenquencyBasis",width:400},{title:"Control Type",key:"controlType",width:400},{title:"Control Method",key:"controlMethod",width:400},{title:"Control Criteria",key:"controlCriteria",width:400},{title:"Response plan",key:"responsePlan",width:400},{title:"SOP-NO.",key:"sopNo",width:400},{title:"Result (Verify Vendors execution)OK/NG",key:"result",width:200},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:r=>r?"TRUE":"FALSE"}]:s==2?u.value=[{title:"SN",key:"sn",width:60},{title:"Area",key:"area",width:200},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"Check Items",key:"checkItems",width:400},{title:"Sampling Size",key:"samplingSize",width:400},{title:"Looking For",key:"lookingFor",width:600},{title:"Records Findings",key:"recordsFindings",width:400},{title:"Result",key:"result",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:r=>r?"TRUE":"FALSE"}]:s==3?u.value=[{title:"SN",key:"sn",width:60},{title:"Project",key:"project",width:200},{title:"Test Item",key:"testItem",width:400},{title:"Test Condition/Parameter",key:"testConditionParameter",width:400},{title:"Equipment",key:"equipment",width:400},{title:"Fixture (Y/N)",key:"fixtureYN",width:200},{title:"Sample Orientation",key:"sampleOrientation",width:200},{title:"Recovery Time",key:"recoveryTime",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Duration",key:"duration",width:200},{title:"Read Point",key:"readPoint",width:200},{title:"Pass/Fail Criteria",key:"passFailCriteria",width:400},{title:"OCAP",key:"OCAP",width:400},{title:"Result",key:"result",width:200}]:s==10?u.value=[{title:"SN",key:"sn",width:60},{title:"Class",key:"theClass",width:60},{title:"Line&Shift",key:"lineShift",width:200},{title:"Site",key:"site",width:200},{title:"Projects",key:"projects",width:200},{title:"Item",key:"item",width:200},{title:"Unit",key:"unit",width:100},{title:"USL",key:"USL",width:100},{title:"LSL",key:"LSL",width:100}]:s==11&&(u.value=[{title:"SN",key:"sn",width:60},{title:"Class",key:"theClass",width:60},{title:"Line&Shift",key:"lineShift",width:200},{title:"Site",key:"site",width:200},{title:"Projects",key:"projects",width:200},{title:"Item",key:"item",width:200},{title:"Unit",key:"unit",width:100},{title:"LSL",key:"LSL",width:100}]),D()}});const $=[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"},{value:10,label:"Glue"},{value:11,label:"Destructive"}],u=o([]),k={actions:[]};o({});const C=o(1),b=o(15),p=q({}),R=o({total:0,list:[]}),L=o(!0),D=async()=>{L.value=!0;try{const a=await U("/get_check_list_items_page",{pageNum:C.value,pageSize:b.value,...p});R.value=a}finally{L.value=!1}},c=(a,s)=>{},F=async(a,s)=>{};return(a,s)=>{const r=n("AAPageList"),x=n("n-card");return N(),H("div",fe,[_("div",_e,[_("p",null,g(v.value.lob)+" / "+g(v.value.site)+" / "+g(v.value.productLine)+" / "+g(v.value.project)+" / "+g(v.value.part)+" / "+g(f(W)(p.type,$)),1)]),l(x,null,{default:d(()=>[l(r,{isLoading:L.value,pageNum:C.value,"onUpdate:pageNum":s[0]||(s[0]=w=>C.value=w),pageSize:b.value,"onUpdate:pageSize":s[1]||(s[1]=w=>b.value=w),columns:u.value,actions:k,dataSource:R.value,onAction:c,onChange:F,onReload:D},null,8,["isLoading","pageNum","pageSize","columns","dataSource"])]),_:1})])}}});const we=X(Le,[["__scopeId","data-v-da9dd830"]]),Se={class:"page"},ge=J({__name:"index",setup(Z){const A=V();he();const y=Y(),v=[{value:"mqa",label:"MQA"},{value:"accessory",label:"Accessory"},{value:"display",label:"Display"},{value:"sip",label:"SIP"}],$=[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"},{value:10,label:"Glue"},{value:11,label:"Destructive"}],u=h(()=>y.getUserInfo.team),k=h(()=>y.getUserInfo.role);h(()=>y.getUserInfo.lob);const C=[{title:"Site Project Tree",key:"name",align:"left",width:500},{title:"Check List",key:"checkListTotal",width:200,valueFormator:(t,i)=>{if(i.part){const m=[];return i.checkListId1&&m.push("Module"),i.checkListId2&&m.push("Enclosure"),i.checkListId3&&m.push("ORT"),i.checkListId10&&m.push("Glue"),i.checkListId11&&m.push("Destructive"),m.join(" / ")}else return`${i.checkListUploaded} / ${i.checkListTotal}`}}],b=t=>t.id,p={width:"260px",actions:[{title:"Preview Module",type:"default",key:"preview1",isShow:t=>t.part!=null&&t.checkListId1!=null},{title:"Preview Enclosure",type:"default",key:"preview2",isShow:t=>t.part!=null&&t.checkListId2!=null},{title:"Preview ORT",type:"default",key:"preview3",isShow:t=>t.part!=null&&t.checkListId3!=null},{title:"Preview Glue",type:"default",key:"preview10",isShow:t=>t.part!=null&&t.checkListId10!=null},{title:"Preview Destructive",type:"default",key:"preview11",isShow:t=>t.part!=null&&t.checkListId11!=null},{title:"Upload",type:"info",key:"update",isShow:t=>k.value==="super_admin"||k.value==="admin"||k.value==="lob_dri"}],more:[]},R=o({}),L=o(1),D=o(15),c=q({});k.value==="super_admin"?c.team="mqa":c.team=u.value;const F=o([]),a=o(!0),s=()=>{k.value==="super_admin"?c.team="mqa":c.team=u.value,L.value=1},r=async()=>{a.value=!0;try{const t=await U("/get_lines_tree",{pageNum:L.value,pageSize:D.value,...c});F.value=t}finally{a.value=!1}},x=(t,i)=>{t==="preview1"?T(i,1):t==="preview2"?T(i,2):t==="preview3"?T(i,3):t==="preview10"?T(i,10):t==="preview11"?T(i,11):t==="update"?le(i):t==="delete"&&oe(i)},w=o(null),ee=()=>{w.value.show()},P=t=>{const i=document.createElement("a");i.download=t,i.style.display="none",i.href="http://localhost:8000/download_file?fileName="+t,document.body.appendChild(i),i.click(),document.body.removeChild(i)},I=o(null),E=o(!1),e=q({}),O=h(()=>e.lob&&e.site&&e.productLine&&e.project&&e.part&&e.type!=null?e.team==="accessory"?`${e.lob}_${e.site}_${e.productLine}_${e.project}_${e.part}.json`:`${e.lob}_${e.site}_${e.productLine}_${e.project}_${e.part}_${W(e.type,$)}.json`:null),te=h(()=>e.team==="accessory"?e.project==="Glue"?[{value:10,label:"Glue"}]:[{value:11,label:"Destructive"}]:e.auditType===1?[{value:1,label:"Module"},{value:3,label:"ORT"}]:e.auditType===2?[{value:2,label:"Enclosure"}]:e.auditType===3?[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"}]:[]),ie=async()=>{e.team=c.team||u.value,e.lob=c.lob,e.site=c.site,e.productLine=c.productLine,e.project=c.project,e.part=c.part,I.value.show()},le=t=>{e.auditType=t.auditType,e.team=t.team,e.lob=t.lob,e.site=t.site,e.productLine=t.productLine,e.project=t.project,e.part=t.part,e.type=void 0,I.value.show()},se=async()=>{E.value=!0;try{await U("/upload_check_list",e),A.success("Uploaded"),I.value.close(),r()}finally{E.value=!1}},oe=async t=>{A.loading("Deleting"),await U("/delete_check_list",{id:t.id}),A.success("Deleted"),I.value.close(),r()},z=o(),M=o(),T=async(t,i)=>{z.value.show(),await ye(),M.value.setup(t,i)};return(t,i)=>{const m=n("AAFormSelect"),S=n("n-grid-item"),ae=n("AAFormQueryButtons"),B=n("n-grid"),ne=n("AAForm"),ce=n("AAListButtonAdd"),de=n("AAListButtonDownload"),re=n("AAListHandlers"),ue=n("AAPageList"),pe=n("n-card"),G=n("AADialog"),me=n("AAFormSiteProject"),ve=n("AAFormSelectJson"),ke=n("AAFormDialog");return N(),H("div",Se,[l(pe,null,{default:d(()=>[f(k)==="super_admin"?(N(),K(ne,{key:0,labelPlacement:"left",isLoading:a.value,form:c,rules:R.value},{default:d(()=>[l(B,{cols:"1 400:2 800:3 1000:4"},{default:d(()=>[l(S,null,{default:d(()=>[l(m,{label:"Team",clearable:!1,form:c,formKey:"team",options:v},null,8,["form"])]),_:1}),l(S,null,{default:d(()=>[l(ae,{onQuery:r,onReset:s})]),_:1})]),_:1})]),_:1},8,["isLoading","form","rules"])):Q("",!0),l(re,null,{default:d(()=>[l(ce,{title:"Upload",onClick:ie}),l(de,{title:"Check List Templates",onClick:ee})]),_:1}),l(ue,{isPaged:!1,isLoading:a.value,columns:C,actions:p,dataSource:F.value,childrenKey:"sub",rowKey:b,onReady:r,onAction:x,onReload:r},null,8,["isLoading","dataSource"])]),_:1}),l(G,{ref_key:"templatesDialogRef",ref:w,title:"Check List Templates",width:"320px"},{default:d(()=>[_("div",{class:"download-link",onClick:i[0]||(i[0]=j=>P("module_check_list_template.json"))},"Module Check List Template"),_("div",{class:"download-link",onClick:i[1]||(i[1]=j=>P("enclosure_check_list_template.json"))},"Enclosure Check List Template"),_("div",{class:"download-link",onClick:i[2]||(i[2]=j=>P("ort_check_list_template.json"))},"ORT Check List Template"),_("div",{class:"download-link",onClick:i[3]||(i[3]=j=>P("glue_check_list_template.json"))},"Glue Check List Template"),_("div",{class:"download-link",onClick:i[4]||(i[4]=j=>P("destructive_check_list_template.json"))},"Destructive Check List Template")]),_:1},512),l(ke,{ref_key:"editDialogRef",ref:I,title:"Upload Check List",width:"400px",isLoading:E.value,form:e,onConfirm:se},{default:d(()=>[l(B,{cols:"1"},{default:d(()=>[f(k)==="super_admin"?(N(),K(S,{key:0},{default:d(()=>[l(m,{label:"Team",clearable:!1,form:e,formKey:"team",options:v},null,8,["form"])]),_:1})):Q("",!0),l(S,null,{default:d(()=>[l(me,{isRequired:!0,selectParent:!1,label:"Site Project",form:e,team:e.team},null,8,["form","team"])]),_:1}),l(S,null,{default:d(()=>[l(m,{isRequired:!0,label:"Audit Type",form:e,formKey:"type",options:f(te)},null,8,["form","options"])]),_:1}),l(S,null,{default:d(()=>[l(ve,{disabled:!e.part,isRequired:!0,label:"JSON Spec File",form:e,formKey:"rawJson",validateName:f(O),tips:"The JSON file must match the line selected"+(f(O)?", and with name '"+f(O)+"'":"")},null,8,["disabled","form","validateName","tips"])]),_:1})]),_:1})]),_:1},8,["isLoading","form"]),l(G,{ref_key:"previewDialogRef",ref:z,title:"Preview"},{default:d(()=>[l(we,{ref_key:"previewRef",ref:M},null,512)]),_:1},512)])}}});const Ce=X(ge,[["__scopeId","data-v-42c058e8"]]);export{Ce as default};
