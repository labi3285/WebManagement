import{d as F,o as P,c as H,a as T,_ as ie,n as Je,w as Qe,v as Xe,u as ve,b as ke,e as Ze,s as he,r as q,f as et,g as tt,h as Le,t as yt,i as Se,j as x,k as V,l as nt,m as Pe,p as ot,q as te,x as Ct,y as k,z as E,A as re,B as ye,C as Ce,F as Ee,S as St,D as st,E as kt,G as xt,H as $e,I as Lt,J as be,K as Pt,L as Fe,M as Be,N as Et,O as $t,P as Ot,Q as Ue}from"./index.87770df0.js";import{_ as Tt}from"./logo.e3101228.js";const zt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Mt=T("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8L295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512L196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1l216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z",fill:"currentColor"},null,-1),At=[Mt],je=F({name:"CloseOutlined",render:function(t,o){return P(),H("svg",zt,At)}}),Rt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Dt=T("path",{d:"M180 176h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zm724 0h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zM785.3 504.3L657.7 403.6a7.23 7.23 0 0 0-11.7 5.7V476H378v-62.8c0-6-7-9.4-11.7-5.7L238.7 508.3a7.14 7.14 0 0 0 0 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h268v62.8c0 6 7 9.4 11.7 5.7l127.5-100.8c3.8-2.9 3.8-8.5.2-11.4z",fill:"currentColor"},null,-1),It=[Dt],Ht=F({name:"ColumnWidthOutlined",render:function(t,o){return P(),H("svg",Rt,It)}}),Nt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ft=T("path",{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 0 0 0 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 0 0 391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6L877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 0 0-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z",fill:"currentColor"},null,-1),Bt=[Ft],Ut=F({name:"FullscreenExitOutlined",render:function(t,o){return P(),H("svg",Nt,Bt)}}),jt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Wt=T("path",{d:"M290 236.4l43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6l43.7 43.7a8.01 8.01 0 0 0 13.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 0 0 0 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 0 0-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6L423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z",fill:"currentColor"},null,-1),Vt=[Wt],qt=F({name:"FullscreenOutlined",render:function(t,o){return P(),H("svg",jt,Vt)}}),Kt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Gt=T("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281l360-281.1c3.8-3 6.1-7.7 6.1-12.6z",fill:"currentColor"},null,-1),Yt=[Gt],Jt=F({name:"LeftOutlined",render:function(t,o){return P(),H("svg",Kt,Yt)}}),Qt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Xt=T("path",{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 1 0-56 0z",fill:"currentColor"},null,-1),Zt=[Xt],en=F({name:"LockOutlined",render:function(t,o){return P(),H("svg",Qt,Zt)}}),tn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},nn=T("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z",fill:"currentColor"},null,-1),on=[nn],sn=F({name:"MenuFoldOutlined",render:function(t,o){return P(),H("svg",tn,on)}}),rn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},an=T("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z",fill:"currentColor"},null,-1),ln=[an],cn=F({name:"MenuUnfoldOutlined",render:function(t,o){return P(),H("svg",rn,ln)}}),dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},un=T("path",{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1),hn=[un],fn=F({name:"MinusOutlined",render:function(t,o){return P(),H("svg",dn,hn)}}),pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},vn=T("path",{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92C290 92 102.3 279.5 102 511.5C101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1c1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 0 0-10.1 4.8c-1.8 5-3.8 10-5.9 14.9c-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 0 1 655.9 829c-42.3 17.9-87.4 27-133.8 27c-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 0 1 279 755.2a342.16 342.16 0 0 1-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4c31.6-31.6 68.4-56.4 109.3-73.8c42.3-17.9 87.4-27 133.8-27c46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 0 1 109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 0 0 3 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z",fill:"currentColor"},null,-1),gn=[vn],rt=F({name:"ReloadOutlined",render:function(t,o){return P(),H("svg",pn,gn)}}),_n={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},mn=T("path",{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1l-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z",fill:"currentColor"},null,-1),wn=[mn],bn=F({name:"RightOutlined",render:function(t,o){return P(),H("svg",_n,wn)}}),yn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Cn=T("path",{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5a375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1c-.4.2-.8.3-1.2.5c-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8c2-77.2 33-149.5 87.8-204.3c56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z",fill:"currentColor"},null,-1),Sn=[Cn],it=F({name:"UserOutlined",render:function(t,o){return P(),H("svg",yn,Sn)}}),kn=F({name:"system-logo",props:{isCollapsed:{type:Boolean,required:!0}}});const xn={class:"system-logo"},Ln={class:"system-logo__name"};function Pn(e,t,o,n,d,l){return P(),H("div",xn,[T("img",{class:Je(["system-logo__icon",{"mr-2":!e.isCollapsed}]),src:Tt,alt:""},null,2),Qe(T("div",Ln,"Smart Audit",512),[[Xe,!e.isCollapsed]])])}const En=ie(kn,[["render",Pn],["__scopeId","data-v-7e173843"]]);function $n(e){var t,o;return((t=e.meta)==null?void 0:t.alwaysShow)!=!0&&((o=e.children)==null?void 0:o.length)===1}function On(e){return e.filter(t=>{var o;return(((o=t.meta)==null?void 0:o.hidden)||!1)!=!0&&!["/:path(.*)*","/","/redirect","/login"].includes(t.path)})}function at(e){return On(e).map(t=>{var l,i,r;const o=$n(t),n=o?t.children[0]:t,d={...n,...n.meta,label:(l=n.meta)==null?void 0:l.title,key:n.name,icon:o?(i=t.meta)==null?void 0:i.icon:(r=n.meta)==null?void 0:r.icon};return n.children&&n.children.length>0&&(d.children=at(n.children)),d})}const Tn=F({name:"system-menu",components:{},props:{isCollapsed:{type:Boolean},location:{type:String,default:"left"}},emits:["update:isCollapsed"],setup(e,{emit:t}){const o=ve(),n=ke(),d=Ze(he),l=q([]),i=q(o.name),r=q(""),_=o.matched,a=_&&_.length?_.map(y=>y.name):[],m=et({expandedKeys:a});tt(()=>o.fullPath,()=>{var S;b();const y=o.matched;m.expandedKeys=y.map(L=>L.name);const $=((S=o.meta)==null?void 0:S.activeMenu)||"";i.value=$||o.name});function b(){l.value=at(d.getMenus)}function C(y){console.log("Click Menu:"+y),/http(s)?:/.test(y)?window.open(y):n.push({name:y})}function g(y){if(!y)return;const $=y.find(L=>m.expandedKeys.indexOf(L)===-1),S=w($);m.expandedKeys=S?$?[$]:[]:y}function w(y){if(!y)return!1;const $=[];for(const{children:S,key:L}of Se(l))S&&S.length&&$.push(L);return $.includes(y)}return Le(()=>{b()}),{...yt(m),menus:l,selectedMenuKey:i,headerMenuSelectKey:r,onMenuItemClick:C,onMenuExpanded:g}}});function zn(e,t,o,n,d,l){const i=x("n-menu");return P(),V(i,{options:e.menus,inverted:!0,mode:"vertical",isCollapsed:e.isCollapsed,"collapsed-width":60,"collapsed-icon-size":20,"root-indent":10,indent:10,"expanded-keys":e.expandedKeys,value:e.selectedMenuKey,"onUpdate:value":e.onMenuItemClick,"onUpdate:expandedKeys":e.onMenuExpanded},null,8,["options","isCollapsed","expanded-keys","value","onUpdate:value","onUpdate:expandedKeys"])}const Mn=ie(Tn,[["render",zn]]),An=F({name:"UserSetting",components:{UserOutlined:it},setup(){const e=nt(),t=Pe(),o=ke(),n=ve(),d=ot(),l=te(()=>d.getUserInfo),i=te(()=>{let c=[];if(l.value.team&&l.value.team.length>0&&l.value.team!="mqa"&&c.push(l.value.team),l.value.role==="admin"?c.push("Admin"):l.value.role==="lob_dri"?c.push("DRI"):l.value.role==="lob_auditor"&&c.push("Auditor"),l.value.lob)for(const s of l.value.lob)c.push(s);return c.join(" / ")}),r=q(!1);function _(){r.value=!0}function a(){r.value=!1}const m=q(),b=q(!1),C=q(!1),g=et({currentPassword:null,newPassword:null,confirmNewPassword:null}),w=q({currentPassword:{required:!0,message:"Current Password Empty",trigger:"blur"},newPassword:{required:!0,message:"New Password Empty",trigger:"blur"},confirmNewPassword:{required:!0,message:"Confirm Password Empty",trigger:"blur"}}),y=()=>{g.currentPassword=null,g.newPassword=null,g.confirmNewPassword=null,b.value=!0},$=()=>{m.value.validate(c=>{if(!c){if(g.newPassword!==g.confirmNewPassword){t.warning("Confirm Password Not Match");return}L()}})},S=()=>{b.value=!1};async function L(){C.value=!0;try{await Ct("/user_change_password",{oldPassword:g.currentPassword,newPassword:g.newPassword}),t.success("Password Changed"),b.value=!1}finally{C.value=!1}}return{userInfo:l,userSubInfo:i,isShow:r,open:_,close:a,onLogout:()=>{e.info({title:"Notice",content:"Are you sure you want to logout?",positiveText:"Logout",negativeText:"Cancel",onPositiveClick:()=>{d.cleanLoginInfo().then(()=>{t.success("Logout Success"),localStorage.removeItem("SYSTEM_TABS"),o.replace({name:"Login",query:{redirect:n.fullPath}}).finally(()=>location.reload())})}})},changePasswordFormRef:m,isChangePassowrdDialogShow:b,isChangePasswordLoading:C,onChangePassword:y,changePasswordForm:g,changePasswordFormRules:w,onChangePasswordConfirm:$,onChangePasswordCancel:S}}});const Rn={class:"page"},Dn={class:"page__info"},In={class:"page__info__account"},Hn={class:"page__info__info"},Nn={class:"page__bottom-box"},Fn={class:"dialog-bottom-bar"};function Bn(e,t,o,n,d,l){const i=x("UserOutlined"),r=x("n-icon"),_=x("n-avatar"),a=x("n-button"),m=x("n-drawer"),b=x("n-input"),C=x("n-form-item"),g=x("n-space"),w=x("n-form"),y=x("n-spin"),$=x("n-modal");return P(),H(Ee,null,[k(m,{show:e.isShow,"onUpdate:show":t[1]||(t[1]=S=>e.isShow=S),width:200,height:200,placement:"right"},{default:E(()=>[T("div",Rn,[T("div",Dn,[k(_,{class:"page__info__icon",round:""},{default:E(()=>[k(r,null,{default:E(()=>[k(i)]),_:1})]),_:1}),T("div",In,re(e.userInfo.account),1),T("div",Hn,re(e.userSubInfo),1),e.userInfo.id>=0?(P(),H("div",{key:0,class:"page__info__password",onClick:t[0]||(t[0]=(...S)=>e.onChangePassword&&e.onChangePassword(...S))},"Change Password")):ye("",!0)]),T("div",Nn,[k(a,{onClick:e.onLogout},{default:E(()=>[Ce("Logout")]),_:1},8,["onClick"])])])]),_:1},8,["show"]),k($,{show:e.isChangePassowrdDialogShow,"onUpdate:show":t[5]||(t[5]=S=>e.isChangePassowrdDialogShow=S),title:"Change Password","show-icon":!1,preset:"dialog",style:{width:"300px"}},{default:E(()=>[k(y,{show:e.isChangePasswordLoading},{default:E(()=>[k(w,{size:"medium",ref:"changePasswordFormRef","label-placement":"top",model:e.changePasswordForm,rules:e.changePasswordFormRules},{default:E(()=>[k(C,{label:"Last Password",path:"currentPassword"},{default:E(()=>[k(b,{value:e.changePasswordForm.currentPassword,"onUpdate:value":t[2]||(t[2]=S=>e.changePasswordForm.currentPassword=S),placeholder:"Input Current Password"},null,8,["value"])]),_:1}),k(C,{label:"New Password",path:"newPassword"},{default:E(()=>[k(b,{value:e.changePasswordForm.newPassword,"onUpdate:value":t[3]||(t[3]=S=>e.changePasswordForm.newPassword=S),placeholder:"Input New Password"},null,8,["value"])]),_:1}),k(C,{label:"Confirm New Password",path:"confirmNewPassword"},{default:E(()=>[k(b,{value:e.changePasswordForm.confirmNewPassword,"onUpdate:value":t[4]||(t[4]=S=>e.changePasswordForm.confirmNewPassword=S),placeholder:"Confirm New Password"},null,8,["value"])]),_:1}),T("div",Fn,[k(g,null,{default:E(()=>[k(a,{onClick:e.onChangePasswordCancel},{default:E(()=>[Ce("Cancel")]),_:1},8,["onClick"]),k(a,{type:"info",onClick:e.onChangePasswordConfirm},{default:E(()=>[Ce("Confirm")]),_:1},8,["onClick"])]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])],64)}const Un=ie(An,[["render",Bn],["__scopeId","data-v-3ed361f6"]]),jn=F({name:"system-head",components:{UserSetting:Un,MenuUnfoldOutlined:cn,MenuFoldOutlined:sn,ReloadOutlined:rt,LockOutlined:en,FullscreenOutlined:qt,FullscreenExitOutlined:Ut,UserOutlined:it,SettingOutlined:St},props:{isCollapsed:{type:Boolean,required:!0}},setup(){const e=ot(he),t=ke(),o=ve();nt(),Pe();const{account:n}=(e==null?void 0:e.getUserInfo)||{},d=C=>C.map(g=>{const w={...g,label:g.meta.title,key:g.name,disabled:g.path==="/"};return g.children&&g.children.length>0&&(w.children=d(g.children)),w}),l=te(()=>d(o.matched)),i=C=>{t.push({name:C})},r=()=>{t.push({path:"/redirect="+Se(o).fullPath})},_=te(()=>document.fullscreenElement!==void 0&&document.fullscreenElement!==null),a=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},m=q();function b(){m.value.open()}return{account:n,onRefreshClick:r,breadcrumbList:l,dropdownSelect:i,isFullScreen:_,onFullScreenClick:a,userSettingRef:m,onUserSetting:b}}});const lt=e=>(kt("data-v-5d2833ca"),e=e(),xt(),e),Wn={class:"system-head"},Vn={class:"system-head__left"},qn=lt(()=>T("div",{style:{width:"5px"}},null,-1)),Kn=lt(()=>T("div",{style:{width:"5px"}},null,-1)),Gn={class:"link-text"},Yn={key:1,class:"link-text"},Jn={class:"system-head__right"};function Qn(e,t,o,n,d,l){const i=x("MenuUnfoldOutlined"),r=x("MenuFoldOutlined"),_=x("n-icon"),a=x("n-dropdown"),m=x("n-breadcrumb-item"),b=x("n-breadcrumb"),C=x("FullscreenOutlined"),g=x("FullscreenExitOutlined"),w=x("n-tooltip"),y=x("UserOutlined"),$=x("n-avatar"),S=x("UserSetting");return Qe((P(),H("div",Wn,[T("div",Vn,[qn,k(_,{size:"20",class:"system-head__left__button",onClick:t[0]||(t[0]=()=>e.$emit("update:isCollapsed",!e.isCollapsed))},{default:E(()=>[e.isCollapsed?(P(),V(i,{key:0})):(P(),V(r,{key:1}))]),_:1}),Kn,k(b,null,{default:E(()=>[(P(!0),H(Ee,null,st(e.breadcrumbList,L=>(P(),V(m,{key:L.name},{default:E(()=>[L.children.length?(P(),V(a,{key:0,options:L.children,onSelect:e.dropdownSelect},{default:E(()=>[T("span",Gn,re(L.meta.title),1)]),_:2},1032,["options","onSelect"])):(P(),H("span",Yn,re(L.meta.title),1))]),_:2},1024))),128))]),_:1})]),T("div",Jn,[k(w,{placement:"bottom"},{trigger:E(()=>[k(_,{class:"system-head__right__button",size:"20",onClick:e.onFullScreenClick},{default:E(()=>[e.isFullScreen?(P(),V(C,{key:0})):(P(),V(g,{key:1}))]),_:1},8,["onClick"])]),default:E(()=>[T("span",null,re(e.isFullScreen?"Exsit Full Screen":"Full Screen"),1)]),_:1}),k($,{onClick:e.onUserSetting,class:"system-head__right__avatar",round:""},{icon:E(()=>[k(y)]),default:E(()=>[Ce(re(e.account)+" ",1)]),_:1},8,["onClick"])]),k(S,{ref:"userSettingRef"},null,512)],512)),[[Xe,!e.isFullScreen]])}const Xn=ie(jn,[["render",Qn],["__scopeId","data-v-5d2833ca"]]),Zn=["Redirect","Login"],eo=$e({id:"system-tabs",state:()=>({tabs:[]}),getters:{},actions:{initTabs(e){this.tabs=e},addTabs(e){return Zn.includes(e.name)?!1:(this.tabs.some(o=>o.fullPath==e.fullPath)||this.tabs.push(e),!0)},closeLeftTabs(e){const t=this.tabs.findIndex(o=>o.fullPath==e.fullPath);this.tabs.splice(0,t)},closeRightTabs(e){const t=this.tabs.findIndex(o=>o.fullPath==e.fullPath);this.tabs.splice(t+1)},closeOtherTabs(e){this.tabs=this.tabs.filter(t=>t.fullPath==e.fullPath)},closeCurrentTab(e){const t=this.tabs.findIndex(o=>o.fullPath==e.fullPath);this.tabs.splice(t,1)},closeAllTabs(){this.tabs=[],localStorage.removeItem("SYSTEM_TABS")}}});var Oe={exports:{}},to=Oe.exports={};to.forEach=function(e,t){for(var o=0;o<e.length;o++){var n=t(e[o]);if(n)return n}};var no=function(e){var t=e.stateHandler.getState;function o(i){var r=t(i);return r&&!!r.isDetectable}function n(i){t(i).isDetectable=!0}function d(i){return!!t(i).busy}function l(i,r){t(i).busy=!!r}return{isDetectable:o,markAsDetectable:n,isBusy:d,markBusy:l}},oo=function(e){var t={};function o(i){var r=e.get(i);return r===void 0?[]:t[r]||[]}function n(i,r){var _=e.get(i);t[_]||(t[_]=[]),t[_].push(r)}function d(i,r){for(var _=o(i),a=0,m=_.length;a<m;++a)if(_[a]===r){_.splice(a,1);break}}function l(i){var r=o(i);!r||(r.length=0)}return{get:o,add:n,removeListener:d,removeAllListeners:l}},so=function(){var e=1;function t(){return e++}return{generate:t}},ro=function(e){var t=e.idGenerator,o=e.stateHandler.getState;function n(l){var i=o(l);return i&&i.id!==void 0?i.id:null}function d(l){var i=o(l);if(!i)throw new Error("setId required the element to have a resize detection state.");var r=t.generate();return i.id=r,r}return{get:n,set:d}},io=function(e){function t(){}var o={log:t,warn:t,error:t};if(!e&&window.console){var n=function(d,l){d[l]=function(){var r=console[l];if(r.apply)r.apply(console,arguments);else for(var _=0;_<arguments.length;_++)r(arguments[_])}};n(o,"log"),n(o,"warn"),n(o,"error")}return o},Te={exports:{}},ct=Te.exports={};ct.isIE=function(e){function t(){var n=navigator.userAgent.toLowerCase();return n.indexOf("msie")!==-1||n.indexOf("trident")!==-1||n.indexOf(" edge/")!==-1}if(!t())return!1;if(!e)return!0;var o=function(){var n,d=3,l=document.createElement("div"),i=l.getElementsByTagName("i");do l.innerHTML="<!--[if gt IE "+ ++d+"]><i></i><![endif]-->";while(i[0]);return d>4?d:n}();return e===o};ct.isLegacyOpera=function(){return!!window.opera};var dt={exports:{}},ao=dt.exports={};ao.getOption=lo;function lo(e,t,o){var n=e[t];return n==null&&o!==void 0?o:n}var We=dt.exports,co=function(t){t=t||{};var o=t.reporter,n=We.getOption(t,"async",!0),d=We.getOption(t,"auto",!0);d&&!n&&(o&&o.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var l=Ve(),i,r=!1;function _(w,y){!r&&d&&n&&l.size()===0&&b(),l.add(w,y)}function a(){for(r=!0;l.size();){var w=l;l=Ve(),w.process()}r=!1}function m(w){r||(w===void 0&&(w=n),i&&(C(i),i=null),w?b():a())}function b(){i=g(a)}function C(w){var y=clearTimeout;return y(w)}function g(w){var y=function($){return setTimeout($,0)};return y(w)}return{add:_,force:m}};function Ve(){var e={},t=0,o=0,n=0;function d(r,_){_||(_=r,r=0),r>o?o=r:r<n&&(n=r),e[r]||(e[r]=[]),e[r].push(_),t++}function l(){for(var r=n;r<=o;r++)for(var _=e[r],a=0;a<_.length;a++){var m=_[a];m()}}function i(){return t}return{add:d,process:l,size:i}}var ze="_erd";function uo(e){return e[ze]={},ut(e)}function ut(e){return e[ze]}function ho(e){delete e[ze]}var fo={initState:uo,getState:ut,cleanState:ho},fe=Te.exports,po=function(e){e=e||{};var t=e.reporter,o=e.batchProcessor,n=e.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function d(a,m){function b(){m(a)}if(fe.isIE(8))n(a).object={proxy:b},a.attachEvent("onresize",b);else{var C=r(a);if(!C)throw new Error("Element is not detectable by this strategy.");C.contentDocument.defaultView.addEventListener("resize",b)}}function l(a){var m=e.important?" !important; ":"; ";return(a.join(m)+m).trim()}function i(a,m,b){b||(b=m,m=a,a=null),a=a||{},a.debug;function C(g,w){var y=l(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),$=!1,S=window.getComputedStyle(g),L=g.offsetWidth,D=g.offsetHeight;n(g).startSize={width:L,height:D};function c(){function s(){if(S.position==="static"){g.style.setProperty("position","relative",a.important?"important":"");var N=function(j,M,h,u){function v(U){return U.replace(/[^-\d\.]/g,"")}var z=h[u];z!=="auto"&&v(z)!=="0"&&(j.warn("An element that is positioned static has style."+u+"="+z+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+u+" will be set to 0. Element: ",M),M.style.setProperty(u,"0",a.important?"important":""))};N(t,g,S,"top"),N(t,g,S,"right"),N(t,g,S,"bottom"),N(t,g,S,"left")}}function R(){$||s();function N(M,h){if(!M.contentDocument){var u=n(M);u.checkForObjectDocumentTimeoutId&&window.clearTimeout(u.checkForObjectDocumentTimeoutId),u.checkForObjectDocumentTimeoutId=setTimeout(function(){u.checkForObjectDocumentTimeoutId=0,N(M,h)},100);return}h(M.contentDocument)}var j=this;N(j,function(h){w(g)})}S.position!==""&&(s(),$=!0);var f=document.createElement("object");f.style.cssText=y,f.tabIndex=-1,f.type="text/html",f.setAttribute("aria-hidden","true"),f.onload=R,fe.isIE()||(f.data="about:blank"),n(g)&&(g.appendChild(f),n(g).object=f,fe.isIE()&&(f.data="about:blank"))}o?o.add(c):c()}fe.isIE(8)?b(m):C(m,b)}function r(a){return n(a).object}function _(a){if(!!n(a)){var m=r(a);!m||(fe.isIE(8)?a.detachEvent("onresize",m.proxy):a.removeChild(m),n(a).checkForObjectDocumentTimeoutId&&window.clearTimeout(n(a).checkForObjectDocumentTimeoutId),delete n(a).object)}}return{makeDetectable:i,addListener:d,uninstall:_}},vo=Oe.exports.forEach,go=function(e){e=e||{};var t=e.reporter,o=e.batchProcessor,n=e.stateHandler.getState;e.stateHandler.hasState;var d=e.idHandler;if(!o)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var l=m(),i="erd_scroll_detection_scrollbar_style",r="erd_scroll_detection_container";function _(c){b(c,i,r)}_(window.document);function a(c){var s=e.important?" !important; ":"; ";return(c.join(s)+s).trim()}function m(){var c=500,s=500,R=document.createElement("div");R.style.cssText=a(["position: absolute","width: "+c*2+"px","height: "+s*2+"px","visibility: hidden","margin: 0","padding: 0"]);var f=document.createElement("div");f.style.cssText=a(["position: absolute","width: "+c+"px","height: "+s+"px","overflow: scroll","visibility: none","top: "+-c*3+"px","left: "+-s*3+"px","visibility: hidden","margin: 0","padding: 0"]),f.appendChild(R),document.body.insertBefore(f,document.body.firstChild);var N=c-f.clientWidth,j=s-f.clientHeight;return document.body.removeChild(f),{width:N,height:j}}function b(c,s,R){function f(h,u){u=u||function(z){c.head.appendChild(z)};var v=c.createElement("style");return v.innerHTML=h,v.id=s,u(v),v}if(!c.getElementById(s)){var N=R+"_animation",j=R+"_animation_active",M=`/* Created by the element-resize-detector library. */
`;M+="."+R+" > div::-webkit-scrollbar { "+a(["display: none"])+` }

`,M+="."+j+" { "+a(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+N,"animation-name: "+N])+` }
`,M+="@-webkit-keyframes "+N+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,M+="@keyframes "+N+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",f(M)}}function C(c){c.className+=" "+r+"_animation_active"}function g(c,s,R){if(c.addEventListener)c.addEventListener(s,R);else if(c.attachEvent)c.attachEvent("on"+s,R);else return t.error("[scroll] Don't know how to add event listeners.")}function w(c,s,R){if(c.removeEventListener)c.removeEventListener(s,R);else if(c.detachEvent)c.detachEvent("on"+s,R);else return t.error("[scroll] Don't know how to remove event listeners.")}function y(c){return n(c).container.childNodes[0].childNodes[0].childNodes[0]}function $(c){return n(c).container.childNodes[0].childNodes[0].childNodes[1]}function S(c,s){var R=n(c).listeners;if(!R.push)throw new Error("Cannot add listener to an element that is not detectable.");n(c).listeners.push(s)}function L(c,s,R){R||(R=s,s=c,c=null),c=c||{};function f(){if(c.debug){var p=Array.prototype.slice.call(arguments);if(p.unshift(d.get(s),"Scroll: "),t.log.apply)t.log.apply(null,p);else for(var O=0;O<p.length;O++)t.log(p[O])}}function N(p){function O(I){var G=I.getRootNode&&I.getRootNode().contains(I);return I===I.ownerDocument.body||I.ownerDocument.body.contains(I)||G}return!O(p)||window.getComputedStyle(p)===null}function j(p){var O=n(p).container.childNodes[0],I=window.getComputedStyle(O);return!I.width||I.width.indexOf("px")===-1}function M(){var p=window.getComputedStyle(s),O={};return O.position=p.position,O.width=s.offsetWidth,O.height=s.offsetHeight,O.top=p.top,O.right=p.right,O.bottom=p.bottom,O.left=p.left,O.widthCSS=p.width,O.heightCSS=p.height,O}function h(){var p=M();n(s).startSize={width:p.width,height:p.height},f("Element start size",n(s).startSize)}function u(){n(s).listeners=[]}function v(){if(f("storeStyle invoked."),!n(s)){f("Aborting because element has been uninstalled");return}var p=M();n(s).style=p}function z(p,O,I){n(p).lastWidth=O,n(p).lastHeight=I}function U(p){return y(p).childNodes[0]}function Y(){return 2*l.width+1}function ae(){return 2*l.height+1}function ge(p){return p+10+Y()}function _e(p){return p+10+ae()}function ht(p){return p*2+Y()}function ft(p){return p*2+ae()}function Me(p,O,I){var G=y(p),ne=$(p),le=ge(O),ce=_e(I),W=ht(O),A=ft(I);G.scrollLeft=le,G.scrollTop=ce,ne.scrollLeft=W,ne.scrollTop=A}function Ae(){var p=n(s).container;if(!p){p=document.createElement("div"),p.className=r,p.style.cssText=a(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),n(s).container=p,C(p),s.appendChild(p);var O=function(){n(s).onRendered&&n(s).onRendered()};g(p,"animationstart",O),n(s).onAnimationStart=O}return p}function pt(){function p(){var B=n(s).style;if(B.position==="static"){s.style.setProperty("position","relative",c.important?"important":"");var X=function(ue,se,mt,we){function wt(bt){return bt.replace(/[^-\d\.]/g,"")}var xe=mt[we];xe!=="auto"&&wt(xe)!=="0"&&(ue.warn("An element that is positioned static has style."+we+"="+xe+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+we+" will be set to 0. Element: ",se),se.style[we]=0)};X(t,s,B,"top"),X(t,s,B,"right"),X(t,s,B,"bottom"),X(t,s,B,"left")}}function O(B,X,ue,se){return B=B?B+"px":"0",X=X?X+"px":"0",ue=ue?ue+"px":"0",se=se?se+"px":"0",["left: "+B,"top: "+X,"right: "+se,"bottom: "+ue]}if(f("Injecting elements"),!n(s)){f("Aborting because element has been uninstalled");return}p();var I=n(s).container;I||(I=Ae());var G=l.width,ne=l.height,le=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),ce=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(O(-(1+G),-(1+ne),-ne,-G))),W=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),A=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),K=a(["position: absolute","left: 0","top: 0"]),oe=a(["position: absolute","width: 200%","height: 200%"]),J=document.createElement("div"),Q=document.createElement("div"),de=document.createElement("div"),De=document.createElement("div"),me=document.createElement("div"),Ie=document.createElement("div");J.dir="ltr",J.style.cssText=le,J.className=r,Q.className=r,Q.style.cssText=ce,de.style.cssText=W,De.style.cssText=K,me.style.cssText=A,Ie.style.cssText=oe,de.appendChild(De),me.appendChild(Ie),Q.appendChild(de),Q.appendChild(me),J.appendChild(Q),I.appendChild(J);function He(){var B=n(s);B&&B.onExpand?B.onExpand():f("Aborting expand scroll handler: element has been uninstalled")}function Ne(){var B=n(s);B&&B.onShrink?B.onShrink():f("Aborting shrink scroll handler: element has been uninstalled")}g(de,"scroll",He),g(me,"scroll",Ne),n(s).onExpandScroll=He,n(s).onShrinkScroll=Ne}function vt(){function p(W,A,K){var oe=U(W),J=ge(A),Q=_e(K);oe.style.setProperty("width",J+"px",c.important?"important":""),oe.style.setProperty("height",Q+"px",c.important?"important":"")}function O(W){var A=s.offsetWidth,K=s.offsetHeight,oe=A!==n(s).lastWidth||K!==n(s).lastHeight;f("Storing current size",A,K),z(s,A,K),o.add(0,function(){if(!!oe){if(!n(s)){f("Aborting because element has been uninstalled");return}if(!I()){f("Aborting because element container has not been initialized");return}if(c.debug){var Q=s.offsetWidth,de=s.offsetHeight;(Q!==A||de!==K)&&t.warn(d.get(s),"Scroll: Size changed before updating detector elements.")}p(s,A,K)}}),o.add(1,function(){if(!n(s)){f("Aborting because element has been uninstalled");return}if(!I()){f("Aborting because element container has not been initialized");return}Me(s,A,K)}),oe&&W&&o.add(2,function(){if(!n(s)){f("Aborting because element has been uninstalled");return}if(!I()){f("Aborting because element container has not been initialized");return}W()})}function I(){return!!n(s).container}function G(){function W(){return n(s).lastNotifiedWidth===void 0}f("notifyListenersIfNeeded invoked");var A=n(s);if(W()&&A.lastWidth===A.startSize.width&&A.lastHeight===A.startSize.height)return f("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(A.lastWidth===A.lastNotifiedWidth&&A.lastHeight===A.lastNotifiedHeight)return f("Not notifying: Size already notified");f("Current size not notified, notifying..."),A.lastNotifiedWidth=A.lastWidth,A.lastNotifiedHeight=A.lastHeight,vo(n(s).listeners,function(K){K(s)})}function ne(){if(f("startanimation triggered."),j(s)){f("Ignoring since element is still unrendered...");return}f("Element rendered.");var W=y(s),A=$(s);(W.scrollLeft===0||W.scrollTop===0||A.scrollLeft===0||A.scrollTop===0)&&(f("Scrollbars out of sync. Updating detector elements..."),O(G))}function le(){if(f("Scroll detected."),j(s)){f("Scroll event fired while unrendered. Ignoring...");return}O(G)}if(f("registerListenersAndPositionElements invoked."),!n(s)){f("Aborting because element has been uninstalled");return}n(s).onRendered=ne,n(s).onExpand=le,n(s).onShrink=le;var ce=n(s).style;p(s,ce.width,ce.height)}function gt(){if(f("finalizeDomMutation invoked."),!n(s)){f("Aborting because element has been uninstalled");return}var p=n(s).style;z(s,p.width,p.height),Me(s,p.width,p.height)}function _t(){R(s)}function Re(){f("Installing..."),u(),h(),o.add(0,v),o.add(1,pt),o.add(2,vt),o.add(3,gt),o.add(4,_t)}f("Making detectable..."),N(s)?(f("Element is detached"),Ae(),f("Waiting until element is attached..."),n(s).onRendered=function(){f("Element is now attached"),Re()}):Re()}function D(c){var s=n(c);!s||(s.onExpandScroll&&w(y(c),"scroll",s.onExpandScroll),s.onShrinkScroll&&w($(c),"scroll",s.onShrinkScroll),s.onAnimationStart&&w(s.container,"animationstart",s.onAnimationStart),s.container&&c.removeChild(s.container))}return{makeDetectable:L,addListener:S,uninstall:D,initDocument:_}},pe=Oe.exports.forEach,_o=no,mo=oo,wo=so,bo=ro,yo=io,qe=Te.exports,Co=co,Z=fo,So=po,ko=go;function Ke(e){return Array.isArray(e)||e.length!==void 0}function Ge(e){if(Array.isArray(e))return e;var t=[];return pe(e,function(o){t.push(o)}),t}function Ye(e){return e&&e.nodeType===1}var xo=function(e){e=e||{};var t;if(e.idHandler)t={get:function(L){return e.idHandler.get(L,!0)},set:e.idHandler.set};else{var o=wo(),n=bo({idGenerator:o,stateHandler:Z});t=n}var d=e.reporter;if(!d){var l=d===!1;d=yo(l)}var i=ee(e,"batchProcessor",Co({reporter:d})),r={};r.callOnAdd=!!ee(e,"callOnAdd",!0),r.debug=!!ee(e,"debug",!1);var _=mo(t),a=_o({stateHandler:Z}),m,b=ee(e,"strategy","object"),C=ee(e,"important",!1),g={reporter:d,batchProcessor:i,stateHandler:Z,idHandler:t,important:C};if(b==="scroll"&&(qe.isLegacyOpera()?(d.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),b="object"):qe.isIE(9)&&(d.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),b="object")),b==="scroll")m=ko(g);else if(b==="object")m=So(g);else throw new Error("Invalid strategy name: "+b);var w={};function y(L,D,c){function s(h){var u=_.get(h);pe(u,function(z){z(h)})}function R(h,u,v){_.add(u,v),h&&v(u)}if(c||(c=D,D=L,L={}),!D)throw new Error("At least one element required.");if(!c)throw new Error("Listener required.");if(Ye(D))D=[D];else if(Ke(D))D=Ge(D);else return d.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var f=0,N=ee(L,"callOnAdd",r.callOnAdd),j=ee(L,"onReady",function(){}),M=ee(L,"debug",r.debug);pe(D,function(u){Z.getState(u)||(Z.initState(u),t.set(u));var v=t.get(u);if(M&&d.log("Attaching listener to element",v,u),!a.isDetectable(u)){if(M&&d.log(v,"Not detectable."),a.isBusy(u)){M&&d.log(v,"System busy making it detectable"),R(N,u,c),w[v]=w[v]||[],w[v].push(function(){f++,f===D.length&&j()});return}return M&&d.log(v,"Making detectable..."),a.markBusy(u,!0),m.makeDetectable({debug:M,important:C},u,function(U){if(M&&d.log(v,"onElementDetectable"),Z.getState(U)){a.markAsDetectable(U),a.markBusy(U,!1),m.addListener(U,s),R(N,U,c);var Y=Z.getState(U);if(Y&&Y.startSize){var ae=U.offsetWidth,ge=U.offsetHeight;(Y.startSize.width!==ae||Y.startSize.height!==ge)&&s(U)}w[v]&&pe(w[v],function(_e){_e()})}else M&&d.log(v,"Element uninstalled before being detectable.");delete w[v],f++,f===D.length&&j()})}M&&d.log(v,"Already detecable, adding listener."),R(N,u,c),f++}),f===D.length&&j()}function $(L){if(!L)return d.error("At least one element is required.");if(Ye(L))L=[L];else if(Ke(L))L=Ge(L);else return d.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");pe(L,function(D){_.removeAllListeners(D),m.uninstall(D),Z.cleanState(D)})}function S(L){m.initDocument&&m.initDocument(L)}return{listenTo:y,removeListener:_.removeListener,removeAllListeners:_.removeAllListeners,uninstall:$,initDocument:S}};function ee(e,t,o){var n=e[t];return n==null&&o!==void 0?o:n}const Lo=xo,Po=$e({id:"system-project-setting",state:()=>({isCollapsed:!1})}),Eo=F({name:"TabsView",components:{DownOutlined:Lt,CloseOutlined:je,LeftOutlined:Jt,RightOutlined:bn},props:{isCollapsed:{type:Boolean}},setup(e){Pe();const t=ve(),o=ke();Po(he);const n=eo(he),d=Ze(he),l=q(),i=te(()=>n.tabs),r=()=>{const{fullPath:h,hash:u,meta:v,name:z,params:U,path:Y,query:ae}=t;return{fullPath:h,hash:u,meta:v,name:z,params:U,path:Y,query:ae}};(()=>{let h=[];try{const v=Pt.get("SYSTEM_TABS");v?h=JSON.parse(v):h=[r()]}catch{h=[r()]}const u=o.getRoutes();for(const v of h){const z=u.find(U=>U.path===v.path);z&&(v.meta=z.meta||v.meta,v.name=z.name||v.name)}n.initTabs(h)})();const a=q(t.fullPath),m=te(()=>{let h=0;for(const u of i.value){if(u.fullPath===a.value)return h;h++}return-1}),b=["Login","Redirect","Error404"],C=h=>{const{fullPath:u}=h;u!==t.fullPath&&(a.value=u,o.push({path:u}),console.log("go tab"))},g=h=>{const{fullPath:u}=h,v=i.value.find(z=>z.fullPath==u);f(v),console.log("close")},w=te(()=>{const h=Se(i).length<=1;return[{label:"Refresh Current",key:"REFRESH_CURRENT",disabled:!1,icon:be(rt)},{label:"Close Current",key:"CLOSE_CURRENT",disabled:h,icon:be(je)},{label:"Close Others",key:"CLOSE_OTHERS",disabled:h,icon:be(Ht)},{label:"Close All",key:"CLOSE_ALL",disabled:h,icon:be(fn)}]}),y=q(!1),$=()=>{!l.value||(y.value=l.value.offsetWidth<l.value.scrollWidth)},S=()=>{if(!l.value)return;let h=l.value.querySelectorAll(".system-tabs__tabs__scroll__item-select")||[];h.length>0&&h[0].scrollIntoView&&h[0].scrollIntoView()},L=()=>{const h=l.value.offsetWidth,u=l.value.scrollLeft;if(!u)return;const v=u>h?u-h:0;c(v,(v-u)/20)},D=()=>{const h=l.value.offsetWidth,u=l.value.scrollWidth,v=l.value.scrollLeft;if(u-v<=h)return;const z=u-v>h*2?v+h:u-h;c(z,(z-v)/20)},c=(h,u)=>{const v=l.value.scrollLeft,z=u>0&&v+u>=h||u<0&&v+u<=h?h:v+u;if(l.value.scrollTo(z,0),z!==h)return window.requestAnimationFrame(()=>c(h,u))},s=()=>{var h,u;if(t.meta.keepAlive){const v=(u=(h=o.currentRoute.value.matched.find(z=>z.name==t.name))==null?void 0:h.components)==null?void 0:u.default.name;v&&(d.keepAliveComponents=d.keepAliveComponents.filter(z=>z!=v))}},R=()=>{s(),o.push({path:"/redirect"+Se(t).fullPath})},f=h=>{if(!(i.value.length<=1)){if(s(),n.closeCurrentTab(h),a.value===h.fullPath){const u=i.value[i.value.length-1];a.value=u.fullPath,o.push(u)}$(),S()}},N=()=>{n.closeOtherTabs(t),a.value=t.fullPath,o.replace(t.fullPath),$(),S()},j=()=>{localStorage.removeItem("routes"),n.closeAllTabs(),o.replace("/"),$(),S()},M=h=>{switch(h){case"REFRESH_CURRENT":R();break;case"CLOSE_CURRENT":f(t);break;case"CLOSE_OTHERS":N();break;case"CLOSE_ALL":j();break}};return Le(()=>{Lo().listenTo(l.value,()=>{$(),S()})}),tt(()=>t.fullPath,h=>{b.includes(t.name)||(a.value=h,n.addTabs(r()),$(),S())},{immediate:!0}),{tabsScrollRef:l,tabs:i,selectPath:a,selectIndex:m,tabsMenus:w,isTabsScrollable:y,onGoTab:C,onCloseTab:g,onPrevTabsPage:L,onNextTabsPage:D,onTabMenuClick:M}}});const $o={class:"system-tabs"},Oo={class:"system-tabs__tabs"},To={ref:"tabsScrollRef",class:"system-tabs__tabs__scroll"},zo=["id"],Mo=["onClick"],Ao={class:"system-tabs__menu"},Ro={class:"system-tabs__menu__button"};function Do(e,t,o,n,d,l){const i=x("LeftOutlined"),r=x("n-icon"),_=x("CloseOutlined"),a=x("RightOutlined"),m=x("DownOutlined"),b=x("n-dropdown");return P(),H("div",$o,[T("div",Oo,[e.isTabsScrollable?(P(),H("span",{key:0,class:"system-tabs__tabs__pager",onClick:t[0]||(t[0]=(...C)=>e.onPrevTabsPage&&e.onPrevTabsPage(...C))},[k(r,{size:"16",color:"#515a6e"},{default:E(()=>[k(i)]),_:1})])):ye("",!0),T("div",To,[(P(!0),H(Ee,null,st(e.tabs,(C,g)=>{var w;return P(),H("div",{key:g,id:C.fullPath,class:Je(["system-tabs__tabs__scroll__item",e.selectIndex===g?"system-tabs__tabs__scroll__item-select":"system-tabs__tabs__scroll__item-normal"])},[T("span",{onClick:Fe(y=>e.onGoTab(C),["stop"])},re(((w=C.meta)==null?void 0:w.title)||"??"),9,Mo),k(r,{size:"14",onClick:Fe(y=>e.onCloseTab(C),["stop"])},{default:E(()=>[e.tabs.length>1?(P(),V(_,{key:0})):ye("",!0)]),_:2},1032,["onClick"])],10,zo)}),128))],512),e.isTabsScrollable?(P(),H("span",{key:1,class:"system-tabs__tabs__pager",onClick:t[1]||(t[1]=(...C)=>e.onNextTabsPage&&e.onNextTabsPage(...C))},[k(r,{size:"16",color:"#515a6e"},{default:E(()=>[k(a)]),_:1})])):ye("",!0)]),T("div",Ao,[k(b,{trigger:"hover",onSelect:e.onTabMenuClick,placement:"bottom-end",options:e.tabsMenus},{default:E(()=>[T("div",Ro,[k(r,{size:"16",color:"#515a6e"},{default:E(()=>[k(m)]),_:1})])]),_:1},8,["onSelect","options"])])])}const Io=ie(Eo,[["render",Do],["__scopeId","data-v-46169e06"]]),Ho={id:"id",children:"children",pid:"pid"},No=e=>Object.assign({},Ho,e);function Fo(e,t,o={}){o=No(o);const n=o.children;function d(l){return l.map(i=>({...i})).filter(i=>(i[n]=i[n]&&d(i[n]),t(i)||i[n]&&i[n].length))}return d(e)}const Bo=$e({id:"system-async-route",state:()=>({menus:[],routers:Be,addRouters:[],keepAliveComponents:[],isDynamicAddedRoute:!1}),getters:{getMenus(){return this.menus},getIsDynamicAddedRoute(){return this.isDynamicAddedRoute}},actions:{getRouters(){return Et(this.addRouters)},setDynamicAddedRoute(e){this.isDynamicAddedRoute=e},setRouters(e){this.addRouters=e,this.routers=Be.concat(e)},setMenus(e){this.menus=e},setKeepAliveComponents(e){this.keepAliveComponents=e},async generateRoutes(e){let t=[];const o=e.permissions||[],n=d=>{const{meta:l}=d,{permissions:i}=l||{};return i?o.some(r=>i.includes(r.value)):!0};try{t=Fo($t,n)}catch(d){console.log(d)}return[]}}}),Uo=F({name:"system-workspace",props:{notNeedKey:{type:Boolean,default:!1},animate:{type:Boolean,default:!0}},setup(){ve();const e=Bo(he);return{keepAliveComponents:te(()=>e.keepAliveComponents)}}});function jo(e,t,o,n,d,l){const i=x("RouterView");return P(),V(i,null,{default:E(({Component:r,route:_})=>[e.keepAliveComponents?(P(),V(Ot,{key:0,include:e.keepAliveComponents},[(P(),V(Ue(r),{key:_.fullPath}))],1032,["include"])):(P(),V(Ue(r),{key:_.fullPath}))]),_:1})}const Wo=ie(Uo,[["render",jo]]),Vo=F({name:"system-layout",components:{SystemLogo:En,SystemMenu:Mn,SystemHead:Xn,SystemTabs:Io,SystemWorkspace:Wo},props:{},setup(){const e=q(!1),t=()=>{const o=document.body.clientWidth;e.value=o<=950};return Le(()=>{window.addEventListener("resize",t)}),{isCollapsed:e}}});function qo(e,t,o,n,d,l){const i=x("system-logo"),r=x("system-menu"),_=x("n-layout-sider"),a=x("system-head"),m=x("n-layout-header"),b=x("system-workspace"),C=x("n-layout-content"),g=x("n-layout");return P(),V(g,{class:"system-layout",position:"absolute","has-sider":""},{default:E(()=>[k(_,{class:"system-layout__left",onCollapse:t[0]||(t[0]=w=>e.isCollapsed=!0),onExpand:t[1]||(t[1]=w=>e.isCollapsed=!1),"collapse-mode":"width",position:"absolute",collapsed:e.isCollapsed,"collapsed-width":64,width:200,"native-scrollbar":!1,inverted:!0},{default:E(()=>[k(i,{isCollapsed:e.isCollapsed},null,8,["isCollapsed"]),k(r)]),_:1},8,["collapsed"]),k(g,{class:"system-layout__right",inverted:!1},{default:E(()=>[k(m,{style:{"z-index":"999"},inverted:!1,position:"absolute"},{default:E(()=>[k(a,{isCollapsed:e.isCollapsed,"onUpdate:isCollapsed":t[2]||(t[2]=w=>e.isCollapsed=w)},null,8,["isCollapsed"])]),_:1}),k(C,{class:"system-layout__right__content","native-scrollbar":!0,position:"absolute"},{default:E(()=>[k(b)]),_:1})]),_:1})]),_:1})}const Yo=ie(Vo,[["render",qo],["__scopeId","data-v-5b306b28"]]);export{Yo as default};
