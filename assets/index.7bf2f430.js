import{d as J,m as K,p as Q,r as o,q as p,f as x,x as z,j as n,o as G,c as Y,a as f,A as g,i as b,R as H,y as l,z as d,_ as V,l as re,T as ce}from"./index.1b29a92a.js";const de={class:"view"},ue={class:"head-info"},pe=J({__name:"items",setup(W,{expose:P}){K();const m=Q(),_=o({});p(()=>m.getUserInfo.team),p(()=>m.getUserInfo.role),p(()=>m.getUserInfo.lob),p(()=>m.getUserInfo.id),P({setup:async(c,s)=>{_.value=c,s==="Module"?v.checkListId=c.checkListId_Module:s==="Enclosure"?v.checkListId=c.checkListId_Enclosure:s==="ORT"&&(v.checkListId=c.checkListId_ORT),v.type=s,s=="Module"?y.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"IF CTQ",key:"ifCtq",width:100,valueFormator:a=>a?"Y":"N"},{title:"Measurement Equipment",key:"measurementEquipment",width:200},{title:"Characteristic (Check item)",key:"checkItem",width:400},{title:"LSL",key:"LSL",width:200},{title:"USL",key:"USL",width:200},{title:"LCL (optional)",key:"LCL",width:200},{title:"UCL (optional)",key:"UCL",width:200},{title:"Sample Unit",key:"sampleUnit",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Audit Sample Size",key:"auditSampleSize",width:200},{title:"Frenquency/Basis",key:"frenquencyBasis",width:400},{title:"Control Type",key:"controlType",width:400},{title:"Control Method",key:"controlMethod",width:400},{title:"Control Criteria",key:"controlCriteria",width:400},{title:"Response plan",key:"responsePlan",width:400},{title:"SOP-NO.",key:"sopNo",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:a=>a?"TRUE":"FALSE"}]:s=="Enclosure"?y.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"Check Items",key:"checkItems",width:400},{title:"Sampling Size",key:"samplingSize",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:a=>a?"TRUE":"FALSE"}]:s=="ORT"&&(y.value=[{title:"SN",key:"sn",width:60},{title:"Project",key:"project",width:200},{title:"Test Item",key:"testItem",width:400},{title:"Test Condition/Parameter",key:"testConditionParameter",width:400},{title:"Equipment",key:"equipment",width:400},{title:"Fixture (Y/N)",key:"fixtureYN",width:200},{title:"Sample Orientation",key:"sampleOrientation",width:200},{title:"Recovery Time",key:"recoveryTime",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Sampling Freq.",key:"samplingFreq",width:200},{title:"Duration",key:"duration",width:200},{title:"Read Point",key:"readPoint",width:200},{title:"Pass/Fail Criteria",key:"passFailCriteria",width:400},{title:"OCAP",key:"OCAP",width:400},{title:"Result",key:"result",width:200}]),h()}});const S=[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"},{value:10,label:"Glue"},{value:11,label:"Destructive"}],y=o([]),O={actions:[]};o({});const A=o(1),T=o(15),v=x({}),u=o({total:0,list:[]}),k=o(!0),h=async()=>{k.value=!0;try{const c=await z("/get_check_list_items_page",{pageNum:A.value,pageSize:T.value,...v});u.value=c}finally{k.value=!1}},C=(c,s)=>{},D=async(c,s)=>{};return(c,s)=>{const a=n("AAPageList"),L=n("n-card");return G(),Y("div",de,[f("div",ue,[f("p",null,g(_.value.lob)+" / "+g(_.value.site)+" / "+g(_.value.productLine)+" / "+g(_.value.project)+" / "+g(_.value.part)+" / "+g(b(H)(v.type,S)),1)]),l(L,null,{default:d(()=>[l(a,{isLoading:k.value,pageNum:A.value,"onUpdate:pageNum":s[0]||(s[0]=R=>A.value=R),pageSize:T.value,"onUpdate:pageSize":s[1]||(s[1]=R=>T.value=R),columns:y.value,actions:O,dataSource:u.value,onAction:C,onChange:D,onReload:h},null,8,["isLoading","pageNum","pageSize","columns","dataSource"])]),_:1})])}}});const me=V(pe,[["__scopeId","data-v-4425b04f"]]),_e={class:"page"},ve=J({__name:"index",setup(W){const P=K();re();const m=Q(),_=[{value:"Module",label:"Module"},{value:"Enclosure",label:"Enclosure"},{value:"ORT",label:"ORT"}];p(()=>m.getUserInfo.team);const S=p(()=>m.getUserInfo.role);p(()=>m.getUserInfo.lob);const y=[{title:"Site Project Tree",key:"name",align:"left",width:500},{title:"Check List",key:"checkListTotal",width:200,valueFormator:(e,i)=>{if(i.part){const r=[];return i.checkListId_Module&&r.push("Module"),i.checkListId_Enclosure&&r.push("Enclosure"),i.checkListId_ORT&&r.push("ORT"),r.join(" | ")}else return`${i.checkListUploaded} / ${i.checkListTotal}`}}],O=e=>e.id,A={width:"260px",actions:[{title:"Preview Module",type:"default",key:"previewModule",isShow:e=>e.part!=null&&e.checkListId_Module!=null},{title:"Preview Enclosure",type:"default",key:"previewEnclosure",isShow:e=>e.part!=null&&e.checkListId_Enclosure!=null},{title:"Preview ORT",type:"default",key:"previewORT",isShow:e=>e.part!=null&&e.checkListId_ORT!=null},{title:"Upload",type:"info",key:"update",isShow:e=>S.value==="super_admin"||S.value==="admin"||S.value==="lob_dri"}],more:[]};o({});const T=o(1),v=o(15),u=x({}),k=o([]),h=o(!0),C=async()=>{h.value=!0;try{const e=await z("/get_lines_tree",{pageNum:T.value,pageSize:v.value,...u});k.value=e}finally{h.value=!1}},D=(e,i)=>{e==="previewModule"?F(i,"Module"):e==="previewEnclosure"?F(i,"Enclosure"):e==="previewORT"?F(i,"ORT"):e==="update"?ee(i):e==="delete"&&ie(i)},c=o(null),s=()=>{c.value.show()},a=e=>{function i(w){var j=w.lastIndexOf("/"),N=w.lastIndexOf("\\"),I=Math.max(j,N);return I<0?w:w.substring(I+1)}const r=document.createElement("a");r.download=i(e),r.style.display="none",r.href="https://usw2-mqasmartaudit-prod.apple.com/download_file?filePath="+e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},L=o(null),R=o(!1),t=x({}),M=p(()=>t.lob&&t.site&&t.productLine&&t.project&&t.part&&t.type!=null?`${t.lob}_${t.site}_${t.productLine}_${t.project}_${t.part}_${H(t.type,_)}.json`:null),X=p(()=>t.auditType==="1"?[{value:"Module",label:"Module"},{value:"ORT",label:"ORT"}]:t.auditType==="2"?[{value:"Enclosure",label:"Enclosure"}]:t.auditType==="3"?[{value:"Module",label:"Module"},{value:"Enclosure",label:"Enclosure"},{value:"ORT",label:"ORT"}]:[]),Z=async()=>{t.lob=u.lob,t.site=u.site,t.productLine=u.productLine,t.project=u.project,t.part=u.part,L.value.show()},ee=e=>{t.auditType=e.auditType,t.lob=e.lob,t.site=e.site,t.productLine=e.productLine,t.project=e.project,t.part=e.part,t.type=void 0,L.value.show()},te=async()=>{},ie=async e=>{P.loading("Deleting"),await z("/delete_check_list",{id:e.id}),P.success("Deleted"),L.value.close(),C()},$=o(),q=o(),F=async(e,i)=>{$.value.show(),await ce(),q.value.setup(e,i)};return(e,i)=>{const r=n("AAListButtonAdd"),w=n("AAListButtonDownload"),j=n("AAListHandlers"),N=n("AAPageList"),I=n("n-card"),B=n("AADialog"),le=n("AAFormSiteProject"),U=n("n-grid-item"),oe=n("AAFormSelect"),se=n("AAFormSelectJson"),ne=n("n-grid"),ae=n("AAFormDialog");return G(),Y("div",_e,[l(I,null,{default:d(()=>[l(j,null,{default:d(()=>[l(r,{title:"Upload",onClick:Z}),l(w,{title:"Check List Templates",onClick:s})]),_:1}),l(N,{isPaged:!1,isLoading:h.value,columns:y,actions:A,dataSource:k.value,childrenKey:"sub",rowKey:O,onReady:C,onAction:D,onReload:C},null,8,["isLoading","dataSource"])]),_:1}),l(B,{ref_key:"templatesDialogRef",ref:c,title:"Check List Templates",width:"320px"},{default:d(()=>[f("div",{class:"download-link",onClick:i[0]||(i[0]=E=>a("files/Check_List_Template_Module.json"))},"Module Check List Template"),f("div",{class:"download-link",onClick:i[1]||(i[1]=E=>a("files/Check_List_Template_Enclosure.json"))},"Enclosure Check List Template"),f("div",{class:"download-link",onClick:i[2]||(i[2]=E=>a("files/Check_List_Template_ORT.json"))},"ORT Check List Template"),f("div",{class:"download-link",onClick:i[3]||(i[3]=E=>a("files/Check_List_Template_Glue.json"))},"Glue Check List Template"),f("div",{class:"download-link",onClick:i[4]||(i[4]=E=>a("files/Check_List_Template_Destructive.json"))},"Destructive Check List Template")]),_:1},512),l(ae,{ref_key:"editDialogRef",ref:L,title:"Upload Check List",width:"400px",isLoading:R.value,form:t,onConfirm:te},{default:d(()=>[l(ne,{cols:"1"},{default:d(()=>[l(U,null,{default:d(()=>[l(le,{isRequired:!0,selectParent:!1,label:"Site Project",form:t,team:"MQA",siteProjects:k.value},null,8,["form","siteProjects"])]),_:1}),l(U,null,{default:d(()=>[l(oe,{isRequired:!0,label:"Audit Type",form:t,formKey:"type",options:b(X)},null,8,["form","options"])]),_:1}),l(U,null,{default:d(()=>[l(se,{disabled:!t.part||!t.type,isRequired:!0,label:"JSON Spec File",form:t,formKey:"rawJson",validateName:b(M),tips:"The JSON file must match the line selected"+(b(M)?", and with name '"+b(M)+"'":"")},null,8,["disabled","form","validateName","tips"])]),_:1})]),_:1})]),_:1},8,["isLoading","form"]),l(B,{ref_key:"previewDialogRef",ref:$,title:"Check List"},{default:d(()=>[l(me,{ref_key:"previewRef",ref:q},null,512)]),_:1},512)])}}});const fe=V(ve,[["__scopeId","data-v-6ee56de5"]]);export{fe as default};
