import{_ as M}from"./logo.e3101228.js";import{d as g,o as h,c as k,a as i,p as P,s as y,e as B,b as L,u as R,r as f,m as U,f as O,j as c,y as s,z as o,i as b,C as q,x as A,G as D,H as F,_ as N}from"./index.6cbbc908.js";const V={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},E=i("path",{d:"M336 208v-95a80 80 0 0 0-160 0v95",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),T=i("rect",{x:"96",y:"208",width:"320",height:"272",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),G=[E,T],H=g({name:"LockClosedOutline",render:function(r,p){return h(),k("svg",V,G)}}),J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},K=i("path",{d:"M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Q=i("path",{d:"M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),W=[K,Q],X=g({name:"PersonOutline",render:function(r,p){return h(),k("svg",J,W)}}),Y=_=>(D("data-v-d3d45719"),_=_(),F(),_),Z={class:"page"},ee={class:"page__login-box"},te=Y(()=>i("div",{class:"page__login-box__logo"},[i("img",{class:"page__login-box__logo__icon",src:M,alt:""}),i("div",{class:"page__login-box__logo__title"},"Smart Audit")],-1)),se={class:"page__login-box__form"},oe=g({__name:"index",setup(_){const r=P(y),p=B(y),w=L(),v=R(),x=f(),j=U(),a=f(!1);f(!0);const n=O({account:"",password:"",isCaptcha:!1}),C={account:{required:!0,message:"Please input account",trigger:"blur"},password:{required:!0,message:"Please input password",trigger:"blur"}},I=l=>{l.preventDefault(),x.value.validate(async e=>{e||S()})},S=async()=>{var l;a.value=!0;try{const e=await A("/login",n);r.setToken(e.token),r.setUserInfo(e.user);let t=[];e.user.team==="Accessory"?t=["m_accessory_check_list_edit","m_accessory_site_project_list_edit","m_users_edit"]:e.user.team==="Display"?t=["m_display_mil_list","m_display_check_list_edit","m_display_site_project_list_edit","m_display_site_project_config","m_users_edit"]:e.user.team==="SIP"?t=["m_sip_mil_list","m_sip_check_list_edit","m_sip_site_project_list_edit","m_sip_site_project_config","m_users_edit"]:e.user.team==="MDE"?t=["m_mde_check_list_edit","m_mde_site_project_list_edit","m_users_edit"]:e.user.role==="super_admin"?t=["m_check_list_edit","m_site_project_list_edit","m_site_project_config","m_users_edit","m_mil_list"]:e.user.role==="admin"?t=["m_check_list_edit","m_site_project_list_edit","m_site_project_config","m_users_edit","m_mil_list"]:e.user.role==="lob_dri"?t=["m_check_list_edit","m_site_project_list_edit","m_site_project_config","m_users_edit","m_mil_list"]:e.user.role==="lob_auditor"&&(t=["m_mil_list"]),p.generateMenus(t);const d=decodeURIComponent(((l=v.query)==null?void 0:l.redirect)||"/");j.success("\u767B\u5F55\u6210\u529F"),w.replace(d).then(u=>{v.name=="login"&&w.replace("/")})}catch{await r.cleanLoginInfo()}finally{a.value=!1}};return(l,e)=>{const t=c("n-icon"),d=c("n-input"),u=c("n-form-item"),$=c("n-button"),z=c("n-form");return h(),k("div",Z,[i("div",ee,[te,i("div",se,[s(z,{disabled:a.value,ref_key:"formRef",ref:x,"label-placement":"left",size:"large",model:n,rules:C},{default:o(()=>[s(u,{path:"account"},{default:o(()=>[s(d,{value:n.account,"onUpdate:value":e[0]||(e[0]=m=>n.account=m),placeholder:"Input Account"},{prefix:o(()=>[s(t,{size:"18",color:"#808695"},{default:o(()=>[s(b(X))]),_:1})]),_:1},8,["value"])]),_:1}),s(u,{path:"password"},{default:o(()=>[s(d,{value:n.password,"onUpdate:value":e[1]||(e[1]=m=>n.password=m),type:"password","show-password-on":"click",placeholder:"Input Password"},{prefix:o(()=>[s(t,{size:"18",color:"#808695"},{default:o(()=>[s(b(H))]),_:1})]),_:1},8,["value"])]),_:1}),s(u,null,{default:o(()=>[s($,{type:"primary",onClick:I,size:"large",loading:a.value,block:""},{default:o(()=>[q(" Login ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["disabled","model"])])])])}}});const ne=N(oe,[["__scopeId","data-v-d3d45719"]]);export{ne as default};
