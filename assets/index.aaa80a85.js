import{d as B,m as K,p as J,r as s,q as p,f as N,x as b,j as a,o as Q,c as Y,a as T,A as L,i as P,R as H,y as o,z as u,_ as V,l as ne,T as ce}from"./index.7c46848d.js";const re={class:"view"},de={class:"head-info"},ue=B({__name:"items",setup(W,{expose:w}){K();const m=J(),_=s({});p(()=>m.getUserInfo.team),p(()=>m.getUserInfo.role),p(()=>m.getUserInfo.lob),p(()=>m.getUserInfo.id),w({setup:async(d,l)=>{_.value=d,l==="Module"?n.checkListId=d.checkListId_Module:l==="Enclosure"?n.checkListId=d.checkListId_Enclosure:l==="ORT"&&(n.checkListId=d.checkListId_ORT),n.type=l,l=="Module"?y.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"IF CTQ",key:"ifCtq",width:100,valueFormator:c=>c?"Y":"N"},{title:"Measurement Equipment",key:"measurementEquipment",width:200},{title:"Characteristic (Check item)",key:"checkItem",width:400},{title:"LSL",key:"LSL",width:200},{title:"USL",key:"USL",width:200},{title:"LCL (optional)",key:"LCL",width:200},{title:"UCL (optional)",key:"UCL",width:200},{title:"Sample Unit",key:"sampleUnit",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Audit Sample Size",key:"auditSampleSize",width:200},{title:"Frenquency/Basis",key:"frenquencyBasis",width:400},{title:"Control Type",key:"controlType",width:400},{title:"Control Method",key:"controlMethod",width:400},{title:"Control Criteria",key:"controlCriteria",width:400},{title:"Response plan",key:"responsePlan",width:400},{title:"SOP-NO.",key:"sopNo",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:c=>c?"TRUE":"FALSE"}]:l=="Enclosure"?y.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"Check Items",key:"checkItems",width:400},{title:"Sampling Size",key:"samplingSize",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:c=>c?"TRUE":"FALSE"}]:l=="ORT"&&(y.value=[{title:"SN",key:"sn",width:60},{title:"Project",key:"project",width:200},{title:"Test Item",key:"testItem",width:400},{title:"Test Condition/Parameter",key:"testConditionParameter",width:400},{title:"Equipment",key:"equipment",width:400},{title:"Fixture (Y/N)",key:"fixtureYN",width:200},{title:"Sample Orientation",key:"sampleOrientation",width:200},{title:"Recovery Time",key:"recoveryTime",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Sampling Freq.",key:"samplingFreq",width:200},{title:"Duration",key:"duration",width:200},{title:"Read Point",key:"readPoint",width:200},{title:"Pass/Fail Criteria",key:"passFailCriteria",width:400},{title:"OCAP",key:"OCAP",width:400},{title:"Result",key:"result",width:200}]),f()}});const E=[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"},{value:10,label:"Glue"},{value:11,label:"Destructive"}],y=s([]),I={actions:[]};s({});const g=s(1),S=s(15),n=N({}),h=s({total:0,list:[]}),v=s(!0),f=async()=>{v.value=!0;try{const d=await b("/get_check_list_items_page",{pageNum:g.value,pageSize:S.value,...n});h.value=d}finally{v.value=!1}},O=(d,l)=>{},C=async(d,l)=>{};return(d,l)=>{const c=a("AAPageList"),A=a("n-card");return Q(),Y("div",re,[T("div",de,[T("p",null,L(_.value.lob)+" / "+L(_.value.site)+" / "+L(_.value.productLine)+" / "+L(_.value.project)+" / "+L(_.value.part)+" / "+L(P(H)(n.type,E)),1)]),o(A,null,{default:u(()=>[o(c,{isLoading:v.value,pageNum:g.value,"onUpdate:pageNum":l[0]||(l[0]=e=>g.value=e),pageSize:S.value,"onUpdate:pageSize":l[1]||(l[1]=e=>S.value=e),columns:y.value,actions:I,dataSource:h.value,onAction:O,onChange:C,onReload:f},null,8,["isLoading","pageNum","pageSize","columns","dataSource"])]),_:1})])}}});const pe=V(ue,[["__scopeId","data-v-4425b04f"]]),me={class:"page"},_e=B({__name:"index",setup(W){const w=K();ne();const m=J(),_=[{value:"Module",label:"Module"},{value:"Enclosure",label:"Enclosure"},{value:"ORT",label:"ORT"}];p(()=>m.getUserInfo.team),p(()=>m.getUserInfo.role),p(()=>m.getUserInfo.lob);const E=[{title:"Site Project Tree",key:"name",align:"left",width:500},{title:"Check List",key:"checkListTotal",width:200,valueFormator:(t,i)=>{if(i.part){const r=[];return i.checkListId_Module&&r.push("Module"),i.checkListId_Enclosure&&r.push("Enclosure"),i.checkListId_ORT&&r.push("ORT"),r.join(" | ")}else return`${i.checkListUploaded} / ${i.checkListTotal}`}}],y=t=>t.id,I={width:"260px",actions:[{title:"Preview Module",type:"default",key:"previewModule",isShow:t=>t.part!=null&&t.checkListId_Module!=null},{title:"Preview Enclosure",type:"default",key:"previewEnclosure",isShow:t=>t.part!=null&&t.checkListId_Enclosure!=null},{title:"Preview ORT",type:"default",key:"previewORT",isShow:t=>t.part!=null&&t.checkListId_ORT!=null},{title:"Upload",type:"info",key:"update"}],more:[]};s({});const g=s(1),S=s(15),n=N({}),h=s([]),v=s(!0),f=async()=>{v.value=!0;try{const t=await b("/get_lines_tree",{pageNum:g.value,pageSize:S.value,...n});h.value=t}finally{v.value=!1}},O=(t,i)=>{t==="previewModule"?F(i,"Module"):t==="previewEnclosure"?F(i,"Enclosure"):t==="previewORT"?F(i,"ORT"):t==="update"?Z(i):t==="delete"&&te(i)},C=s(null),d=()=>{C.value.show()},l=t=>{function i(k){var D=k.lastIndexOf("/"),M=k.lastIndexOf("\\"),R=Math.max(D,M);return R<0?k:k.substring(R+1)}const r=document.createElement("a");r.download=i(t),r.style.display="none",r.href="https://usw2-mqasmartaudit-prod.apple.com/download_file?filePath="+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)},c=s(null),A=s(!1),e=N({}),x=p(()=>e.lob&&e.site&&e.productLine&&e.project&&e.part&&e.type!=null?`${e.lob}_${e.site}_${e.productLine}_${e.project}_${e.part}_${H(e.type,_)}`:null),G=p(()=>e.auditType==="1"?[{value:"Module",label:"Module"},{value:"ORT",label:"ORT"}]:e.auditType==="2"?[{value:"Enclosure",label:"Enclosure"}]:e.auditType==="3"?[{value:"Enclosure",label:"Enclosure"},{value:"ORT",label:"ORT"}]:[]),X=async()=>{e.lob=n.lob,e.site=n.site,e.productLine=n.productLine,e.project=n.project,e.part=n.part,c.value.show()},Z=t=>{e.auditType=t.auditType,e.lob=t.lob,e.site=t.site,e.productLine=t.productLine,e.project=t.project,e.part=t.part,e.type=void 0,c.value.show()},ee=async()=>{A.value=!0;try{await b("/upload_check_list",e),w.success("Uploaded"),c.value.close(),f()}finally{A.value=!1}},te=async t=>{w.loading("Deleting"),await b("/delete_check_list",{id:t.id}),w.success("Deleted"),c.value.close(),f()},j=s(),z=s(),F=async(t,i)=>{j.value.show(),await ce(),z.value.setup(t,i)};return(t,i)=>{const r=a("AAListButtonAdd"),k=a("AAListButtonDownload"),D=a("AAListHandlers"),M=a("AAPageList"),R=a("n-card"),q=a("AADialog"),ie=a("AAFormSiteProject"),U=a("n-grid-item"),le=a("AAFormSelect"),oe=a("AAFormSelectJsonWithExcel"),se=a("n-grid"),ae=a("AAFormDialog");return Q(),Y("div",me,[o(R,null,{default:u(()=>[o(D,null,{default:u(()=>[o(r,{title:"Upload",onClick:X}),o(k,{title:"Check List Templates",onClick:d})]),_:1}),o(M,{isPaged:!1,isLoading:v.value,columns:E,actions:I,dataSource:h.value,childrenKey:"sub",rowKey:y,onReady:f,onAction:O,onReload:f},null,8,["isLoading","dataSource"])]),_:1}),o(q,{ref_key:"templatesDialogRef",ref:C,title:"Check List Templates",width:"400px"},{default:u(()=>[T("div",{class:"download-link",onClick:i[0]||(i[0]=$=>l("files/LOB_Site_ProductLine_Project_Part_Module.xlsx"))},"Process Check List Template (Module)"),T("div",{class:"download-link",onClick:i[1]||(i[1]=$=>l("files/LOB_Site_ProductLine_Project_Part_Enclosure.xlsx"))},"Process Check List Template (Enclosure)"),T("div",{class:"download-link",onClick:i[2]||(i[2]=$=>l("files/LOB_Site_ProductLine_Project_Part_ORT.xlsx"))},"ORT Check List Template")]),_:1},512),o(ae,{ref_key:"editDialogRef",ref:c,title:"Upload Check List",width:"400px",isLoading:A.value,form:e,onConfirm:ee},{default:u(()=>[o(se,{cols:"1"},{default:u(()=>[o(U,null,{default:u(()=>[o(ie,{isRequired:!0,selectParent:!1,label:"Site Project",form:e,team:"MQA",siteProjects:h.value},null,8,["form","siteProjects"])]),_:1}),o(U,null,{default:u(()=>[o(le,{isRequired:!0,label:"Audit Type",form:e,formKey:"type",options:P(G)},null,8,["form","options"])]),_:1}),o(U,null,{default:u(()=>[o(oe,{disabled:!e.part||!e.type,isRequired:!0,label:"Spec Excel/JSON File",form:e,formKey:"rawJson",sheetName:"Check List",validateName:P(x),tips:"The file must match the line selected"+(P(x)?", and with name '"+P(x)+"'":"")},null,8,["disabled","form","validateName","tips"])]),_:1})]),_:1})]),_:1},8,["isLoading","form"]),o(q,{ref_key:"previewDialogRef",ref:j,title:"Check List"},{default:u(()=>[o(pe,{ref_key:"previewRef",ref:z},null,512)]),_:1},512)])}}});const fe=V(_e,[["__scopeId","data-v-cb3d1719"]]);export{fe as default};
