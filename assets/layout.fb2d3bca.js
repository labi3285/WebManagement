import{d as F,o as E,c as H,a as O,_ as ie,n as Je,w as Qe,v as Xe,u as ve,b as ke,e as Ze,s as he,r as q,f as et,g as tt,h as Le,t as yt,i as Se,j as x,k as V,l as nt,m as Pe,p as ot,q as Y,x as Ct,y as k,z as $,A as ne,B as ye,C as Ce,F as Ee,S as St,D as st,E as kt,G as xt,H as $e,I as Lt,J as be,K as Pt,L as Fe,M as Be,N as Et,O as $t,P as Ot,Q as Ue}from"./index.9a22ce4e.js";import{_ as Tt}from"./logo.e3101228.js";const zt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Mt=O("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8L295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512L196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1l216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z",fill:"currentColor"},null,-1),At=[Mt],je=F({name:"CloseOutlined",render:function(t,s){return E(),H("svg",zt,At)}}),Rt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Dt=O("path",{d:"M180 176h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zm724 0h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zM785.3 504.3L657.7 403.6a7.23 7.23 0 0 0-11.7 5.7V476H378v-62.8c0-6-7-9.4-11.7-5.7L238.7 508.3a7.14 7.14 0 0 0 0 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h268v62.8c0 6 7 9.4 11.7 5.7l127.5-100.8c3.8-2.9 3.8-8.5.2-11.4z",fill:"currentColor"},null,-1),It=[Dt],Ht=F({name:"ColumnWidthOutlined",render:function(t,s){return E(),H("svg",Rt,It)}}),Nt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ft=O("path",{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 0 0 0 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 0 0 391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6L877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 0 0-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z",fill:"currentColor"},null,-1),Bt=[Ft],Ut=F({name:"FullscreenExitOutlined",render:function(t,s){return E(),H("svg",Nt,Bt)}}),jt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Wt=O("path",{d:"M290 236.4l43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6l43.7 43.7a8.01 8.01 0 0 0 13.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 0 0 0 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 0 0-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6L423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z",fill:"currentColor"},null,-1),Vt=[Wt],qt=F({name:"FullscreenOutlined",render:function(t,s){return E(),H("svg",jt,Vt)}}),Kt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Gt=O("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281l360-281.1c3.8-3 6.1-7.7 6.1-12.6z",fill:"currentColor"},null,-1),Yt=[Gt],Jt=F({name:"LeftOutlined",render:function(t,s){return E(),H("svg",Kt,Yt)}}),Qt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Xt=O("path",{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 1 0-56 0z",fill:"currentColor"},null,-1),Zt=[Xt],en=F({name:"LockOutlined",render:function(t,s){return E(),H("svg",Qt,Zt)}}),tn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},nn=O("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z",fill:"currentColor"},null,-1),on=[nn],sn=F({name:"MenuFoldOutlined",render:function(t,s){return E(),H("svg",tn,on)}}),rn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},an=O("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z",fill:"currentColor"},null,-1),ln=[an],cn=F({name:"MenuUnfoldOutlined",render:function(t,s){return E(),H("svg",rn,ln)}}),dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},un=O("path",{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1),hn=[un],fn=F({name:"MinusOutlined",render:function(t,s){return E(),H("svg",dn,hn)}}),pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},vn=O("path",{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92C290 92 102.3 279.5 102 511.5C101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1c1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 0 0-10.1 4.8c-1.8 5-3.8 10-5.9 14.9c-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 0 1 655.9 829c-42.3 17.9-87.4 27-133.8 27c-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 0 1 279 755.2a342.16 342.16 0 0 1-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4c31.6-31.6 68.4-56.4 109.3-73.8c42.3-17.9 87.4-27 133.8-27c46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 0 1 109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 0 0 3 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z",fill:"currentColor"},null,-1),gn=[vn],rt=F({name:"ReloadOutlined",render:function(t,s){return E(),H("svg",pn,gn)}}),_n={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},mn=O("path",{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1l-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z",fill:"currentColor"},null,-1),wn=[mn],bn=F({name:"RightOutlined",render:function(t,s){return E(),H("svg",_n,wn)}}),yn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Cn=O("path",{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5a375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1c-.4.2-.8.3-1.2.5c-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8c2-77.2 33-149.5 87.8-204.3c56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z",fill:"currentColor"},null,-1),Sn=[Cn],it=F({name:"UserOutlined",render:function(t,s){return E(),H("svg",yn,Sn)}}),kn=F({name:"system-logo",props:{isCollapsed:{type:Boolean,required:!0}}});const xn={class:"system-logo"},Ln={class:"system-logo__name"};function Pn(e,t,s,n,c,l){return E(),H("div",xn,[O("img",{class:Je(["system-logo__icon",{"mr-2":!e.isCollapsed}]),src:Tt,alt:""},null,2),Qe(O("div",Ln,"Smart Audit",512),[[Xe,!e.isCollapsed]])])}const En=ie(kn,[["render",Pn],["__scopeId","data-v-7e173843"]]);function $n(e){var t,s;return((t=e.meta)==null?void 0:t.alwaysShow)!=!0&&((s=e.children)==null?void 0:s.length)===1}function On(e){return e.filter(t=>{var s;return(((s=t.meta)==null?void 0:s.hidden)||!1)!=!0&&!["/:path(.*)*","/","/redirect","/login"].includes(t.path)})}function at(e){return On(e).map(t=>{var l,i,r;const s=$n(t),n=s?t.children[0]:t,c={...n,...n.meta,label:(l=n.meta)==null?void 0:l.title,key:n.name,icon:s?(i=t.meta)==null?void 0:i.icon:(r=n.meta)==null?void 0:r.icon};return n.children&&n.children.length>0&&(c.children=at(n.children)),c})}const Tn=F({name:"system-menu",components:{},props:{isCollapsed:{type:Boolean},location:{type:String,default:"left"}},emits:["update:isCollapsed"],setup(e,{emit:t}){const s=ve(),n=ke(),c=Ze(he),l=q([]),i=q(s.name),r=q(""),g=s.matched,a=g&&g.length?g.map(y=>y.name):[],w=et({expandedKeys:a});tt(()=>s.fullPath,()=>{var S;C();const y=s.matched;w.expandedKeys=y.map(L=>L.name);const P=((S=s.meta)==null?void 0:S.activeMenu)||"";i.value=P||s.name});function C(){l.value=at(c.getMenus)}function b(y){console.log("Click Menu:"+y),/http(s)?:/.test(y)?window.open(y):n.push({name:y})}function m(y){if(!y)return;const P=y.find(L=>w.expandedKeys.indexOf(L)===-1),S=_(P);w.expandedKeys=S?P?[P]:[]:y}function _(y){if(!y)return!1;const P=[];for(const{children:S,key:L}of Se(l))S&&S.length&&P.push(L);return P.includes(y)}return Le(()=>{C()}),{...yt(w),menus:l,selectedMenuKey:i,headerMenuSelectKey:r,onMenuItemClick:b,onMenuExpanded:m}}});function zn(e,t,s,n,c,l){const i=x("n-menu");return E(),V(i,{options:e.menus,inverted:!0,mode:"vertical",isCollapsed:e.isCollapsed,"collapsed-width":60,"collapsed-icon-size":20,"root-indent":10,indent:10,"expanded-keys":e.expandedKeys,value:e.selectedMenuKey,"onUpdate:value":e.onMenuItemClick,"onUpdate:expandedKeys":e.onMenuExpanded},null,8,["options","isCollapsed","expanded-keys","value","onUpdate:value","onUpdate:expandedKeys"])}const Mn=ie(Tn,[["render",zn]]),An=F({name:"UserSetting",components:{UserOutlined:it},setup(){const e=nt(),t=Pe(),s=ke(),n=ve(),c=ot(),l=Y(()=>c.getUserInfo),i=Y(()=>{let o=[];return l.value.team&&l.value.team.length>0&&l.value.team!="MQA"&&o.push(l.value.team),l.value.role==="admin"?o.push("Admin"):l.value.role==="lob_dri"?o.push("DRI"):l.value.role==="lob_auditor"&&o.push("Auditor"),o.join(" / ")}),r=Y(()=>{let o=[];if(l.value.lob)for(const M of l.value.lob)o.push(M);return o.join(",")}),g=q(!1);function a(){g.value=!0}function w(){g.value=!1}const C=q(),b=q(!1),m=q(!1),_=et({currentPassword:null,newPassword:null,confirmNewPassword:null}),y=q({currentPassword:{required:!0,message:"Current Password Empty",trigger:"blur"},newPassword:{required:!0,message:"New Password Empty",trigger:"blur"},confirmNewPassword:{required:!0,message:"Confirm Password Empty",trigger:"blur"}}),P=()=>{_.currentPassword=null,_.newPassword=null,_.confirmNewPassword=null,b.value=!0},S=()=>{C.value.validate(o=>{if(!o){if(_.newPassword!==_.confirmNewPassword){t.warning("Confirm Password Not Match");return}D()}})},L=()=>{b.value=!1};async function D(){m.value=!0;try{await Ct("/user_change_password",{oldPassword:_.currentPassword,newPassword:_.newPassword}),t.success("Password Changed"),b.value=!1}finally{m.value=!1}}return{userInfo:l,userSubInfo:i,userLobs:r,isShow:g,open:a,close:w,onLogout:()=>{e.info({title:"Notice",content:"Are you sure you want to logout?",positiveText:"Logout",negativeText:"Cancel",onPositiveClick:()=>{c.cleanLoginInfo().then(()=>{t.success("Logout Success"),localStorage.removeItem("SYSTEM_TABS"),s.replace({name:"Login",query:{redirect:n.fullPath}}).finally(()=>location.reload())})}})},changePasswordFormRef:C,isChangePassowrdDialogShow:b,isChangePasswordLoading:m,onChangePassword:P,changePasswordForm:_,changePasswordFormRules:y,onChangePasswordConfirm:S,onChangePasswordCancel:L}}});const Rn={class:"page"},Dn={class:"page__info"},In={class:"page__info__account"},Hn={class:"page__info__info"},Nn={class:"page__info__lobs"},Fn={class:"page__bottom-box"},Bn={class:"dialog-bottom-bar"};function Un(e,t,s,n,c,l){const i=x("UserOutlined"),r=x("n-icon"),g=x("n-avatar"),a=x("n-button"),w=x("n-drawer"),C=x("n-input"),b=x("n-form-item"),m=x("n-space"),_=x("n-form"),y=x("n-spin"),P=x("n-modal");return E(),H(Ee,null,[k(w,{show:e.isShow,"onUpdate:show":t[1]||(t[1]=S=>e.isShow=S),width:260,height:200,placement:"right"},{default:$(()=>[O("div",Rn,[O("div",Dn,[k(g,{class:"page__info__icon",round:""},{default:$(()=>[k(r,null,{default:$(()=>[k(i)]),_:1})]),_:1}),O("div",In,ne(e.userInfo.account),1),O("div",Hn,ne(e.userSubInfo),1),O("div",Nn,ne(e.userLobs),1),e.userInfo.id>=0?(E(),H("div",{key:0,class:"page__info__password",onClick:t[0]||(t[0]=(...S)=>e.onChangePassword&&e.onChangePassword(...S))},"Change Password")):ye("",!0)]),O("div",Fn,[k(a,{onClick:e.onLogout},{default:$(()=>[Ce("Logout")]),_:1},8,["onClick"])])])]),_:1},8,["show"]),k(P,{show:e.isChangePassowrdDialogShow,"onUpdate:show":t[5]||(t[5]=S=>e.isChangePassowrdDialogShow=S),title:"Change Password","show-icon":!1,preset:"dialog",style:{width:"400px"}},{default:$(()=>[k(y,{show:e.isChangePasswordLoading},{default:$(()=>[k(_,{size:"medium",ref:"changePasswordFormRef","label-placement":"top",model:e.changePasswordForm,rules:e.changePasswordFormRules},{default:$(()=>[k(b,{label:"Last Password",path:"currentPassword"},{default:$(()=>[k(C,{value:e.changePasswordForm.currentPassword,"onUpdate:value":t[2]||(t[2]=S=>e.changePasswordForm.currentPassword=S),placeholder:"Input Current Password"},null,8,["value"])]),_:1}),k(b,{label:"New Password",path:"newPassword"},{default:$(()=>[k(C,{value:e.changePasswordForm.newPassword,"onUpdate:value":t[3]||(t[3]=S=>e.changePasswordForm.newPassword=S),placeholder:"Input New Password"},null,8,["value"])]),_:1}),k(b,{label:"Confirm New Password",path:"confirmNewPassword"},{default:$(()=>[k(C,{value:e.changePasswordForm.confirmNewPassword,"onUpdate:value":t[4]||(t[4]=S=>e.changePasswordForm.confirmNewPassword=S),placeholder:"Confirm New Password"},null,8,["value"])]),_:1}),O("div",Bn,[k(m,null,{default:$(()=>[k(a,{onClick:e.onChangePasswordCancel},{default:$(()=>[Ce("Cancel")]),_:1},8,["onClick"]),k(a,{type:"info",onClick:e.onChangePasswordConfirm},{default:$(()=>[Ce("Confirm")]),_:1},8,["onClick"])]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["show"])]),_:1},8,["show"])],64)}const jn=ie(An,[["render",Un],["__scopeId","data-v-5ac52d9d"]]),Wn=F({name:"system-head",components:{UserSetting:jn,MenuUnfoldOutlined:cn,MenuFoldOutlined:sn,ReloadOutlined:rt,LockOutlined:en,FullscreenOutlined:qt,FullscreenExitOutlined:Ut,UserOutlined:it,SettingOutlined:St},props:{isCollapsed:{type:Boolean,required:!0}},setup(){const e=ot(he),t=ke(),s=ve();nt(),Pe();const n=Y(()=>{var y;let b=((y=e==null?void 0:e.getUserInfo)==null?void 0:y.account)||"A";const m=b.split(" ");function _(P){return P.length>4?P.slice(0,4):P}return m.length>1?m[0].slice(0,1)+m[1].slice(0,1):_(b)}),c=b=>b.map(m=>{const _={...m,label:m.meta.title,key:m.name,disabled:m.path==="/"};return m.children&&m.children.length>0&&(_.children=c(m.children)),_}),l=Y(()=>c(s.matched)),i=b=>{t.push({name:b})},r=()=>{t.push({path:"/redirect="+Se(s).fullPath})},g=Y(()=>document.fullscreenElement!==void 0&&document.fullscreenElement!==null),a=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},w=q();function C(){w.value.open()}return{shortAccount:n,onRefreshClick:r,breadcrumbList:l,dropdownSelect:i,isFullScreen:g,onFullScreenClick:a,userSettingRef:w,onUserSetting:C}}});const lt=e=>(kt("data-v-41623a10"),e=e(),xt(),e),Vn={class:"system-head"},qn={class:"system-head__left"},Kn=lt(()=>O("div",{style:{width:"5px"}},null,-1)),Gn=lt(()=>O("div",{style:{width:"5px"}},null,-1)),Yn={class:"link-text"},Jn={key:1,class:"link-text"},Qn={class:"system-head__right"};function Xn(e,t,s,n,c,l){const i=x("MenuUnfoldOutlined"),r=x("MenuFoldOutlined"),g=x("n-icon"),a=x("n-dropdown"),w=x("n-breadcrumb-item"),C=x("n-breadcrumb"),b=x("FullscreenOutlined"),m=x("FullscreenExitOutlined"),_=x("n-tooltip"),y=x("UserOutlined"),P=x("n-avatar"),S=x("UserSetting");return Qe((E(),H("div",Vn,[O("div",qn,[Kn,k(g,{size:"20",class:"system-head__left__button",onClick:t[0]||(t[0]=()=>e.$emit("update:isCollapsed",!e.isCollapsed))},{default:$(()=>[e.isCollapsed?(E(),V(i,{key:0})):(E(),V(r,{key:1}))]),_:1}),Gn,k(C,null,{default:$(()=>[(E(!0),H(Ee,null,st(e.breadcrumbList,L=>(E(),V(w,{key:L.name},{default:$(()=>[L.children.length?(E(),V(a,{key:0,options:L.children,onSelect:e.dropdownSelect},{default:$(()=>[O("span",Yn,ne(L.meta.title),1)]),_:2},1032,["options","onSelect"])):(E(),H("span",Jn,ne(L.meta.title),1))]),_:2},1024))),128))]),_:1})]),O("div",Qn,[k(_,{placement:"bottom"},{trigger:$(()=>[k(g,{class:"system-head__right__button",size:"20",onClick:e.onFullScreenClick},{default:$(()=>[e.isFullScreen?(E(),V(b,{key:0})):(E(),V(m,{key:1}))]),_:1},8,["onClick"])]),default:$(()=>[O("span",null,ne(e.isFullScreen?"Exsit Full Screen":"Full Screen"),1)]),_:1}),k(P,{onClick:e.onUserSetting,class:"system-head__right__avatar",round:""},{icon:$(()=>[k(y)]),default:$(()=>[Ce(ne(e.shortAccount)+" ",1)]),_:1},8,["onClick"])]),k(S,{ref:"userSettingRef"},null,512)],512)),[[Xe,!e.isFullScreen]])}const Zn=ie(Wn,[["render",Xn],["__scopeId","data-v-41623a10"]]),eo=["Redirect","Login"],to=$e({id:"system-tabs",state:()=>({tabs:[]}),getters:{},actions:{initTabs(e){this.tabs=e},addTabs(e){return eo.includes(e.name)?!1:(this.tabs.some(s=>s.fullPath==e.fullPath)||this.tabs.push(e),!0)},closeLeftTabs(e){const t=this.tabs.findIndex(s=>s.fullPath==e.fullPath);this.tabs.splice(0,t)},closeRightTabs(e){const t=this.tabs.findIndex(s=>s.fullPath==e.fullPath);this.tabs.splice(t+1)},closeOtherTabs(e){this.tabs=this.tabs.filter(t=>t.fullPath==e.fullPath)},closeCurrentTab(e){const t=this.tabs.findIndex(s=>s.fullPath==e.fullPath);this.tabs.splice(t,1)},closeAllTabs(){this.tabs=[],localStorage.removeItem("SYSTEM_TABS")}}});var Oe={exports:{}},no=Oe.exports={};no.forEach=function(e,t){for(var s=0;s<e.length;s++){var n=t(e[s]);if(n)return n}};var oo=function(e){var t=e.stateHandler.getState;function s(i){var r=t(i);return r&&!!r.isDetectable}function n(i){t(i).isDetectable=!0}function c(i){return!!t(i).busy}function l(i,r){t(i).busy=!!r}return{isDetectable:s,markAsDetectable:n,isBusy:c,markBusy:l}},so=function(e){var t={};function s(i){var r=e.get(i);return r===void 0?[]:t[r]||[]}function n(i,r){var g=e.get(i);t[g]||(t[g]=[]),t[g].push(r)}function c(i,r){for(var g=s(i),a=0,w=g.length;a<w;++a)if(g[a]===r){g.splice(a,1);break}}function l(i){var r=s(i);!r||(r.length=0)}return{get:s,add:n,removeListener:c,removeAllListeners:l}},ro=function(){var e=1;function t(){return e++}return{generate:t}},io=function(e){var t=e.idGenerator,s=e.stateHandler.getState;function n(l){var i=s(l);return i&&i.id!==void 0?i.id:null}function c(l){var i=s(l);if(!i)throw new Error("setId required the element to have a resize detection state.");var r=t.generate();return i.id=r,r}return{get:n,set:c}},ao=function(e){function t(){}var s={log:t,warn:t,error:t};if(!e&&window.console){var n=function(c,l){c[l]=function(){var r=console[l];if(r.apply)r.apply(console,arguments);else for(var g=0;g<arguments.length;g++)r(arguments[g])}};n(s,"log"),n(s,"warn"),n(s,"error")}return s},Te={exports:{}},ct=Te.exports={};ct.isIE=function(e){function t(){var n=navigator.userAgent.toLowerCase();return n.indexOf("msie")!==-1||n.indexOf("trident")!==-1||n.indexOf(" edge/")!==-1}if(!t())return!1;if(!e)return!0;var s=function(){var n,c=3,l=document.createElement("div"),i=l.getElementsByTagName("i");do l.innerHTML="<!--[if gt IE "+ ++c+"]><i></i><![endif]-->";while(i[0]);return c>4?c:n}();return e===s};ct.isLegacyOpera=function(){return!!window.opera};var dt={exports:{}},lo=dt.exports={};lo.getOption=co;function co(e,t,s){var n=e[t];return n==null&&s!==void 0?s:n}var We=dt.exports,uo=function(t){t=t||{};var s=t.reporter,n=We.getOption(t,"async",!0),c=We.getOption(t,"auto",!0);c&&!n&&(s&&s.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var l=Ve(),i,r=!1;function g(_,y){!r&&c&&n&&l.size()===0&&C(),l.add(_,y)}function a(){for(r=!0;l.size();){var _=l;l=Ve(),_.process()}r=!1}function w(_){r||(_===void 0&&(_=n),i&&(b(i),i=null),_?C():a())}function C(){i=m(a)}function b(_){var y=clearTimeout;return y(_)}function m(_){var y=function(P){return setTimeout(P,0)};return y(_)}return{add:g,force:w}};function Ve(){var e={},t=0,s=0,n=0;function c(r,g){g||(g=r,r=0),r>s?s=r:r<n&&(n=r),e[r]||(e[r]=[]),e[r].push(g),t++}function l(){for(var r=n;r<=s;r++)for(var g=e[r],a=0;a<g.length;a++){var w=g[a];w()}}function i(){return t}return{add:c,process:l,size:i}}var ze="_erd";function ho(e){return e[ze]={},ut(e)}function ut(e){return e[ze]}function fo(e){delete e[ze]}var po={initState:ho,getState:ut,cleanState:fo},fe=Te.exports,vo=function(e){e=e||{};var t=e.reporter,s=e.batchProcessor,n=e.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function c(a,w){function C(){w(a)}if(fe.isIE(8))n(a).object={proxy:C},a.attachEvent("onresize",C);else{var b=r(a);if(!b)throw new Error("Element is not detectable by this strategy.");b.contentDocument.defaultView.addEventListener("resize",C)}}function l(a){var w=e.important?" !important; ":"; ";return(a.join(w)+w).trim()}function i(a,w,C){C||(C=w,w=a,a=null),a=a||{},a.debug;function b(m,_){var y=l(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),P=!1,S=window.getComputedStyle(m),L=m.offsetWidth,D=m.offsetHeight;n(m).startSize={width:L,height:D};function f(){function o(){if(S.position==="static"){m.style.setProperty("position","relative",a.important?"important":"");var N=function(j,A,u,d){function v(U){return U.replace(/[^-\d\.]/g,"")}var z=u[d];z!=="auto"&&v(z)!=="0"&&(j.warn("An element that is positioned static has style."+d+"="+z+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+d+" will be set to 0. Element: ",A),A.style.setProperty(d,"0",a.important?"important":""))};N(t,m,S,"top"),N(t,m,S,"right"),N(t,m,S,"bottom"),N(t,m,S,"left")}}function M(){P||o();function N(A,u){if(!A.contentDocument){var d=n(A);d.checkForObjectDocumentTimeoutId&&window.clearTimeout(d.checkForObjectDocumentTimeoutId),d.checkForObjectDocumentTimeoutId=setTimeout(function(){d.checkForObjectDocumentTimeoutId=0,N(A,u)},100);return}u(A.contentDocument)}var j=this;N(j,function(u){_(m)})}S.position!==""&&(o(),P=!0);var h=document.createElement("object");h.style.cssText=y,h.tabIndex=-1,h.type="text/html",h.setAttribute("aria-hidden","true"),h.onload=M,fe.isIE()||(h.data="about:blank"),n(m)&&(m.appendChild(h),n(m).object=h,fe.isIE()&&(h.data="about:blank"))}s?s.add(f):f()}fe.isIE(8)?C(w):b(w,C)}function r(a){return n(a).object}function g(a){if(!!n(a)){var w=r(a);!w||(fe.isIE(8)?a.detachEvent("onresize",w.proxy):a.removeChild(w),n(a).checkForObjectDocumentTimeoutId&&window.clearTimeout(n(a).checkForObjectDocumentTimeoutId),delete n(a).object)}}return{makeDetectable:i,addListener:c,uninstall:g}},go=Oe.exports.forEach,_o=function(e){e=e||{};var t=e.reporter,s=e.batchProcessor,n=e.stateHandler.getState;e.stateHandler.hasState;var c=e.idHandler;if(!s)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var l=w(),i="erd_scroll_detection_scrollbar_style",r="erd_scroll_detection_container";function g(f){C(f,i,r)}g(window.document);function a(f){var o=e.important?" !important; ":"; ";return(f.join(o)+o).trim()}function w(){var f=500,o=500,M=document.createElement("div");M.style.cssText=a(["position: absolute","width: "+f*2+"px","height: "+o*2+"px","visibility: hidden","margin: 0","padding: 0"]);var h=document.createElement("div");h.style.cssText=a(["position: absolute","width: "+f+"px","height: "+o+"px","overflow: scroll","visibility: none","top: "+-f*3+"px","left: "+-o*3+"px","visibility: hidden","margin: 0","padding: 0"]),h.appendChild(M),document.body.insertBefore(h,document.body.firstChild);var N=f-h.clientWidth,j=o-h.clientHeight;return document.body.removeChild(h),{width:N,height:j}}function C(f,o,M){function h(u,d){d=d||function(z){f.head.appendChild(z)};var v=f.createElement("style");return v.innerHTML=u,v.id=o,d(v),v}if(!f.getElementById(o)){var N=M+"_animation",j=M+"_animation_active",A=`/* Created by the element-resize-detector library. */
`;A+="."+M+" > div::-webkit-scrollbar { "+a(["display: none"])+` }

`,A+="."+j+" { "+a(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+N,"animation-name: "+N])+` }
`,A+="@-webkit-keyframes "+N+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,A+="@keyframes "+N+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",h(A)}}function b(f){f.className+=" "+r+"_animation_active"}function m(f,o,M){if(f.addEventListener)f.addEventListener(o,M);else if(f.attachEvent)f.attachEvent("on"+o,M);else return t.error("[scroll] Don't know how to add event listeners.")}function _(f,o,M){if(f.removeEventListener)f.removeEventListener(o,M);else if(f.detachEvent)f.detachEvent("on"+o,M);else return t.error("[scroll] Don't know how to remove event listeners.")}function y(f){return n(f).container.childNodes[0].childNodes[0].childNodes[0]}function P(f){return n(f).container.childNodes[0].childNodes[0].childNodes[1]}function S(f,o){var M=n(f).listeners;if(!M.push)throw new Error("Cannot add listener to an element that is not detectable.");n(f).listeners.push(o)}function L(f,o,M){M||(M=o,o=f,f=null),f=f||{};function h(){if(f.debug){var p=Array.prototype.slice.call(arguments);if(p.unshift(c.get(o),"Scroll: "),t.log.apply)t.log.apply(null,p);else for(var T=0;T<p.length;T++)t.log(p[T])}}function N(p){function T(I){var G=I.getRootNode&&I.getRootNode().contains(I);return I===I.ownerDocument.body||I.ownerDocument.body.contains(I)||G}return!T(p)||window.getComputedStyle(p)===null}function j(p){var T=n(p).container.childNodes[0],I=window.getComputedStyle(T);return!I.width||I.width.indexOf("px")===-1}function A(){var p=window.getComputedStyle(o),T={};return T.position=p.position,T.width=o.offsetWidth,T.height=o.offsetHeight,T.top=p.top,T.right=p.right,T.bottom=p.bottom,T.left=p.left,T.widthCSS=p.width,T.heightCSS=p.height,T}function u(){var p=A();n(o).startSize={width:p.width,height:p.height},h("Element start size",n(o).startSize)}function d(){n(o).listeners=[]}function v(){if(h("storeStyle invoked."),!n(o)){h("Aborting because element has been uninstalled");return}var p=A();n(o).style=p}function z(p,T,I){n(p).lastWidth=T,n(p).lastHeight=I}function U(p){return y(p).childNodes[0]}function J(){return 2*l.width+1}function ae(){return 2*l.height+1}function ge(p){return p+10+J()}function _e(p){return p+10+ae()}function ht(p){return p*2+J()}function ft(p){return p*2+ae()}function Me(p,T,I){var G=y(p),oe=P(p),le=ge(T),ce=_e(I),W=ht(T),R=ft(I);G.scrollLeft=le,G.scrollTop=ce,oe.scrollLeft=W,oe.scrollTop=R}function Ae(){var p=n(o).container;if(!p){p=document.createElement("div"),p.className=r,p.style.cssText=a(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),n(o).container=p,b(p),o.appendChild(p);var T=function(){n(o).onRendered&&n(o).onRendered()};m(p,"animationstart",T),n(o).onAnimationStart=T}return p}function pt(){function p(){var B=n(o).style;if(B.position==="static"){o.style.setProperty("position","relative",f.important?"important":"");var Z=function(ue,re,mt,we){function wt(bt){return bt.replace(/[^-\d\.]/g,"")}var xe=mt[we];xe!=="auto"&&wt(xe)!=="0"&&(ue.warn("An element that is positioned static has style."+we+"="+xe+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+we+" will be set to 0. Element: ",re),re.style[we]=0)};Z(t,o,B,"top"),Z(t,o,B,"right"),Z(t,o,B,"bottom"),Z(t,o,B,"left")}}function T(B,Z,ue,re){return B=B?B+"px":"0",Z=Z?Z+"px":"0",ue=ue?ue+"px":"0",re=re?re+"px":"0",["left: "+B,"top: "+Z,"right: "+re,"bottom: "+ue]}if(h("Injecting elements"),!n(o)){h("Aborting because element has been uninstalled");return}p();var I=n(o).container;I||(I=Ae());var G=l.width,oe=l.height,le=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),ce=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(T(-(1+G),-(1+oe),-oe,-G))),W=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),R=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),K=a(["position: absolute","left: 0","top: 0"]),se=a(["position: absolute","width: 200%","height: 200%"]),Q=document.createElement("div"),X=document.createElement("div"),de=document.createElement("div"),De=document.createElement("div"),me=document.createElement("div"),Ie=document.createElement("div");Q.dir="ltr",Q.style.cssText=le,Q.className=r,X.className=r,X.style.cssText=ce,de.style.cssText=W,De.style.cssText=K,me.style.cssText=R,Ie.style.cssText=se,de.appendChild(De),me.appendChild(Ie),X.appendChild(de),X.appendChild(me),Q.appendChild(X),I.appendChild(Q);function He(){var B=n(o);B&&B.onExpand?B.onExpand():h("Aborting expand scroll handler: element has been uninstalled")}function Ne(){var B=n(o);B&&B.onShrink?B.onShrink():h("Aborting shrink scroll handler: element has been uninstalled")}m(de,"scroll",He),m(me,"scroll",Ne),n(o).onExpandScroll=He,n(o).onShrinkScroll=Ne}function vt(){function p(W,R,K){var se=U(W),Q=ge(R),X=_e(K);se.style.setProperty("width",Q+"px",f.important?"important":""),se.style.setProperty("height",X+"px",f.important?"important":"")}function T(W){var R=o.offsetWidth,K=o.offsetHeight,se=R!==n(o).lastWidth||K!==n(o).lastHeight;h("Storing current size",R,K),z(o,R,K),s.add(0,function(){if(!!se){if(!n(o)){h("Aborting because element has been uninstalled");return}if(!I()){h("Aborting because element container has not been initialized");return}if(f.debug){var X=o.offsetWidth,de=o.offsetHeight;(X!==R||de!==K)&&t.warn(c.get(o),"Scroll: Size changed before updating detector elements.")}p(o,R,K)}}),s.add(1,function(){if(!n(o)){h("Aborting because element has been uninstalled");return}if(!I()){h("Aborting because element container has not been initialized");return}Me(o,R,K)}),se&&W&&s.add(2,function(){if(!n(o)){h("Aborting because element has been uninstalled");return}if(!I()){h("Aborting because element container has not been initialized");return}W()})}function I(){return!!n(o).container}function G(){function W(){return n(o).lastNotifiedWidth===void 0}h("notifyListenersIfNeeded invoked");var R=n(o);if(W()&&R.lastWidth===R.startSize.width&&R.lastHeight===R.startSize.height)return h("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(R.lastWidth===R.lastNotifiedWidth&&R.lastHeight===R.lastNotifiedHeight)return h("Not notifying: Size already notified");h("Current size not notified, notifying..."),R.lastNotifiedWidth=R.lastWidth,R.lastNotifiedHeight=R.lastHeight,go(n(o).listeners,function(K){K(o)})}function oe(){if(h("startanimation triggered."),j(o)){h("Ignoring since element is still unrendered...");return}h("Element rendered.");var W=y(o),R=P(o);(W.scrollLeft===0||W.scrollTop===0||R.scrollLeft===0||R.scrollTop===0)&&(h("Scrollbars out of sync. Updating detector elements..."),T(G))}function le(){if(h("Scroll detected."),j(o)){h("Scroll event fired while unrendered. Ignoring...");return}T(G)}if(h("registerListenersAndPositionElements invoked."),!n(o)){h("Aborting because element has been uninstalled");return}n(o).onRendered=oe,n(o).onExpand=le,n(o).onShrink=le;var ce=n(o).style;p(o,ce.width,ce.height)}function gt(){if(h("finalizeDomMutation invoked."),!n(o)){h("Aborting because element has been uninstalled");return}var p=n(o).style;z(o,p.width,p.height),Me(o,p.width,p.height)}function _t(){M(o)}function Re(){h("Installing..."),d(),u(),s.add(0,v),s.add(1,pt),s.add(2,vt),s.add(3,gt),s.add(4,_t)}h("Making detectable..."),N(o)?(h("Element is detached"),Ae(),h("Waiting until element is attached..."),n(o).onRendered=function(){h("Element is now attached"),Re()}):Re()}function D(f){var o=n(f);!o||(o.onExpandScroll&&_(y(f),"scroll",o.onExpandScroll),o.onShrinkScroll&&_(P(f),"scroll",o.onShrinkScroll),o.onAnimationStart&&_(o.container,"animationstart",o.onAnimationStart),o.container&&f.removeChild(o.container))}return{makeDetectable:L,addListener:S,uninstall:D,initDocument:g}},pe=Oe.exports.forEach,mo=oo,wo=so,bo=ro,yo=io,Co=ao,qe=Te.exports,So=uo,ee=po,ko=vo,xo=_o;function Ke(e){return Array.isArray(e)||e.length!==void 0}function Ge(e){if(Array.isArray(e))return e;var t=[];return pe(e,function(s){t.push(s)}),t}function Ye(e){return e&&e.nodeType===1}var Lo=function(e){e=e||{};var t;if(e.idHandler)t={get:function(L){return e.idHandler.get(L,!0)},set:e.idHandler.set};else{var s=bo(),n=yo({idGenerator:s,stateHandler:ee});t=n}var c=e.reporter;if(!c){var l=c===!1;c=Co(l)}var i=te(e,"batchProcessor",So({reporter:c})),r={};r.callOnAdd=!!te(e,"callOnAdd",!0),r.debug=!!te(e,"debug",!1);var g=wo(t),a=mo({stateHandler:ee}),w,C=te(e,"strategy","object"),b=te(e,"important",!1),m={reporter:c,batchProcessor:i,stateHandler:ee,idHandler:t,important:b};if(C==="scroll"&&(qe.isLegacyOpera()?(c.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),C="object"):qe.isIE(9)&&(c.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),C="object")),C==="scroll")w=xo(m);else if(C==="object")w=ko(m);else throw new Error("Invalid strategy name: "+C);var _={};function y(L,D,f){function o(u){var d=g.get(u);pe(d,function(z){z(u)})}function M(u,d,v){g.add(d,v),u&&v(d)}if(f||(f=D,D=L,L={}),!D)throw new Error("At least one element required.");if(!f)throw new Error("Listener required.");if(Ye(D))D=[D];else if(Ke(D))D=Ge(D);else return c.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var h=0,N=te(L,"callOnAdd",r.callOnAdd),j=te(L,"onReady",function(){}),A=te(L,"debug",r.debug);pe(D,function(d){ee.getState(d)||(ee.initState(d),t.set(d));var v=t.get(d);if(A&&c.log("Attaching listener to element",v,d),!a.isDetectable(d)){if(A&&c.log(v,"Not detectable."),a.isBusy(d)){A&&c.log(v,"System busy making it detectable"),M(N,d,f),_[v]=_[v]||[],_[v].push(function(){h++,h===D.length&&j()});return}return A&&c.log(v,"Making detectable..."),a.markBusy(d,!0),w.makeDetectable({debug:A,important:b},d,function(U){if(A&&c.log(v,"onElementDetectable"),ee.getState(U)){a.markAsDetectable(U),a.markBusy(U,!1),w.addListener(U,o),M(N,U,f);var J=ee.getState(U);if(J&&J.startSize){var ae=U.offsetWidth,ge=U.offsetHeight;(J.startSize.width!==ae||J.startSize.height!==ge)&&o(U)}_[v]&&pe(_[v],function(_e){_e()})}else A&&c.log(v,"Element uninstalled before being detectable.");delete _[v],h++,h===D.length&&j()})}A&&c.log(v,"Already detecable, adding listener."),M(N,d,f),h++}),h===D.length&&j()}function P(L){if(!L)return c.error("At least one element is required.");if(Ye(L))L=[L];else if(Ke(L))L=Ge(L);else return c.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");pe(L,function(D){g.removeAllListeners(D),w.uninstall(D),ee.cleanState(D)})}function S(L){w.initDocument&&w.initDocument(L)}return{listenTo:y,removeListener:g.removeListener,removeAllListeners:g.removeAllListeners,uninstall:P,initDocument:S}};function te(e,t,s){var n=e[t];return n==null&&s!==void 0?s:n}const Po=Lo,Eo=$e({id:"system-project-setting",state:()=>({isCollapsed:!1})}),$o=F({name:"TabsView",components:{DownOutlined:Lt,CloseOutlined:je,LeftOutlined:Jt,RightOutlined:bn},props:{isCollapsed:{type:Boolean}},setup(e){Pe();const t=ve(),s=ke();Eo(he);const n=to(he),c=Ze(he),l=q(),i=Y(()=>n.tabs),r=()=>{const{fullPath:u,hash:d,meta:v,name:z,params:U,path:J,query:ae}=t;return{fullPath:u,hash:d,meta:v,name:z,params:U,path:J,query:ae}};(()=>{let u=[];try{const v=Pt.get("SYSTEM_TABS");v?u=JSON.parse(v):u=[r()]}catch{u=[r()]}const d=s.getRoutes();for(const v of u){const z=d.find(U=>U.path===v.path);z&&(v.meta=z.meta||v.meta,v.name=z.name||v.name)}n.initTabs(u)})();const a=q(t.fullPath),w=Y(()=>{let u=0;for(const d of i.value){if(d.fullPath===a.value)return u;u++}return-1}),C=["Login","Redirect","Error404"],b=u=>{const{fullPath:d}=u;d!==t.fullPath&&(a.value=d,s.push({path:d}),console.log("go tab"))},m=u=>{const{fullPath:d}=u,v=i.value.find(z=>z.fullPath==d);h(v),console.log("close")},_=Y(()=>{const u=Se(i).length<=1;return[{label:"Refresh Current",key:"REFRESH_CURRENT",disabled:!1,icon:be(rt)},{label:"Close Current",key:"CLOSE_CURRENT",disabled:u,icon:be(je)},{label:"Close Others",key:"CLOSE_OTHERS",disabled:u,icon:be(Ht)},{label:"Close All",key:"CLOSE_ALL",disabled:u,icon:be(fn)}]}),y=q(!1),P=()=>{!l.value||(y.value=l.value.offsetWidth<l.value.scrollWidth)},S=()=>{if(!l.value)return;let u=l.value.querySelectorAll(".system-tabs__tabs__scroll__item-select")||[];u.length>0&&u[0].scrollIntoView&&u[0].scrollIntoView()},L=()=>{const u=l.value.offsetWidth,d=l.value.scrollLeft;if(!d)return;const v=d>u?d-u:0;f(v,(v-d)/20)},D=()=>{const u=l.value.offsetWidth,d=l.value.scrollWidth,v=l.value.scrollLeft;if(d-v<=u)return;const z=d-v>u*2?v+u:d-u;f(z,(z-v)/20)},f=(u,d)=>{const v=l.value.scrollLeft,z=d>0&&v+d>=u||d<0&&v+d<=u?u:v+d;if(l.value.scrollTo(z,0),z!==u)return window.requestAnimationFrame(()=>f(u,d))},o=()=>{var u,d;if(t.meta.keepAlive){const v=(d=(u=s.currentRoute.value.matched.find(z=>z.name==t.name))==null?void 0:u.components)==null?void 0:d.default.name;v&&(c.keepAliveComponents=c.keepAliveComponents.filter(z=>z!=v))}},M=()=>{o(),s.push({path:"/redirect"+Se(t).fullPath})},h=u=>{if(!(i.value.length<=1)){if(o(),n.closeCurrentTab(u),a.value===u.fullPath){const d=i.value[i.value.length-1];a.value=d.fullPath,s.push(d)}P(),S()}},N=()=>{n.closeOtherTabs(t),a.value=t.fullPath,s.replace(t.fullPath),P(),S()},j=()=>{localStorage.removeItem("routes"),n.closeAllTabs(),s.replace("/"),P(),S()},A=u=>{switch(u){case"REFRESH_CURRENT":M();break;case"CLOSE_CURRENT":h(t);break;case"CLOSE_OTHERS":N();break;case"CLOSE_ALL":j();break}};return Le(()=>{Po().listenTo(l.value,()=>{P(),S()})}),tt(()=>t.fullPath,u=>{C.includes(t.name)||(a.value=u,n.addTabs(r()),P(),S())},{immediate:!0}),{tabsScrollRef:l,tabs:i,selectPath:a,selectIndex:w,tabsMenus:_,isTabsScrollable:y,onGoTab:b,onCloseTab:m,onPrevTabsPage:L,onNextTabsPage:D,onTabMenuClick:A}}});const Oo={class:"system-tabs"},To={class:"system-tabs__tabs"},zo={ref:"tabsScrollRef",class:"system-tabs__tabs__scroll"},Mo=["id"],Ao=["onClick"],Ro={class:"system-tabs__menu"},Do={class:"system-tabs__menu__button"};function Io(e,t,s,n,c,l){const i=x("LeftOutlined"),r=x("n-icon"),g=x("CloseOutlined"),a=x("RightOutlined"),w=x("DownOutlined"),C=x("n-dropdown");return E(),H("div",Oo,[O("div",To,[e.isTabsScrollable?(E(),H("span",{key:0,class:"system-tabs__tabs__pager",onClick:t[0]||(t[0]=(...b)=>e.onPrevTabsPage&&e.onPrevTabsPage(...b))},[k(r,{size:"16",color:"#515a6e"},{default:$(()=>[k(i)]),_:1})])):ye("",!0),O("div",zo,[(E(!0),H(Ee,null,st(e.tabs,(b,m)=>{var _;return E(),H("div",{key:m,id:b.fullPath,class:Je(["system-tabs__tabs__scroll__item",e.selectIndex===m?"system-tabs__tabs__scroll__item-select":"system-tabs__tabs__scroll__item-normal"])},[O("span",{onClick:Fe(y=>e.onGoTab(b),["stop"])},ne(((_=b.meta)==null?void 0:_.title)||"??"),9,Ao),k(r,{size:"14",onClick:Fe(y=>e.onCloseTab(b),["stop"])},{default:$(()=>[e.tabs.length>1?(E(),V(g,{key:0})):ye("",!0)]),_:2},1032,["onClick"])],10,Mo)}),128))],512),e.isTabsScrollable?(E(),H("span",{key:1,class:"system-tabs__tabs__pager",onClick:t[1]||(t[1]=(...b)=>e.onNextTabsPage&&e.onNextTabsPage(...b))},[k(r,{size:"16",color:"#515a6e"},{default:$(()=>[k(a)]),_:1})])):ye("",!0)]),O("div",Ro,[k(C,{trigger:"hover",onSelect:e.onTabMenuClick,placement:"bottom-end",options:e.tabsMenus},{default:$(()=>[O("div",Do,[k(r,{size:"16",color:"#515a6e"},{default:$(()=>[k(w)]),_:1})])]),_:1},8,["onSelect","options"])])])}const Ho=ie($o,[["render",Io],["__scopeId","data-v-46169e06"]]),No={id:"id",children:"children",pid:"pid"},Fo=e=>Object.assign({},No,e);function Bo(e,t,s={}){s=Fo(s);const n=s.children;function c(l){return l.map(i=>({...i})).filter(i=>(i[n]=i[n]&&c(i[n]),t(i)||i[n]&&i[n].length))}return c(e)}const Uo=$e({id:"system-async-route",state:()=>({menus:[],routers:Be,addRouters:[],keepAliveComponents:[],isDynamicAddedRoute:!1}),getters:{getMenus(){return this.menus},getIsDynamicAddedRoute(){return this.isDynamicAddedRoute}},actions:{getRouters(){return Et(this.addRouters)},setDynamicAddedRoute(e){this.isDynamicAddedRoute=e},setRouters(e){this.addRouters=e,this.routers=Be.concat(e)},setMenus(e){this.menus=e},setKeepAliveComponents(e){this.keepAliveComponents=e},async generateRoutes(e){let t=[];const s=e.permissions||[],n=c=>{const{meta:l}=c,{permissions:i}=l||{};return i?s.some(r=>i.includes(r.value)):!0};try{t=Bo($t,n)}catch(c){console.log(c)}return[]}}}),jo=F({name:"system-workspace",props:{notNeedKey:{type:Boolean,default:!1},animate:{type:Boolean,default:!0}},setup(){ve();const e=Uo(he);return{keepAliveComponents:Y(()=>e.keepAliveComponents)}}});function Wo(e,t,s,n,c,l){const i=x("RouterView");return E(),V(i,null,{default:$(({Component:r,route:g})=>[e.keepAliveComponents?(E(),V(Ot,{key:0,include:e.keepAliveComponents},[(E(),V(Ue(r),{key:g.fullPath}))],1032,["include"])):(E(),V(Ue(r),{key:g.fullPath}))]),_:1})}const Vo=ie(jo,[["render",Wo]]),qo=F({name:"system-layout",components:{SystemLogo:En,SystemMenu:Mn,SystemHead:Zn,SystemTabs:Ho,SystemWorkspace:Vo},props:{},setup(){const e=q(!1),t=()=>{const s=document.body.clientWidth;e.value=s<=950};return Le(()=>{window.addEventListener("resize",t)}),{isCollapsed:e}}});function Ko(e,t,s,n,c,l){const i=x("system-logo"),r=x("system-menu"),g=x("n-layout-sider"),a=x("system-head"),w=x("n-layout-header"),C=x("system-workspace"),b=x("n-layout-content"),m=x("n-layout");return E(),V(m,{class:"system-layout",position:"absolute","has-sider":""},{default:$(()=>[k(g,{class:"system-layout__left",onCollapse:t[0]||(t[0]=_=>e.isCollapsed=!0),onExpand:t[1]||(t[1]=_=>e.isCollapsed=!1),"collapse-mode":"width",position:"absolute",collapsed:e.isCollapsed,"collapsed-width":64,width:200,"native-scrollbar":!1,inverted:!0},{default:$(()=>[k(i,{isCollapsed:e.isCollapsed},null,8,["isCollapsed"]),k(r)]),_:1},8,["collapsed"]),k(m,{class:"system-layout__right",inverted:!1},{default:$(()=>[k(w,{style:{"z-index":"999"},inverted:!1,position:"absolute"},{default:$(()=>[k(a,{isCollapsed:e.isCollapsed,"onUpdate:isCollapsed":t[2]||(t[2]=_=>e.isCollapsed=_)},null,8,["isCollapsed"])]),_:1}),k(b,{class:"system-layout__right__content","native-scrollbar":!0,position:"absolute"},{default:$(()=>[k(C)]),_:1})]),_:1})]),_:1})}const Jo=ie(qo,[["render",Ko],["__scopeId","data-v-5b306b28"]]);export{Jo as default};
