import{_ as M}from"./logo.e3101228.js";import{d as g,o as h,c as k,a as i,p as P,s as v,e as B,b as L,u as R,r as f,m as U,f as O,j as n,y as _,z as t,i as x,C as q,x as A,G as D,H as F,_ as N}from"./index.b2114195.js";const V={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},E=i("path",{d:"M336 208v-95a80 80 0 0 0-160 0v95",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),T=i("rect",{x:"96",y:"208",width:"320",height:"272",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),G=[E,T],H=g({name:"LockClosedOutline",render:function(l,p){return h(),k("svg",V,G)}}),J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},K=i("path",{d:"M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Q=i("path",{d:"M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),W=[K,Q],X=g({name:"PersonOutline",render:function(l,p){return h(),k("svg",J,W)}}),Y=o=>(D("data-v-e9c8da3e"),o=o(),F(),o),Z={class:"page"},ee={class:"page__login-box"},se=Y(()=>i("div",{class:"page__login-box__logo"},[i("img",{class:"page__login-box__logo__icon",src:M,alt:""}),i("div",{class:"page__login-box__logo__title"},"Smart Audit")],-1)),_e={class:"page__login-box__form"},te=g({__name:"index",setup(o){const l=P(v),p=B(v),y=L(),j=R(),w=f(),b=U(),d=f(!1);f(!0);const r=O({account:"",password:"",isCaptcha:!1}),C={account:{required:!0,message:"Please input account",trigger:"blur"},password:{required:!0,message:"Please input password",trigger:"blur"}},I=c=>{c.preventDefault(),w.value.validate(async e=>{e||S()})},S=async()=>{var c;d.value=!0;try{const e=await A("/login",r);l.setToken(e.token),l.setUserInfo(e.user);let s=[];e.user.team==="Accessory"?e.user.role==="super_admin"?s=["m_accessory_check_list_edit","m_accessory_site_project_list_edit","m_users_edit"]:e.user.role==="admin"?s=["m_accessory_check_list_edit","m_accessory_site_project_list_edit","m_users_edit"]:e.user.role==="lob_dri"?s=["m_accessory_check_list_edit","m_accessory_site_project_list_edit","m_users_edit"]:e.user.role==="lob_auditor"&&(s=["m_accessory_check_list_edit","m_accessory_site_project_list_edit","m_users_edit"]):e.user.team==="Display"?e.user.role==="super_admin"?s=["m_display_mil_list","m_display_check_list_edit","m_display_site_project_list_edit","m_display_site_project_config","m_users_edit"]:e.user.role==="admin"?s=["m_display_mil_list","m_display_check_list_edit","m_display_site_project_list_edit","m_display_site_project_config","m_users_edit"]:e.user.role==="lob_dri"?s=["m_display_mil_list","m_display_check_list_edit","m_display_site_project_list_edit","m_display_site_project_config","m_users_edit"]:e.user.role==="lob_auditor"&&(s=["m_display_mil_list","m_display_check_list_edit","m_display_site_project_list_edit","m_display_site_project_config"]):e.user.team==="SIP"?(s=["m_sip_mil_list","m_sip_check_list_edit","m_sip_site_project_list_edit","m_sip_site_project_config","m_users_edit"],e.user.role==="super_admin"?s=["m_sip_mil_list","m_sip_check_list_edit","m_sip_site_project_list_edit","m_sip_site_project_config","m_users_edit"]:e.user.role==="admin"?s=["m_sip_mil_list","m_sip_check_list_edit","m_sip_site_project_list_edit","m_sip_site_project_config","m_users_edit"]:e.user.role==="lob_dri"?s=["m_sip_mil_list","m_sip_check_list_edit","m_sip_site_project_list_edit","m_sip_site_project_config","m_users_edit"]:e.user.role==="lob_auditor"&&(s=["m_sip_mil_list","m_sip_check_list_edit","m_sip_site_project_list_edit","m_sip_site_project_config"])):e.user.team==="MDE"?e.user.role==="super_admin"?s=["m_mde_check_list_edit","m_mde_site_project_list_edit","m_users_edit"]:e.user.role==="admin"?s=["m_mde_check_list_edit","m_mde_site_project_list_edit","m_users_edit"]:e.user.role==="lob_dri"?s=["m_mde_check_list_edit","m_mde_site_project_list_edit","m_users_edit"]:e.user.role==="lob_auditor"&&(s=["m_mde_check_list_edit","m_mde_site_project_list_edit"]):e.user.role==="super_admin"?s=["m_check_list_edit","m_site_project_list_edit","m_site_project_config","m_users_edit","m_mil_list"]:e.user.role==="admin"?s=["m_check_list_edit","m_site_project_list_edit","m_site_project_config","m_users_edit","m_mil_list"]:e.user.role==="lob_dri"?s=["m_check_list_edit","m_site_project_list_edit","m_site_project_config","m_users_edit","m_mil_list"]:e.user.role==="lob_auditor"&&(s=["m_check_list_edit","m_site_project_list_edit","m_site_project_config","m_mil_list"]),p.generateMenus(s);const a=decodeURIComponent(((c=j.query)==null?void 0:c.redirect)||"/");b.success("\u767B\u5F55\u6210\u529F"),y.replace(a).then(m=>{j.name=="login"&&y.replace("/")})}catch{await l.cleanLoginInfo()}finally{d.value=!1}};return(c,e)=>{const s=n("n-icon"),a=n("n-input"),m=n("n-form-item"),$=n("n-button"),z=n("n-form");return h(),k("div",Z,[i("div",ee,[se,i("div",_e,[_(z,{disabled:d.value,ref_key:"formRef",ref:w,"label-placement":"left",size:"large",model:r,rules:C},{default:t(()=>[_(m,{path:"account"},{default:t(()=>[_(a,{value:r.account,"onUpdate:value":e[0]||(e[0]=u=>r.account=u),placeholder:"Input Account"},{prefix:t(()=>[_(s,{size:"18",color:"#808695"},{default:t(()=>[_(x(X))]),_:1})]),_:1},8,["value"])]),_:1}),_(m,{path:"password"},{default:t(()=>[_(a,{value:r.password,"onUpdate:value":e[1]||(e[1]=u=>r.password=u),type:"password","show-password-on":"click",placeholder:"Input Password"},{prefix:t(()=>[_(s,{size:"18",color:"#808695"},{default:t(()=>[_(x(H))]),_:1})]),_:1},8,["value"])]),_:1}),_(m,null,{default:t(()=>[_($,{type:"primary",onClick:I,size:"large",loading:d.value,block:""},{default:t(()=>[q(" Login ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["disabled","model"])])])])}}});const re=N(te,[["__scopeId","data-v-e9c8da3e"]]);export{re as default};
