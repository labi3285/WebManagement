import{d as Q,m as H,p as Y,r as a,q as m,f as q,x as E,j as n,o as G,c as V,a as w,A as L,i as R,R as W,y as l,z as p,T as ne,G as ce,H as re,_ as X,l as de,U as ue}from"./index.74f2624c.js";const pe=g=>(ce("data-v-8c471324"),g=g(),re(),g),me={class:"view"},_e={class:"head-info"},ve=pe(()=>w("div",{class:"flex-space"},null,-1)),he=Q({__name:"items",setup(g,{expose:S}){const v=H(),h=Y(),c=a({});m(()=>h.getUserInfo.team),m(()=>h.getUserInfo.role),m(()=>h.getUserInfo.lob),m(()=>h.getUserInfo.id),S({setup:async(s,o)=>{c.value=s,o==="Module"?r.checkListId=s.checkListId_Module:o==="Enclosure"?r.checkListId=s.checkListId_Enclosure:o==="ORT"&&(r.checkListId=s.checkListId_ORT),r.type=o,o=="Module"?y.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"IF CTQ",key:"ifCtq",width:100,valueFormator:e=>e?"Y":"N"},{title:"Measurement Equipment",key:"measurementEquipment",width:200},{title:"Characteristic (Check item)",key:"checkItem",width:400},{title:"LSL",key:"LSL",width:200},{title:"USL",key:"USL",width:200},{title:"LCL (optional)",key:"LCL",width:200},{title:"UCL (optional)",key:"UCL",width:200},{title:"Sample Unit",key:"sampleUnit",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Audit Sample Size",key:"auditSampleSize",width:200},{title:"Frenquency/Basis",key:"frenquencyBasis",width:400},{title:"Control Type",key:"controlType",width:400},{title:"Control Method",key:"controlMethod",width:400},{title:"Control Criteria",key:"controlCriteria",width:400},{title:"Response plan",key:"responsePlan",width:400},{title:"SOP-NO.",key:"sopNo",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:e=>e?"TRUE":"FALSE"}]:o=="Enclosure"?y.value=[{title:"SN",key:"sn",width:60},{title:"Main Process",key:"mainProcess",width:300},{title:"Sub Process",key:"subProcess",width:300},{title:"Check Items",key:"checkItems",width:400},{title:"Sampling Size",key:"samplingSize",width:400},{title:"DIS Score",key:"disScore",width:100},{title:"Skip",key:"skip",width:100,valueFormator:e=>e?"TRUE":"FALSE"}]:o=="ORT"&&(y.value=[{title:"SN",key:"sn",width:60},{title:"Project",key:"project",width:200},{title:"Test Item",key:"testItem",width:400},{title:"Test Condition/Parameter",key:"testConditionParameter",width:400},{title:"Equipment",key:"equipment",width:400},{title:"Fixture (Y/N)",key:"fixtureYN",width:200},{title:"Sample Orientation",key:"sampleOrientation",width:200},{title:"Recovery Time",key:"recoveryTime",width:200},{title:"Sample Size",key:"sampleSize",width:200},{title:"Sampling Freq.",key:"samplingFreq",width:200},{title:"Duration",key:"duration",width:200},{title:"Read Point",key:"readPoint",width:200},{title:"Pass/Fail Criteria",key:"passFailCriteria",width:400},{title:"OCAP",key:"OCAP",width:400},{title:"Result",key:"result",width:200}]),b()}});const O=[{value:1,label:"Module"},{value:2,label:"Enclosure"},{value:3,label:"ORT"},{value:10,label:"Glue"},{value:11,label:"Destructive"}],y=a([]),D={actions:[]};a({});const A=a(1),u=a(15),r=q({}),k=a({total:0,list:[]}),_=a(!0),b=async()=>{_.value=!0;try{const s=await E("/get_check_list_items_page",{pageNum:A.value,pageSize:u.value,...r});k.value=s}finally{_.value=!1}},I=(s,o)=>{},F=async(s,o)=>{},P=async()=>{v.loading("Processing");const s=c.value.lob+"_"+c.value.site+"_"+c.value.productLine+"_"+c.value.project+"_"+c.value.part+"_"+r.type+".xlsx";await ne("/export_check_list_items",{checkListId:r.checkListId,type:r.type},s),v.destroyAll()};return(s,o)=>{const e=n("AAListButtonDownload"),T=n("AAPageList"),M=n("n-card");return G(),V("div",me,[w("div",_e,[w("p",null,L(c.value.lob)+" / "+L(c.value.site)+" / "+L(c.value.productLine)+" / "+L(c.value.project)+" / "+L(c.value.part)+" / "+L(R(W)(r.type,O)),1),ve,l(e,{title:"Export",onClick:P})]),l(M,null,{default:p(()=>[l(T,{isLoading:_.value,pageNum:A.value,"onUpdate:pageNum":o[0]||(o[0]=C=>A.value=C),pageSize:u.value,"onUpdate:pageSize":o[1]||(o[1]=C=>u.value=C),columns:y.value,actions:D,dataSource:k.value,onAction:I,onChange:F,onReload:b},null,8,["isLoading","pageNum","pageSize","columns","dataSource"])]),_:1})])}}});const ye=X(he,[["__scopeId","data-v-8c471324"]]),ke={class:"page"},fe=Q({__name:"index",setup(g){const S=H();de();const v=Y(),h=[{value:"Module",label:"Module"},{value:"Enclosure",label:"Enclosure"},{value:"ORT",label:"ORT"}];m(()=>v.getUserInfo.team),m(()=>v.getUserInfo.role),m(()=>v.getUserInfo.lob);const c=[{title:"Site Project Tree",key:"name",align:"left",width:500},{title:"Check List",key:"checkListTotal",width:200,valueFormator:(t,i)=>{if(i.part){const d=[];return i.checkListId_Module&&d.push("Module"),i.checkListId_Enclosure&&d.push("Enclosure"),i.checkListId_ORT&&d.push("ORT"),d.join(" | ")}else return`${i.checkListUploaded} / ${i.checkListTotal}`}}],O=t=>t.id,y={width:"260px",actions:[{title:"Preview Module",type:"default",key:"previewModule",isShow:t=>t.part!=null&&t.checkListId_Module!=null},{title:"Preview Enclosure",type:"default",key:"previewEnclosure",isShow:t=>t.part!=null&&t.checkListId_Enclosure!=null},{title:"Preview ORT",type:"default",key:"previewORT",isShow:t=>t.part!=null&&t.checkListId_ORT!=null},{title:"Upload",type:"info",key:"update"}],more:[]};a({});const D=a(1),A=a(15),u=q({}),r=a([]),k=a(!0),_=async()=>{k.value=!0;try{const t=await E("/get_lines_tree",{pageNum:D.value,pageSize:A.value,...u});r.value=t}finally{k.value=!1}},b=(t,i)=>{t==="previewModule"?U(i,"Module"):t==="previewEnclosure"?U(i,"Enclosure"):t==="previewORT"?U(i,"ORT"):t==="update"?Z(i):t==="delete"&&te(i)},I=a(null),F=()=>{I.value.show()},P=t=>{function i(f){var N=f.lastIndexOf("/"),j=f.lastIndexOf("\\"),x=Math.max(N,j);return x<0?f:f.substring(x+1)}const d=document.createElement("a");d.download=i(t),d.style.display="none",d.href="https://usw2-mqasmartaudit-prod.apple.com/download_file?filePath="+t,document.body.appendChild(d),d.click(),document.body.removeChild(d)},s=a(null),o=a(!1),e=q({}),T=m(()=>e.lob&&e.site&&e.productLine&&e.project&&e.part&&e.type!=null?`${e.lob}_${e.site}_${e.productLine}_${e.project}_${e.part}_${W(e.type,h)}`:null),M=m(()=>e.auditType==="1"?[{value:"Module",label:"Module"},{value:"ORT",label:"ORT"}]:e.auditType==="2"?[{value:"Enclosure",label:"Enclosure"}]:e.auditType==="3"?[{value:"Enclosure",label:"Enclosure"},{value:"ORT",label:"ORT"}]:[]),C=async()=>{e.lob=u.lob,e.site=u.site,e.productLine=u.productLine,e.project=u.project,e.part=u.part,s.value.show()},Z=t=>{e.auditType=t.auditType,e.lob=t.lob,e.site=t.site,e.productLine=t.productLine,e.project=t.project,e.part=t.part,e.type=void 0,s.value.show()},ee=async()=>{o.value=!0;try{await E("/upload_check_list",e),S.success("Uploaded"),s.value.close(),_()}finally{o.value=!1}},te=async t=>{S.loading("Deleting"),await E("/delete_check_list",{id:t.id}),S.success("Deleted"),s.value.close(),_()},B=a(),$=a(),U=async(t,i)=>{B.value.show(),await ue(),$.value.setup(t,i)};return(t,i)=>{const d=n("AAListButtonAdd"),f=n("AAListButtonDownload"),N=n("AAListHandlers"),j=n("AAPageList"),x=n("n-card"),K=n("AADialog"),ie=n("AAFormSiteProject"),z=n("n-grid-item"),le=n("AAFormSelect"),oe=n("AAFormSelectJsonWithExcel"),se=n("n-grid"),ae=n("AAFormDialog");return G(),V("div",ke,[l(x,null,{default:p(()=>[l(N,null,{default:p(()=>[l(d,{title:"Upload",onClick:C}),l(f,{title:"Check List Templates",onClick:F})]),_:1}),l(j,{isPaged:!1,isLoading:k.value,columns:c,actions:y,dataSource:r.value,childrenKey:"sub",rowKey:O,onReady:_,onAction:b,onReload:_},null,8,["isLoading","dataSource"])]),_:1}),l(K,{ref_key:"templatesDialogRef",ref:I,title:"Check List Templates",width:"400px"},{default:p(()=>[w("div",{class:"download-link",onClick:i[0]||(i[0]=J=>P("files/LOB_Site_ProductLine_Project_Part_Module.xlsx"))},"Process Check List Template (Module)"),w("div",{class:"download-link",onClick:i[1]||(i[1]=J=>P("files/LOB_Site_ProductLine_Project_Part_Enclosure.xlsx"))},"Process Check List Template (Enclosure)"),w("div",{class:"download-link",onClick:i[2]||(i[2]=J=>P("files/LOB_Site_ProductLine_Project_Part_ORT.xlsx"))},"ORT Check List Template")]),_:1},512),l(ae,{ref_key:"editDialogRef",ref:s,title:"Upload Check List",width:"400px",isLoading:o.value,form:e,onConfirm:ee},{default:p(()=>[l(se,{cols:"1"},{default:p(()=>[l(z,null,{default:p(()=>[l(ie,{isRequired:!0,selectParent:!1,label:"Site Project",form:e,team:"MQA",siteProjects:r.value},null,8,["form","siteProjects"])]),_:1}),l(z,null,{default:p(()=>[l(le,{isRequired:!0,label:"Audit Type",form:e,formKey:"type",options:R(M)},null,8,["form","options"])]),_:1}),l(z,null,{default:p(()=>[l(oe,{disabled:!e.part||!e.type,isRequired:!0,label:"Spec Excel/JSON File",form:e,formKey:"rawJson",sheetName:"Check List",validateName:R(T),tips:"The file must match the line selected"+(R(T)?", and with name '"+R(T)+"'":"")},null,8,["disabled","form","validateName","tips"])]),_:1})]),_:1})]),_:1},8,["isLoading","form"]),l(K,{ref_key:"previewDialogRef",ref:B,title:"Check List"},{default:p(()=>[l(ye,{ref_key:"previewRef",ref:$},null,512)]),_:1},512)])}}});const we=X(fe,[["__scopeId","data-v-cb3d1719"]]);export{we as default};
